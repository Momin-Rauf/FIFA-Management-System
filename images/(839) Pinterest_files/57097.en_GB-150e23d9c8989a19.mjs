(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[57097,51798,39395,99155],{166379:e=>{var i,t,n,o,a={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"inviteType"},{defaultValue:null,kind:"LocalArgument",name:"objectId"}],kind:"Fragment",metadata:null,name:"ShareInviteCreateExternalInviteGraphQLQuery",selections:[{alias:null,args:t=[{kind:"Variable",name:"inviteType",variableName:"inviteType"},{kind:"Variable",name:"objectId",variableName:"objectId"}],concreteType:null,kind:"LinkedField",name:"v3InviteUserExternalQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"InviteUserExternal",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:"invite_code",args:null,kind:"ScalarField",name:"inviteCode",storageKey:null},{alias:"invite_url",args:null,kind:"ScalarField",name:"inviteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],type:"V3InviteUserExternal",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"ShareInviteCreateExternalInviteGraphQLQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3InviteUserExternalQuery",plural:!1,selections:[n,{kind:"InlineFragment",selections:[o],type:"V3InviteUserExternal",abstractKey:null}],storageKey:null}]},params:{id:"ab55ea9f382837bc92cb5dab03686e16868a27912a9e4237e2ddbe7a15540d21",metadata:{},name:"ShareInviteCreateExternalInviteGraphQLQuery",operationKind:"query",text:null}};a.hash="9c91c46b70b37b163403747442a8c1d4",e.exports=a},380465:e=>{var i,t,n,o,a={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"invite_category"},{defaultValue:null,kind:"LocalArgument",name:"url"}],kind:"Fragment",metadata:null,name:"ShareInviteCreateShareLinkGraphQLQuery",selections:[{alias:null,args:t=[{kind:"Variable",name:"inviteCategory",variableName:"invite_category"},{kind:"Literal",name:"name",value:""},{kind:"Variable",name:"url",variableName:"url"}],concreteType:null,kind:"LinkedField",name:"v3CreateShareLinkQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"ShareLink",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:"invite_code",args:null,kind:"ScalarField",name:"inviteCode",storageKey:null},{alias:"invite_url",args:null,kind:"ScalarField",name:"inviteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],type:"V3CreateShareLink",abstractKey:null},{kind:"InlineFragment",selections:[n],type:"ClientError",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"ShareInviteCreateShareLinkGraphQLQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3CreateShareLinkQuery",plural:!1,selections:[n,{kind:"InlineFragment",selections:[o],type:"V3CreateShareLink",abstractKey:null}],storageKey:null}]},params:{id:"8d8e9da7f5f5830ad00711d5fa1aa68c48b859aac0680cc0e49d58d3c1ccea88",metadata:{},name:"ShareInviteCreateShareLinkGraphQLQuery",operationKind:"query",text:null}};a.hash="e485abf49d319ba9c47587981f2a86be",e.exports=a},656177:e=>{var i,t,n,o,a,r,s,l,c={fragment:{argumentDefinitions:[i={defaultValue:null,kind:"LocalArgument",name:"inviteCode"},t={defaultValue:null,kind:"LocalArgument",name:"inviteType"},n={defaultValue:null,kind:"LocalArgument",name:"objectId"}],kind:"Fragment",metadata:null,name:"ShareInviteMutation",selections:[{alias:null,args:o=[{fields:[{kind:"Variable",name:"inviteCode",variableName:"inviteCode"},{kind:"Variable",name:"inviteType",variableName:"inviteType"},{kind:"Variable",name:"objectId",variableName:"objectId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteSentExternalMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"InviteCode",kind:"LinkedField",name:"data",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"fromUserId",storageKey:null}],storageKey:null}],type:"V3InviteSentExternal",abstractKey:null},{kind:"InlineFragment",selections:[a,l={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],type:"InvalidParameters",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,i,n],kind:"Operation",name:"ShareInviteMutation",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3InviteSentExternalMutation",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InviteCode",kind:"LinkedField",name:"data",plural:!1,selections:[r,s,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3InviteSentExternal",abstractKey:null},{kind:"InlineFragment",selections:[l],type:"InvalidParameters",abstractKey:null}],storageKey:null}]},params:{id:"30e03e1f3b6dded5c6d93bfecfb50065b254f1307aec34dfa67719890b615b82",metadata:{},name:"ShareInviteMutation",operationKind:"mutation",text:null}};c.hash="c33b898a613c3dc2792113fb7e97b0f5",e.exports=c},850115:e=>{e.exports="https://s.pinimg.com/webapp/goodIdea-b770896d.svg"},379507:e=>{e.exports="https://s.pinimg.com/webapp/haha-e2800d2d.svg"},637956:e=>{e.exports="https://s.pinimg.com/webapp/love-c31e0b8d.svg"},909745:e=>{e.exports="https://s.pinimg.com/webapp/thanks-62775475.svg"},128206:e=>{e.exports="https://s.pinimg.com/webapp/wow-3cb697ef.svg"},554290:(e,i,t)=>{var n=t(406557);e.exports=function(e){return"function"==typeof e?e:n}},498913:(e,i,t)=>{var n=t(422545),o=t(554290),a=t(640554),r=4294967295,s=Math.min;e.exports=function(e,i){if((e=a(e))<1||e>9007199254740991)return[];var t=r,l=s(e,r);i=o(i),e-=r;for(var c=n(l,i);++t<e;)i(t);return c}},832654:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(349700);function o(e,i){const{alt_text:t,auto_alt_text:o}=e;return t?(0,n.nk)(i.bt("This contains: {{ altText }}", "This contains: {{ altText }}", "web.altText", undefined, true),{altText:t}).join(""):o?(0,n.nk)(i.bt("This may contain: {{ autoAltText }}", "This may contain: {{ autoAltText }}", "web.altText", undefined, true),{autoAltText:o}).join(""):null}},69e4:(e,i,t)=>{t.d(i,{Z:()=>d});var n=t(667294),o=t(702664),a=t(521556),r=t(898781),s=t(6637);var l=t(883119),c=t(785893);function d({favorited:e,favoriteCount:i,isCloseupButton:t,onFavorite:d,onUnfavorite:u,pinId:_,size:p}){const h=(0,r.ZP)(),m=(0,o.useDispatch)(),[g,v]=(0,n.useState)(!1),[f,x]=(0,n.useState)(e),[y,b]=(0,n.useState)(null!=i?i:0),P=async()=>{var e;x(!f),v(!0),f?(b(y-1),await m((e=_,async i=>{await s.Z.create("ApiResource",{url:`/v3/pins/${e}/favorite/`}).callDelete(),i(function(e){return{type:"PIN_FAVORITE",payload:{id:e,increment:-1,value:!1}}}(e))})),u(),v(!1)):(b(y+1),await m(function(e){return async i=>{await s.Z.create("ApiResource",{url:`/v3/pins/${e}/favorite/`}).callCreate(),i(function(e){return{type:"PIN_FAVORITE",payload:{id:e,increment:1,value:!0}}}(e))}}(_)),d(),v(!1))},w=y<10?y:h.bt("9+", "9+", "favoriteButton.favoriteCountText", undefined, true);return(0,c.jsxs)(l.kC,{alignItems:"center",gap:{row:1,column:0},children:[void 0!==i&&y>0&&(0,c.jsx)(l.xv,{size:"200",weight:"bold",children:w}),(0,c.jsx)(a.Z,{isCloseupButton:t,isDisabled:g,isFavorited:f,onTap:()=>{P()},size:p})]})}},578722:(e,i,t)=>{t.d(i,{H1:()=>c,HW:()=>a,iL:()=>l,pN:()=>s,s_:()=>r});var n=t(19121),o=t(773285);const a=new Date(2022,1,1);function r(){const{checkExperiment:e}=(0,o.F)(),i=["enabled_public","employees"].includes(e("web_ip_plays",{dangerouslySkipActivation:!0}).group),t=e("web_ip_pinner_plays",{dangerouslySkipActivation:!0}).anyEnabled,n=e("android_ios_web_ip_plays_dark_reads").anyEnabled;return i||t||n}function s({isOwnPin:e,isStoryPin:i,pinCreationDate:t,surface:r}){const s=(0,n.Z)(),{checkExperiment:l}=(0,o.F)(),c=l("web_play_playtime_pin_stats",{dangerouslySkipActivation:!0}).anyEnabled,d=!!("CreatorProfileStoryPinGrid"===r&&i&&t&&t.getTime()>=a.getTime()&&c&&s.isPartner&&e)&&l("web_ip_plays").anyEnabled,u=["enabled_public","employees"].includes(l("web_ip_plays",{dangerouslySkipActivation:!0}).group);if("CreatorProfileStoryPinGrid"===r&&i&&t&&t.getTime()>=a.getTime()){if(s.isPartner)return e&&d||!e&&u;if(l("web_ip_pinner_plays").anyEnabled)return!0}return!1}function l({isOwnPin:e,isPartner:i}){const{checkExperiment:t}=(0,o.F)(),n=["enabled_public","employees"].includes(t("web_ip_plays",{dangerouslySkipActivation:!0}).group),a=t("web_ip_pinner_plays",{dangerouslySkipActivation:!0}).anyEnabled;return!(e||!(a&&!i||n&&i))}function c({isOwnPin:e,isPartner:i}){const{checkExperiment:t}=(0,o.F)(),n=t("web_ip_plays",{dangerouslySkipActivation:!0}).anyEnabled,a=t("web_ip_pinner_plays",{dangerouslySkipActivation:!0}).anyEnabled;return!(!e||!(n&&i||a&&!i))}},955362:(e,i,t)=>{t.r(i),t.d(i,{default:()=>v});var n=t(667294),o=t(702664),a=t(205202),r=t(248975),s=t(959275),l=t(883561),c=t(898781),d=t(542563),u=t(811403),_=t(623568),p=t(844949),h=t(946595),m=t(883119),g=t(785893);function v({feedbackData:e,feedbackType:i,pin:t,pinTitle:v,setForcePrimary:f,transparentBackground:x}){var y,b;const P=(0,c.ZP)(),w=(0,o.useDispatch)(),{viewParameter:S,viewType:I}=(0,h.E)(),{reportPin:T}=(0,p.f)(),[E,A]=(0,n.useState)(!1),[C,j]=(0,n.useState)(),{ad_match_reason:k,show_ad_reasons:R,board:O,category:z,description:D,id:N="",images:B,is_promoted:L,pinner:Z,promoter:M,recommendation_reason:F,source_interest:V,videos:G}=t;var H;const U=(H=L?60:50,function(e){return(0,l.ZP)((e||"").trim(),H)})(null!=D?D:""),W=(0,a.Z)(B,"236x"),$=(0,_.iR)(G),Y=(0,d.Z)(101,{component:0,element:981,object_id_str:N,aux_data:{feedback_type:i}}),X=()=>{R||(f(!1),w((0,u.i0)(N)),A(!1))};return(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)(m.xu,{"data-test-id":"feedback-button",ref:j,children:(0,g.jsx)(m.hU,{accessibilityLabel:P.bt("More information", "More information", "accessibility label for overflow menu button", undefined, true),bgColor:x?"transparent":"white",icon:"ellipsis",iconColor:"darkGray",onClick:()=>{E?X():(f(!0),A(!0)),Y()},size:"sm"})}),E&&(0,g.jsx)(m.xu,{onFocus:e=>e.stopPropagation(),children:(0,g.jsx)(s.Z,{anchor:C,ad_match_reason:k,bestPinImgSrc:(0,r.Z)({images:t.images,embedSrc:null===(y=t.embed)||void 0===y?void 0:y.src,embedType:null===(b=t.embed)||void 0===b?void 0:b.type}),board:O,feedbackData:e,feedbackType:i,hideDownload:$,isPromoted:L,onLinkClick:()=>{E&&X()},onDismiss:X,onHide:X,onDownloadHideFlyout:()=>{f(!1),A(!1)},pinCategory:z,pinDescription:U,pinId:N,pinImgSrc:W,pinner:Z,pinTitle:v,promoter:M,recommendationReason:F,reportPin:()=>T(t,S,I),sourceInterest:V,viewParameter:S,viewType:I})})]})}},959275:(e,i,t)=>{t.d(i,{Z:()=>B});var n=t(667294),o=t(702664),a=t(941646),r=t(883119),s=t(785893);function l({iconAccessibilityLabel:e,icon:i,linkAccessibilityLabel:t,showNavigationIcon:n,text:o}){return(0,s.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,s.jsx)(a.Z,{id:"ad-reason-icon",children:(0,s.jsx)(r.Sj,{accessibilityLabel:e,bgColor:"lightGray",icon:i,iconColor:"darkGray"})}),(0,s.jsx)(r.xu,{alignSelf:"center","data-test-id":"ad-location-targeting-reason",height:"100%",marginStart:2,children:(0,s.jsx)(r.xv,{children:o})}),n&&t&&(0,s.jsx)(r.kC,{direction:"column",justifyContent:"center",children:(0,s.jsx)(r.JO,{accessibilityLabel:t,color:"default",icon:"arrow-forward"})})]})}var c=t(121151),d=t(898781),u=t(349700),_=t(407043),p=t(773285),h=t(966113);const{ACCOUNT_SETTINGS:m,PERSONAL_INFORMATION:g}=h.ZPm.settings;function v({onDismiss:e,brandName:i,country:t,language:n,isAgeMatched:o,isBehaviorTargetingMatched:v,isCustomerListMatched:f,isGeoPostalCodeMatched:x,isGeoRegionMatched:y,isShoppingTargetingRematched:b}){const{logContextEvent:P}=(0,_.v)(),w=(0,d.ZP)(),S=x||y||o||v||b||f,{checkExperiment:I}=(0,p.F)();return(0,s.jsx)(c.ZP,{accessibilityModalLabel:w.bt("Why am I seeing this ad?", "Why am I seeing this Ad?", "app.common.react.components.PinRep.components.AdReasonsModal", undefined, true),onDismiss:e,children:(0,s.jsxs)(r.xu,{paddingX:8,paddingY:6,children:[(0,s.jsxs)(r.xu,{display:"flex",justifyContent:"center",marginBottom:6,position:"relative",children:[(0,s.jsx)(r.xu,{position:"absolute",left:!0,children:(0,s.jsx)(r.hU,{accessibilityLabel:w.bt("Close", "Close", "app.common.react.components.PinRep.components.AdReasonsModal.closeModal", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:e,size:"sm"})}),(0,s.jsx)(r.X6,{align:"center",size:"500",children:w.bt("Why am I seeing this ad?", "Why am I seeing this ad?", "Heading for promoted Pins explanation", undefined, true)})]}),(0,s.jsxs)(r.xu,{children:[(0,s.jsxs)(r.kC,{direction:"column",gap:{row:0,column:4},children:[(0,s.jsx)(r.xu,{children:(0,s.jsx)(r.xv,{children:(0,u.nk)(w.bt("{{ brandName }} wants to get their ads in front of people like you. {{ learnMoreLink }}", "{{ brandName }} wants to get their ads in front of people like you. {{ learnMoreLink }}", "app.common.react.components.PinRep.components.AdReasonsModal.advertiserExplanation", undefined, true),{brandName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:i},"ad-reasons-brand-name"),learnMoreLink:(0,s.jsx)(a.Z,{id:"ad-reasons-learn-more-link",children:(0,s.jsx)(r.xv,{inline:!0,children:(0,s.jsx)(r.rU,{href:h.UFR,inline:!0,onClick:()=>{P({event_type:101,component:13756,element:12057})},target:"blank",underline:"hover",children:w.bt("Learn more", "Learn more", "app.common.react.components.PinRep.components.AdReasonsModal.learnMoreLink", undefined, true)})},"ad-reasons-learn-more-link")})})})}),S&&(0,s.jsx)(r.xu,{marginBottom:4,children:(0,s.jsx)(r.xv,{children:(0,u.nk)(w.bt("{{ brandName }} is trying to reach people who fit the following criteria:", "{{ brandName }} is trying to reach people who fit the following criteria:", "app.common.react.components.PinRep.components.AdReasonsModal.audienceExplanation", undefined, true),{brandName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:i},"ad-reasons-brand-name")})})})]}),(0,s.jsx)(a.Z,{id:"ad-reasons",children:(0,s.jsxs)(r.kC,{direction:"column",flex:"none",gap:{row:0,column:4},children:[x||y?(0,s.jsx)(r.iP,{role:"link",href:`${h.C00}${m}`,onTap:()=>{P({event_type:101,component:13756,element:12059})},target:"blank",children:(0,s.jsx)(l,{iconAccessibilityLabel:w.bt("Icon for ad targeting location", "Icon for ad targeting location", "app.common.react.components.PinRep.components.AdReasons.locationIcon", undefined, true),icon:"location",linkAccessibilityLabel:w.bt("Navigate to account settings", "Navigate to account settings", "app.common.react.components.PinRep.components.AdReasonRow.icon", undefined, true),showNavigationIcon:!0,text:(0,u.nk)(w.bt("Your primary location is in {{countryName}} and your primary language is {{language}}", "Your primary location is in {{countryName}} and your primary language is {{language}}", "app.common.react.components.PinRep.components.AdReasonsModal.locationTargeting", undefined, true),{countryName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-country-name"),language:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:n},"ad-reasons-language")})})}):null,o&&(0,s.jsx)(l,{iconAccessibilityLabel:w.bt("Icon for ad targeting age", "Icon for ad targeting age", "app.common.react.components.PinRep.components.AdReasons.ageIcon", undefined, true),icon:"person",text:(0,u.nk)(w.bt("{{ brandName }} is trying to reach people in your age range", "{{ brandName }} is trying to reach people in your age range", "app.common.react.components.PinRep.components.AdReasonsModal.ageTargeting", undefined, true),{brandName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:i},"ad-reasons-age-brand-name")})}),v&&(0,s.jsx)(l,{iconAccessibilityLabel:w.bt("Icon for ad targeting search history", "Icon for ad targeting search history", "app.common.react.components.PinRep.components.AdReasons.searchIcon", undefined, true),icon:"search",text:w.bt("Your Pinterest browsing history and search behaviour", "Your Pinterest browsing history and search behavior", "app.common.react.components.PinRep.components.AdReasonsModal.searchTargeting", undefined, true)}),b&&(0,s.jsx)(l,{iconAccessibilityLabel:w.bt("Icon for ad targeting customers who interacted with this brand previously", "Icon for ad targeting customers who interacted with this brand previously", "app.common.react.components.PinRep.components.AdReasonsModal.shoppingTargetingIcon", undefined, true),icon:"clock",text:(0,u.nk)(w.bt("You've interacted with {{brandName}} before", "You've interacted with {{brandName}} before", "app.common.react.components.PinRep.components.AdReasonsModal.shoppingTargetingText", undefined, true),{brandName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:i},"retargeting-ad-reason")})}),f&&(0,s.jsx)(l,{iconAccessibilityLabel:w.bt("Icon for ad targeting user on an audience list", "Icon for ad targeting user on an audience list", "app.common.react.components.PinRep.components.AdReasons.genderIcon", undefined, true),icon:"menu",text:(0,u.nk)(w.bt("You're on an audience list provided by {{brandName}}", "You're on an audience list provided by {{brandName}}", "app.common.react.components.PinRep.components.AdReasonsModal.customerListTargeting", undefined, true),{brandName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:i},"ad-reasons-customer-list")})}),S&&(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.xv,{children:w.bt("There could also be more factors not listed here.", "There could also be more factors not listed here.", "app.common.react.components.PinRep.components.AdReasonsModal.miscFactors", undefined, true)})}),S&&I("ads_web_waista_v2").anyEnabled?(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.iP,{role:"link",href:`${h.C00}${g}`,onTap:()=>{P({event_type:101,component:13756,element:13361})},target:"blank",children:(0,s.jsx)(r.xv,{weight:"bold",children:w.bt("Change user settings", "Change user settings", "app.common.react.components.PinRep.components.AdReasonsModal.miscFactors", undefined, true)})})}):null]})}),(0,s.jsxs)(r.kC,{direction:"column",gap:{row:0,column:1},children:[(0,s.jsx)(r.xu,{marginBottom:3,marginTop:3,children:(0,s.jsx)(r.iz,{})}),(0,s.jsx)(r.xu,{marginBottom:1,marginTop:1,children:(0,s.jsx)(r.X6,{size:"400",children:w.bt("I don't want to see this ad", "I don't want to see this ad", "app.common.react.components.PinRep.components.AdReasonsModal.hideThisAdHeading", undefined, true)})}),(0,s.jsx)(r.xu,{marginBottom:4,children:(0,s.jsx)(r.xv,{children:(0,u.nk)(w.bt("If you don't want to see ads from a specific advertiser, you can block the advertiser's Pinterest profile. {{learnMoreLink}}", "If you don't want to see ads from a specific advertiser you can block the advertiser's Pinterest profile. {{learnMoreLink}}", "app.common.react.components.PinRep.components.AdReasonsModal.blockAdvertiserText", undefined, true),{learnMoreLink:(0,s.jsx)(r.xv,{inline:!0,children:(0,s.jsx)(r.rU,{inline:!0,href:h.K_Y,onClick:()=>{P({event_type:101,component:13756,element:12058})},target:"blank",underline:"hover",children:w.bt("Learn more", "Learn more", "app.common.react.components.PinRep.components.AdReasonsModal.learnMoreLink", undefined, true)})},"ad-reasons-learn-more-link")})})})]})]})]})})}var f=t(784590),x=t(19121),y=t(802201),b=t(780280);function P({pinId:e,onDismiss:i}){var t,o,a,r;const{logContextEvent:l}=(0,_.v)(),{locale:c}=(0,b.B)(),{country:d=""}=(0,x.Z)(),u=(0,f.Z)({name:"CountriesResource",options:{hasEmptyState:!0}}),p=(0,f.Z)({name:"LocalesResource"}),h=(0,y.S6)()(e);(0,n.useEffect)((()=>{l({event_type:120,component:13756})}),[l]);const{ad_targeting_attribution:m,promoter:g}=null!=h?h:{},{is_age_matched:P=!1,is_behavior_targeting_matched:w=!1,is_customer_list_matched:S=!1,is_geo_postal_code_matched:I=!1,is_geo_region_matched:T=!1,is_shopping_retargeting_matched:E=!1}=null!==(t=function(e=null,i=4){return e&&Object.keys(e).filter((i=>"boolean"==typeof e[i])).slice(0,i).reduce(((i,t)=>({...i,[t]:e[t]})),{})}(m))&&void 0!==t?t:{},A=null!==(o=null==g?void 0:g.full_name)&&void 0!==o?o:"",C=function(e,i){var t;const{name:n=""}=null!==(t=e.find((e=>e.key===i)))&&void 0!==t?t:{};return n}(null!==(a=u.data)&&void 0!==a?a:[],d),j=function(e,i){var t;const{name:n=""}=null!==(t=e.find((e=>e.key===i)))&&void 0!==t?t:{};return n}(null!==(r=p.data)&&void 0!==r?r:[],c);return(0,s.jsx)(v,{brandName:A,country:C,language:j,isAgeMatched:P,isBehaviorTargetingMatched:w,isCustomerListMatched:S,isGeoPostalCodeMatched:I,isGeoRegionMatched:T,isShoppingTargetingRematched:E,onDismiss:i})}var w=t(468593),S=t(149230),I=t(248034),T=t(865093),E=t(61877),A=t(760372),C=t(813401),j=t(680046),k=t(827896),R=t(811403),O=t(55275),z=t(276775);function D(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class N extends n.Component{constructor(e){super(e),D(this,"getRecommendationDescription",(()=>{const{ad_match_reason:e,board:i,feedbackType:t,pinner:n,promoter:o,recommendationReason:a,sourceInterest:r}=this.props;return this.feedbackHelpers.getRecommendationDescription({ad_match_reason:e,board:i,feedbackType:t,makeNavigateLink:this.makeNavigateLink,pinner:n,promoter:o,recommendationReason:a,sourceInterest:r})})),D(this,"getRecommendationDescriptionImage",(()=>{const{board:e,feedbackType:i,pinner:t,recommendationReason:n}=this.props;if("followed"!==i&&"pfyBoard"!==i)return null;let o,a,l;return t&&t.explicitly_followed_by_me?(o=t.image_small_url,a="50%",l=`/${t.username}`):e&&e.image_thumbnail_url&&(o=e.image_thumbnail_url,a="4px",l=n&&n.board&&n.board.url||e.url),o?(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:a}},flex:"none",marginStart:3,overflow:"hidden",children:(0,s.jsx)(r.iP,{onTap:()=>{var e;return this.props.history.push(null!==(e=l)&&void 0!==e?e:"")},children:(0,s.jsx)(r.zd,{height:40,wash:!0,width:40,children:(0,s.jsx)(r.Ee,{alt:"",fit:"cover",naturalHeight:1,naturalWidth:1,src:o})})})}):null})),D(this,"getUnfollowAction",(()=>{const{board:e,feedbackType:i,pinner:t,sourceInterest:n}=this.props;return this.feedbackHelpers.getUnfollowAction({board:e,feedbackType:i,makeNavigateLink:this.makeNavigateLink,pinner:t,sourceInterest:n})})),D(this,"getUndoText",(e=>"unfollowPinner"===e||"unfollowBoard"===e?this.props.i18n.bt("Follow again", "Follow again", "Caption for button to undo a unfollowing of a topic", undefined, true):"")),D(this,"feedbackHelpers",(0,j.ZP)({i18n:this.props.i18n,interpolateNamedTemplate:u.nk})),D(this,"makeNavigateLink",((e,i,t,n)=>(0,s.jsx)(r.rU,{onClick:this.props.onLinkClick,href:i,inline:!0,underline:"hover",children:(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:n?{display:"inline",color:"white",textDecorationColor:"white"}:{display:"inline"}},children:t})},e))),D(this,"reportPinOption",(()=>({action:"reportPin",elementType:974,text:this.props.i18n.bt("Report Pin", "Report Pin", "Report a pin in the dropdown", undefined, true),description:this.props.i18n.bt("This goes against Pinterest's community guidelines", "This goes against Pinterest's community guidelines", "Description for the report pin option", undefined, true),callback:this.props.reportPin,dataTestId:"report-pin-option"}))),D(this,"hidePinOption",(e=>{const{clientTrackingParams:i,feedbackData:t,feedbackType:n,pinId:o,recommendationReason:a}=this.props,r="search"===n?973:982,{action:s,actionOptions:l}=this.feedbackHelpers.getHidePinAction({feedbackData:t,feedbackType:n,pinId:o,recommendationReasonId:(0,T.Z)(a),pinFeedbackType:"pfy"===n?4:10,throughId:a&&(0,j.yl)(a),throughProperties:a&&(0,j.XZ)(a),clientTrackingParams:i(o)}),c=this.props.i18n.bt("Hide Pin", "Hide Pin", "message displayed in pin feedback list", undefined, true);return{action:s,actionOptions:l,feedbackText:this.pinHiddenFeedbackText(e),text:c,description:this.props.i18n.bt("See fewer Pins like this", "See fewer Pins like this", "Description for the hide pin option", undefined, true),elementType:r}})),D(this,"stopRecommendationOption",(()=>{const{clientTrackingParams:e,feedbackData:i,feedbackType:t,pinId:n,recommendationReason:o}=this.props,{board:a}=null!=o?o:{},r=(0,T.Z)(o),s=o&&(0,j.yl)(o),l=o&&(0,j.XZ)(o),c="pfyBoard"===t,{action:d,actionOptions:_}=this.feedbackHelpers.getHidePinAction({feedbackData:i,feedbackType:t,pinId:n,recommendationReasonId:r,pinFeedbackType:c?2:4,throughId:s,throughProperties:l,clientTrackingParams:e(n)}),p=a?this.makeNavigateLink("boardUrl",a.url,a.name,!0):"";return{action:d,actionOptions:_,feedbackText:{subTitle:c&&a?(0,u.nk)(this.props.i18n.bt("We won't show you Pins inspired by your board {{ formattedBoard }} any more.", "We won't show you Pins inspired by your board {{ formattedBoard }} anymore.", "Primary caption displayed in pin feedback list to unfollow a board", undefined, true),{formattedBoard:p}):this.props.i18n.bt("Got it! We won't show you Pins like this in future.", "Got it! We won't show you Pins like this in the future.", "message displayed after stopping recommendations from a pin", undefined, true)},text:c&&a?(0,u.nk)(this.props.i18n.bt("Stop seeing Pins inspired by {{ boardName }}", "Stop seeing Pins inspired by {{ boardName }}", "Primary caption displayed in pin feedback list to unfollow a board", undefined, true),{boardName:a.name}):this.props.i18n.bt("See fewer Pins like this", "See fewer Pins like this", "Feedback option to stop recommendations inspired by this Pin", undefined, true),elementType:284}})),D(this,"unfollowBoardOption",(()=>{var e,i;const{board:t}=this.props,n=t?this.makeNavigateLink("boardUrl",null!==(e=t.url)&&void 0!==e?e:"",null!==(i=t.name)&&void 0!==i?i:"",!0):"",o=(0,u.nk)(this.props.i18n.bt("Unfollow {{ boardName }}", "Unfollow {{ boardName }}", "Primary caption displayed in pin feedback list to unfollow a board", undefined, true),{boardName:null==t?void 0:t.name}),a=(0,u.nk)(this.props.i18n.bt("OK. You unfollowed {{ formattedBoard }} and won't see Pins saved to it in future.", "Got it! You unfollowed {{ formattedBoard }} and won't see Pins saved to it in the future.", "Confirmation text after unfollowing a board", undefined, true),{formattedBoard:n});return{action:"unfollowBoard",actionOptions:{board_id:null==t?void 0:t.id},feedbackText:{title:"",subTitle:a},text:o,description:(0,u.nk)(this.props.i18n.bt("Stop seeing Pins from the board \"{{ boardName }}\"", "Stop seeing Pins from the board \"{{ boardName }}\"", "Secondary caption displayed in pin feedback list to unfollow a board", undefined, true),{boardName:null==t?void 0:t.name}),elementType:10614}})),D(this,"unfollowTopicOption",(()=>{const{sourceInterest:e}=this.props;if(e){const{id:i,name:t="",url_name:n=""}=e,o=`/topics/${n}`,a=this.makeNavigateLink("topicUrl",o,t,!0),r=(0,u.nk)(this.props.i18n.bt("See fewer Pins from {{ topicName }}", "See fewer Pins from {{ topicName }}", "Primary caption displayed in pin feedback list to unfollow a topic", undefined, true),{topicName:t}),s=(0,u.nk)(this.props.i18n.bt("We'll show you fewer Pins from {{ formattedTopic }} in future.", "We'll show you fewer Pins from {{ formattedTopic }} in the future.", "Confirmation text after unfollowing a topic", undefined, true),{formattedTopic:a});return{action:"unfollowTopic",actionOptions:{interest_id:i,interest_list:A.X},feedbackText:{title:"",subTitle:s},text:r,description:(0,u.nk)(this.props.i18n.bt("Stop seeing Pins from the topic \"{{ topicName }}\"", "Stop seeing Pins from the topic \"{{ topicName }}\"", "Secondary caption displayed in pin feedback list to unfollow a topic", undefined, true),{topicName:e.name}),elementType:976}}return null})),D(this,"unfollowUserOption",(()=>{const{pinner:e}=this.props,{id:i,username:t,full_name:n}=null!=e?e:{},o=`/${t}`,a=e?this.makeNavigateLink("pinnerUrl",o,null!=n?n:"",!0):"";return{action:"unfollowPinner",actionOptions:{user_id:i},feedbackText:{title:"",subTitle:(0,u.nk)(this.props.i18n.bt("OK. You unfollowed {{ formattedUser }} and won't see Pins they save in future.", "Got it! You unfollowed {{ formattedUser }} and won't see Pins they save in the future.", "Confirmation text after unfollowing a user", undefined, true),{formattedUser:a})},text:(0,u.nk)(this.props.i18n.bt("Unfollow {{ fullName }}", "Unfollow {{ fullName }}", "Primary caption displayed in pin feedback list to unfollow a user", undefined, true),{fullName:n}),description:this.props.i18n.bt("Stop seeing all their Pins", "Stop seeing all their Pins", "Secondary caption displayed in pin feedback list to unfollow a user", undefined, true),elementType:10640}})),D(this,"downloadPinOption",(()=>({action:"downloadPin",text:this.props.i18n.bt("Download image", "Download image", "Button to download Pin image", undefined, true),elementType:10836}))),D(this,"_pinFeedbackText",(()=>{const{location:e,feedbackType:i,hideDownload:t,pinner:n}=this.props,o="followed"===this.props.feedbackType,a=e.pathname.includes("following"),r=(o||"topic"===i)&&!a,s=this.hidePinOption(r),l=this.reportPinOption(),c="promoted"!==i&&!t;switch(i){case"followed":const e=a,t=!e&&this.getRecommendationDescription(),o=null!=n&&n.explicitly_followed_by_me?this.unfollowUserOption():this.unfollowBoardOption();return{...t?{description:t}:{},options:[s,...r||e?[o]:[],..."promoted"!==i?[this.downloadPinOption()]:[],l]};case"promoted":const{pinId:d,showAdReasonsModal:u}=this.props,_=[s,{dataTestId:"why-am-i-seeing-this-ad-reasons",action:"showAdReasons",text:this.props.i18n.bt("Why am I seeing this ad?", "Why am I seeing this ad?", "app.common.react.components.PinFeedbackDropdown.adReasonText", undefined, true),callback:()=>{u(d)}},l];return{description:this.getRecommendationDescription(),options:_};case"topic":const p=this.unfollowTopicOption(),h=[s,...r&&p?[p]:[],...c?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:h};case"pfy":case"pfyBoard":const m=[s,..."pfyBoard"===i?[this.stopRecommendationOption()]:[],...c?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:m};default:const g=[s,...c?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:g}}})),D(this,"pinHiddenFeedbackText",(e=>{const{isPromoted:i,promoter:t}=this.props,n=e?null:this.getUnfollowAction();return i&&null!=t&&t.full_name?{title:"",subTitle:(0,u.nk)(this.props.i18n.bt("{{ promoter }} has paid for this Pin to appear where you'd be more likely to notice it.", "{{ promoter }} has paid to have this pin show up where you'd be more likely to notice it.", "webapp.app.pinFeedbackDropdown.promotedFeedbackText.subtitle", undefined, true),{promoter:t.full_name})}:n?{title:"",subTitle:this.getRecommendationDescription(),unfollow:n}:{title:"",subTitle:this.props.i18n.bt("OK. We won't show you this Pin in future.", "Got it! We won't show you this Pin in the future.", "message displayed after hiding a pin", undefined, true)}}));const i=this._pinFeedbackText();this.state={pinFeedbackConfig:i,showSecondary:!1}}onPinFeedbackActionButtonClick(e,i,t){e.stopPropagation(),i.auxData?this.handleClickLogging(i.elementType,i.auxData):this.handleClickLogging(i.elementType),(0,O.t)(i.action,i.actionOptions,t)}onPinHide(e,i,t,n){const{hidePinFeedback:o,onHide:a,pinId:r,showPinFeedback:s,showPinFeedbackOverlay:l,showPinFeedbackUndo:c,viewParameter:d,viewType:u,logContextEvent:_}=this.props;i&&t&&n?c(r,e,(0,j.EF)(t,n,r,u,d,o,_),this.getUndoText(n)):s(r,e),!t||t.promoted||10!==t.feedback_type&&4!==t.feedback_type?a():(this.setState({showSecondary:!0}),l(r))}handleClickLogging(e,i={}){const{feedbackType:t,viewParameter:n,viewType:o,logContextEvent:a}=this.props;a({event_type:101,view_type:o,view_parameter:n,element:e,component:(0,j.nb)(t),aux_data:{...i}})}renderButtons(){const{hideDownload:e,onDownloadHideFlyout:i,pinId:t,viewType:n,viewParameter:o,logContextEvent:a,isWindowsPwa:l}=this.props,{pinFeedbackConfig:c}=this.state,{options:d}=c,u=[],_=d.length;for(let p=0;p<_;p+=1){const c=d[p],_=O.P.includes(c.action),h=c.callback?c.callback:()=>this.onPinHide(c.feedbackText,_,c.actionOptions,c.action);if("downloadPin"!==c.action){const e=(0,S.Z)({url:c.link||""});let i="";Array.isArray(c.text)?i=c.text.join(""):"string"!=typeof c.text&&"number"!=typeof c.text||(i=c.text.toString()),u.push(c.link?(0,s.jsx)(r.Lt.Link,{href:c.link,isExternal:e,option:{value:c.action||"",label:i},dataTestId:c.dataTestId||""}):(0,s.jsx)(r.Lt.Item,{onSelect:({event:e})=>this.onPinFeedbackActionButtonClick(e,c,h),option:{value:c.action||"",label:i},dataTestId:c.dataTestId||""}))}else if(!e&&!1===l){const{bestPinImgSrc:e,pinTitle:l,pinDescription:c,pinCategory:d}=this.props;u.push((0,s.jsx)(r.Lt.Item,{onSelect:()=>{(0,w.Z)({category:d,filename:l||c,imageDownloadSuccessCallback:()=>{i&&i()},imgSrc:e,pinId:t,viewParameter:o,viewType:n},a)},option:{value:"downloadImage",label:this.props.i18n.bt("Download image", "Download image", "pinRep.pinFeedbackDropdown.downloadImage", undefined, true)}}))}}return u}render(){const{pinFeedbackConfig:e,showSecondary:i}=this.state,{anchor:t,onDismiss:o,feedbackData:a,feedbackType:l,hideAdReasonsModal:c,pinId:d,onHide:u,recommendationReason:_,showAdReasons:p,viewParameter:h,viewType:m}=this.props,{description:g}=e,v=this.getRecommendationDescriptionImage();return(0,s.jsxs)(n.Fragment,{children:[i?(0,s.jsx)(I.Z,{anchor:t,feedbackData:a,feedbackType:l,pinId:d,onDismiss:o,onHide:u,recommendationReason:_,viewParameter:h,viewType:m}):(0,s.jsx)(r.Lt,{anchor:t,id:"pin-action-dropdown",idealDirection:"down",onDismiss:o,zIndex:E.lI,headerContent:g&&(0,s.jsxs)(r.kC,{alignItems:"center",children:[(0,s.jsx)(r.xu,{"data-pin-recommendation-reason":null==_?void 0:_.reason,maxHeight:56,overflow:"hidden",children:(0,s.jsx)(r.xv,{color:"default",overflow:"normal",size:"200",children:g})}),v]}),children:this.renderButtons()}),p&&(0,s.jsx)(P,{onDismiss:()=>c(d),pinId:d})]})}}function B(e){const{logContextEvent:i}=(0,_.v)(),t=(0,k.Z)(),n=(0,d.ZP)(),a=(0,y.S6)()(e.pinId),{ad_targeting_attribution:r,show_ad_reasons:l=!1}=null!=a?a:{},c=(0,C.kf)(),u=(0,o.useDispatch)();return(0,s.jsx)(N,{...e,clientTrackingParams:t,showAdReasons:l,adTargetingAttribution:r,history:(0,z.useHistory)(),i18n:n,isWindowsPwa:c,location:(0,z.useLocation)(),logContextEvent:i,hidePinFeedback:e=>u((0,R.I1)(e)),showPinFeedback:(e,i)=>u((0,R.q1)(e,i)),showPinFeedbackOverlay:e=>u((0,R.Ib)(e)),showPinFeedbackUndo:(e,i,t,n)=>u((0,R.NA)({id:e,text:i,undoAction:t,undoText:n})),showAdReasonsModal:e=>u((0,R.b9)(e)),hideAdReasonsModal:e=>u((0,R.yj)(e))})}},312955:(e,i,t)=>{t.d(i,{Z:()=>f});var n=t(294184),o=t.n(n),a=t(814115),r=t(832654);const s={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1};var l=t(773285),c=t(883119),d=t(785893);function u({alt:e,dominantColor:i,naturalHeight:t,naturalWidth:n,onError:o,onLoad:a,url:r}){return(0,d.jsx)(c.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingTop:"177.77777777777777%"}},children:(0,d.jsx)(c.xu,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{zIndex:s.storyPinImage}},children:(0,d.jsx)(c.Ee,{alt:e,color:i||"transparent",naturalHeight:null!=t?t:1,naturalWidth:null!=n?n:1,onError:o,onLoad:a,src:r,fit:"cover"})})})}function _({alt:e,dominantColor:i,naturalHeight:t,naturalWidth:n,onError:o,onLoad:a,url:r}){return(0,d.jsx)(c.xu,{width:"100%",dangerouslySetInlineStyle:{__style:{zIndex:s.storyPinImage}},children:(0,d.jsx)(c.Ee,{alt:e,color:i||"transparent",naturalHeight:null!=t?t:1,naturalWidth:null!=n?n:1,onError:o,onLoad:a,src:r})})}function p({alt:e,onError:i=(()=>{}),onLoad:t=(()=>{}),pin:n}){const{checkExperiment:o}=(0,l.F)(),{anyEnabled:a}=o("web_idea_pin_flexible_aspect_ratio_display"),{dominant_color:r,images:s={}}=n,{height:c,width:p,url:h}=function(e){var i;return"number"==typeof(null===(i=e["474x"])||void 0===i?void 0:i.width)&&"number"==typeof e["474x"].height&&e["474x"].width>e["474x"].height?e["736x"]:e["474x"]}(s)||{},m=a?_:u;return(0,d.jsx)(m,{alt:e,dominantColor:r,naturalHeight:c,naturalWidth:p,onError:i,onLoad:t,url:h||""})}var h=t(898781),m=t(349700),g=t(310227),v=t(243943);const f=({cropHeight:e,cropWidth:i,fallbackColor:t,highResOnly:n,imageFit:s,lowResOnly:l,mediumResOnly:u,onError:_,onLoad:f,pin:x,saved:y=!1,animateGif:b})=>{var P,w,S;const I=(0,h.ZP)(),T=(0,v.Xx)(),{carousel_data:E,description:A="",dominant_color:C,grid_title:j,id:k,images:R,title:O}=x,z=(0,m.nk)(I.bt("This contains an image of: {{ pinTitle }}", "This contains an image of: {{ pinTitle }}", "web.altText", undefined, true),{pinTitle:O||j}).join(""),D=(0,r.Z)(x,I)||A.trim().length>0&&A||z;if(E)return(0,d.jsx)(a.Z,{onError:_,onLoad:f,highResOnly:n,lowResOnly:l,pinId:k});let N,B="",L=0,Z=0;if(R){var M,F,V;let e=R["236x"];var G,H,U,W,$;if(n?e=R["736x"]||R.orig||R["474x"]||R["236x"]:u&&(e=R["474x"]||R.orig||R["236x"]),L=null===(M=e)||void 0===M?void 0:M.height,Z=null===(F=e)||void 0===F?void 0:F.width,B=null===(V=e)||void 0===V?void 0:V.url,l||u||n)N=null!==(G=e)&&void 0!==G&&G.url?`${e.url} 1x`:"";else N=[(null===(H=R["236x"])||void 0===H?void 0:H.url)&&`${R["236x"].url} 1x`,(null===(U=R["474x"])||void 0===U?void 0:U.url)&&`${R["474x"].url} 2x`,(null===(W=R["736x"])||void 0===W?void 0:W.url)&&`${R["736x"].url} 3x`,(null===($=R.orig)||void 0===$?void 0:$.url)&&`${R.orig.url} 4x`].filter(Boolean).join(", ")}if(b){const e=Math.max(x.embed&&x.embed.width||0,236),i=Math.max(x.embed&&x.embed.height||0,236),t=x.embed?x.embed.src:"";t&&(L=i,Z=e,B=t,N="")}return null!=T&&T.image&&(L=T.image.height,Z=T.image.width,B=T.image.url),(0,d.jsx)(c.kC,{alignItems:"center",justifyContent:"start",minHeight:g.Ml,children:(0,d.jsx)(c.xu,{flex:"grow",children:(0,d.jsx)("div",{className:o()({savedGradient:y}),children:x.story_pin_data_id?(0,d.jsx)(p,{alt:D,pin:x,onError:_,onLoad:f}):(0,d.jsx)(c.xu,{height:i?e:void 0,width:i||void 0,"data-test-id":"non-story-pin-image",children:(0,d.jsx)(c.Ee,{alt:D,color:"dominant"===t?C:t,fit:s,naturalHeight:null!==(P=L)&&void 0!==P?P:1,naturalWidth:null!==(w=Z)&&void 0!==w?w:1,onError:_,onLoad:f,src:null!==(S=B)&&void 0!==S?S:"",srcSet:N})})})})})}},118334:(e,i,t)=>{t.d(i,{Z:()=>S});var n=t(667294),o=t(964082),a=t(983722),r=t(357787),s=t(36971),l=t(463045),c=t(494349),d=t(554779),u=t(312955),_=t(639758),p=t(898781),h=t(46584),m=t(572260),g=t(883119),v=t(623568),f=t(785893);const x=new Set(["ConversationView","TodayTabFeed"]);function y({inAdsDesktopVideoExperiment:e,isAutoplay:i,cropHeight:t,currentTime:o,lowResOnly:a,highResOnly:r,onLoad:s,onError:l,saved:y,onTimeChange:b,isExperimentalPinRep:P,pin:w,surface:S,playing:I,rootMargin:T,viewType:E,viewParameter:A,onVisibilityChanged:C,trackFullVisible:j,inVisibilityChangedHookExperiment:k,imageHeightModifier:R,cropWidth:O}){var z,D;const N=(0,p.ZP)(),[B,L]=(0,n.useState)(!1),[Z,M]=(0,n.useState)(!0),F=(0,v.jL)(w),V=F&&!w.is_eligible_for_web_closeup,G=P&&F&&w.is_eligible_for_web_closeup&&!x.has(S),{setCurrentVideo:H}=(0,c.I)(),U=V||!P||!F,W=(0,h.Z)({onVisibilityChanged:C,inAdsDesktopVideoExperiment:e,trackFullVisible:j,rootMargin:T});let $=!I;e&&($=Z,i&&I&&Z&&M(!1));const{url:Y}=(null===(z=w.images)||void 0===z?void 0:z["236x"])||{},{id:X,is_promoted:K}=w,q=(0,n.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),H({pinId:X,isPromoted:Boolean(K),currentTime:0}),L(!1)}),[K,X,H]),J=(0,n.useCallback)((()=>{K&&L(G)}),[G,K]);if(!w.videos||null===(D=w.videos.video_list)||void 0===D||!D.V_HLSV4)return null;const{height:Q,thumbnail:ee,width:ie,url:te}=w.videos.video_list.V_HLSV4||{},ne=w.videos.id,oe=[{type:"video/m3u8",src:te}];let ae,re=(null!=ie?ie:1)/(null!=Q?Q:1);const se=e&&S&&(0,d.Z)(S);if(se&&(re=1,ae="transparent",R&&(re-=R-1)),B&&F)return(0,f.jsx)(g.xu,{ref:k?W:null,children:(0,f.jsx)(_.Z,{backgroundImage:null!=Y?Y:"",naturalHeight:null!=Q?Q:1,naturalWidth:null!=ie?ie:1,pin:w,onRestartVideo:q})});if($){let e={highResOnly:r,lowResOnly:a,onError:l,onLoad:s,pin:w,saved:y};return se&&(e={...e,cropHeight:t,cropWidth:O,imageFit:"contain"}),(0,f.jsx)(g.xu,{ref:k?W:null,children:(0,f.jsx)(u.Z,{...e})})}return(0,f.jsx)(g.xu,{ref:k?W:null,children:(0,f.jsx)(m.ZP,{isAutoPlay:!!i,cropHeight:t,rootMargin:T,surface:S,inAdsDesktopVideoExperiment:e,contextLogData:{viewParameter:A,component:0,objectId:w.id,video_id:ne,view:E},accessibilityMaximizeLabel:N.bt("Maximise", "Maximize", "Maximize button on video", undefined, true),accessibilityMinimizeLabel:N.bt("Minimise", "Minimize", "Minimize button on video", undefined, true),accessibilityMuteLabel:N.bt("Mute", "Mute", "Mute button on video", undefined, true),accessibilityPauseLabel:N.bt("Pause", "Pause", "Pause button on video", undefined, true),accessibilityPlayLabel:N.bt("Play", "Play", "Play button on video", undefined, true),accessibilityProgressBarLabel:N.bt("Progress bar", "Progress bar", "PinVideo.accessibilityProgressBarLabel", undefined, true),accessibilityUnmuteLabel:N.bt("Unmute", "Unmute", "Unmute button on video", undefined, true),aspectRatio:re,backgroundColor:ae,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startPosition:o||-1},loop:U,onTimeChange:b,playing:I,onPlay:()=>{},onPlayError:()=>{},poster:Y||ee,src:null!=oe?oe:[],videoStartTime:o,volume:0,onEnded:J})})}function b(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const P=(0,r.Z)(y);class w extends n.Component{constructor(...e){super(...e),b(this,"calculateCurrentVideoTime",(()=>{const{currentTimeFromPinRep:e,pin:i,videosAutoplaying:t}=this.props,{id:n}=i,o=(0,s.Z)(n,t);return this.currentVideoCurrentTime||o||e})),b(this,"handleVisibilityChanged",(e=>{const{currentTimeFromPinRep:i,pin:t,setCurrentVideo:n,pauseAutoplay:r,videosAutoplaying:s}=this.props,{id:c,is_promoted:d}=t,u=(0,l.Z)(c,s),_=(0,o.Z)(c,s);if(e){if(d)n({pinId:c,isPromoted:d,currentTime:this.calculateCurrentVideoTime()});else if(_){const e=(0,a.Z)(),{anyEnabled:i}=(null==e?void 0:e.experimentsClient.checkExperiment("hfp_web_video_autoplay_in_grid"))||{};n({pinId:c,isPromoted:Boolean(d),currentTime:this.calculateCurrentVideoTime(),inVideoGridAutoplayExp:i})}}else!e&&u&&r({pinId:c,isPromoted:Boolean(d),currentTime:i||this.currentVideoCurrentTime})})),b(this,"handleVideoTimeChange",(e=>{const{pin:i,onTimeChange:t,videosAutoplaying:n}=this.props,{id:o}=i;(0,l.Z)(o,n)&&(this.currentVideoCurrentTime=e.time),t&&t(e)}))}componentDidMount(){this.props.onLoad&&this.props.onLoad()}componentDidUpdate(e){const{appInFocus:i}=e,{appInFocus:t,currentTimeFromPinRep:n,pauseAutoplay:o,pin:a,setCurrentVideo:r,videosAutoplaying:s}=this.props,{id:c,is_promoted:d}=a,u=(0,l.Z)(c,s);t!==i&&!t&&u?(this.pausedDueToBrowserOutOfFocus=!0,o({pinId:c,isPromoted:Boolean(d),currentTime:n||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&t&&(this.pausedDueToBrowserOutOfFocus=!1,r({pinId:c,isPromoted:Boolean(d),currentTime:this.calculateCurrentVideoTime()}))}componentWillUnmount(){const{currentTimeFromPinRep:e,pauseAutoplay:i,pin:t,videosAutoplaying:n}=this.props,{id:o,is_promoted:a}=t;(0,l.Z)(o,n)&&i({pinId:o,isPromoted:Boolean(a),currentTime:e||this.currentVideoCurrentTime})}render(){const{cropHeight:e,isAutoplay:i,pin:t,surface:n,videosAutoplaying:o,viewParameter:r,viewType:c,highResOnly:d,lowResOnly:u,onError:_,onLoad:p,saved:h,inAdsDesktopVideoExperiment:m,isExperimentalPinRep:g,rootMargin:v,cropWidth:x,imageHeightModifier:b}=this.props,{id:w}=t,S=(0,s.Z)(w,o),I=(0,l.Z)(w,o)&&i,T=(0,a.Z)(),{anyEnabled:E}=(null==T?void 0:T.experimentsClient.checkExperiment("web_mqtt_finddomnode_deprecation"))||{};return E?(0,f.jsx)(y,{cropHeight:e,rootMargin:v,currentTime:S,inAdsDesktopVideoExperiment:m,isAutoplay:i,viewParameter:r,viewType:c,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:t,surface:n,playing:I,trackFullVisible:!1,highResOnly:d,lowResOnly:u,onError:_,onLoad:p,saved:h,isExperimentalPinRep:g,inVisibilityChangedHookExperiment:E,cropWidth:x,imageHeightModifier:b}):(0,f.jsx)(P,{cropHeight:e,rootMargin:v,currentTime:S,inAdsDesktopVideoExperiment:m,isAutoplay:i,viewParameter:r,viewType:c,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:t,surface:n,playing:I,trackFullVisible:!1,highResOnly:d,lowResOnly:u,onError:_,onLoad:p,saved:h,isExperimentalPinRep:g,cropWidth:x,imageHeightModifier:b})}}function S(e){const{appUI:{appInFocus:i,isAutoplay:t,videosAutoplaying:n},pauseAutoplay:o,setCurrentVideo:a}=(0,c.I)();return(0,f.jsx)(w,{...e,appInFocus:i,isAutoplay:t,pauseAutoplay:o,setCurrentVideo:a,videosAutoplaying:n})}},597017:(e,i,t)=>{t.d(i,{Z:()=>Zt});var n=t(667294),o=t(702664),a=t(41233),r=t(605028),s=t(307640);function l({isGroupBoard:e,pin:i,surface:t}){const{carousel_data:n,grid_title:o,rich_summary:a,title:l}=i,{isOwnPin:c,isPromoted:d}=(0,r.Z)(i);if(n){const{carousel_slots:e=[],index:i=0}=n;if(e[i]&&e[i].title)return e[i].title.trim()}if(d){if(s.ZF.includes(t))return o||"";if(c&&!e&&!n&&"UserProfilePinGrid"!==t)return"";const i=a&&"mobile application"!==a.type_name&&a.display_name;return l||i||o||""}return o||""}var c=t(623568);const d=["EngagementDetails","OtherProfilePinGrid","UserProfilePinGrid"];var u=t(35495);function _(e,i){const{isProduct:t}=(0,r.Z)(e);return(t||"ShoppingGridShippedMetadataWithVisitButton"===i&&(0,u.bA)(e))&&(0,u.QY)(e)||""}var p=t(807592),h=t(4294),m=t(18857);const g=["CloseupRelatedProducts","ConversationView","CreatorProfileStoryPinGrid","CreatorProfileActivityPinGrid","ProductPinsFeed","UserProfilePinGrid"];function v({attributionOption:e,board:i,contentType:t,experimentsClient:n,feedbackData:o,feedbackType:a,hasCarouselData:s,isGroupBoard:c,isORBACProfileManager:d,isOwnBoard:u,pin:v,showImageOnly:f,showNativeReactions:x,showPromotedShoppingPrice:y,surface:b,viewer:P,variantData:w}){var S;const{isPromoted:I,isSponsored:T}=(0,r.Z)(v),{pin_note:E}=v,A=function({attributionOption:e,feedbackType:i,isGroupBoard:t,pin:n,showImageOnly:o,surface:a}){const{is_downstream_promotion:r,native_creator:s,promoter:l,sponsorship:c,story_pin_data_id:d}=n;if("promoted"===i||l&&!r||c)return"default";if("ConversationView"!==a&&g.includes(a))return"none";if(t)return"none";let u="default";return"SearchItem"===a&&d?u:(e&&("image-only"===e?u="image-only-credit":"hide"===e&&(u="none")),"followed"!==i||o?["IdeasHubSeasonalRow","TodayArticleFeed","ShoppingPackageItem"].includes(a)&&"hide"===e?u:"TodayArticleFeed"===a&&"show"===e?"show-for-claimed-content":s?"default":"none":u)}({attributionOption:e,feedbackType:a,isGroupBoard:c,pin:v,showImageOnly:f,surface:b}),C=null!=w&&w.title?w.title:l({isGroupBoard:c,pin:v,surface:b}),j=f?"":C,k=!["ShoppingPackageItem","ShoppingSquareGridDomain","ShoppingSquareGridStorefrontDomain","ShoppingSquareGridStorefront"].includes(b)&&!I&&!f&&Boolean(_(v,b)),R=["ShoppingGridShippedMetadataWithVisitButton"].includes(b),O="BaseBoardPinGrid"===b&&E?null===(S=E.text)||void 0===S?void 0:S.trim():null,z=I,D="shopping"===t;"AuthHomefeed"!==b||I||(x=!1);let N,B,L,Z,M=2;if(I?M=3:(k||"none"!==A)&&(M=D?2:1),D||y){var F,V;const e=null===(F=v.rich_summary)||void 0===F||null===(V=F.products)||void 0===V?void 0:V[0],{offer_summary:i}=e||{};N=i?i.standard_price:void 0,B=i?(0,p.Z)(i):void 0}if(w){const{offerSummary:e}=w;N=e?e.standard_price:void 0,B=e?e.price||e.max_price:void 0}if(D&&!I){var G,H,U;const{rating_count:e,rating_value:i,review_count:t}=(null===(G=v.rich_summary)||void 0===G?void 0:G.aggregate_rating)||{};(e||t)&&parseFloat(i)&&(L={count:e||t,rating:i}),Z=null===(H=v.rich_metadata)||void 0===H||null===(U=H.products)||void 0===U?void 0:U[0].shipping_info}const W=(0,m.rh)(v,P,n),$="CreatorProfileStoryPinGrid"===b||"CreatorProfileActivityPinGrid"===b,Y=!$,X=c&&!T;return{attributionType:A,board:i,contentType:t,feedbackData:o,feedbackType:a,pinNoteText:O,pinTitle:j,productCurrentPrice:B,productOriginalPrice:N,productRating:L,productShipping:Z,showCarouselEllipsis:s,showFavoriteButton:!d&&("BaseBoardPinGrid"===b&&u||Boolean((null==i?void 0:i.is_collaborative)&&(0,h.Z)({board:i,viewer:P})))&&!$,showGroupBoardAvatar:X,showNativeReactions:x,showOverflowMenu:z,showPinStats:W,showSource:k,showTextContent:Y,showVisitSiteButton:R,showAttribution:!0,titleLines:M}}var f=t(27255),x=t(121630),y=t(704177),b=t(841478),P=t(53325);const w=["ShoppingCatalogsProductsMetadata"];const S=["BoardCreateUpsell","BoardCoverSelectablePin","BoardNoteSelectablePin","BoardNotePin","BulkEditMode","EngagementDetails","SectionSuggestedPins","SelectableBoardlessPin"],I=["BoardCreateUpsell","BoardCoverSelectablePin","BoardNoteSelectablePin","BoardNotePin","BulkEditMode","ConversationView","EngagementDetails","SectionSuggestedPins","SelectableBoardlessPin","ShoppingCatalogsProductsMetadata"];var T=t(221263),E=t(319915);function A(e={},i=[]){return Object.keys(e).reduce(((t,n)=>i.includes(n)?t:{...t,[n]:e[n]}),{})}var C=t(987097),j=t(687551),k=t(954571);var R=t(976071),O=t(411938),z=t(554779),D=t(463045),N=t(947599),B=t(898781),L=t(717615),Z=t(86551),M=t(19121),F=t(883119),V=t(407043),G=t(785893);const H=["CreatorProfileStoryPinGrid","CreatorProfileActivityPinGrid"],U={component:210,view_type:4,view_parameter:3106},W={view_type:5,view_parameter:3069},$={component:13668,view_type:4,view_parameter:3106};function Y({pinId:e,surface:i}){const{logContextEvent:t}=(0,V.v)(),n=(0,B.ZP)(),o=()=>{const e=H.includes(i)?$:"BaseBoardPinGrid"===i?W:"UserProfilePinGrid"===i?U:{};t({event_type:101,element:10573,...e})},a=n.bt("See more stats", "See more stats", "pinRep.actionBar.seeStatsButton", undefined, true);return(0,G.jsx)(F.xu,{"data-test-id":"see-stats-button",paddingX:3,paddingY:3,children:H.includes(i)?(0,G.jsx)(F.zx,{role:"link",accessibilityLabel:n.bt("Go to Pin stats details page", "Go to pin stats details page", "pinRep.actionBar.seeStatsButton", undefined, true),color:"semiTransparentWhite",fullWidth:!0,href:`/pin/${e}/analytics`,onClick:o,size:"sm",text:(r=a,r.length>14?`${r.substring(0,12).trim()}...`:r)}):(0,G.jsx)(F.hU,{role:"link",accessibilityLabel:n.bt("Go to Pin stats details page", "Go to pin stats details page", "pinRep.actionBar.seeStatsButton", undefined, true),bgColor:"white",href:`/pin/${e}/analytics`,icon:"ads-stats",iconColor:"darkGray",onClick:o,size:"sm"})});var r}var X=t(681227),K=t(758523),q=t(946595),J=t(494349),Q=t(773285),ee=t(578722),ie=t(904411),te=t(802201),ne=t(329734),oe=t(243943),ae=t(330899),re=t(281180),se=t(241244),le=t(699825),ce=t(768559),de=t(89254);function ue(e,i){const{carousel_data:t,domain:n,ad_destination_url:o}=e;let a=n||"";return o&&(a=(0,de.Z)(o).hostname||""),t&&t.id&&(a=function(e,i){const t=i||e&&e.index||0,n=e&&e.carousel_slots||[],o=n[t]&&n[t].link||"";return o&&(0,de.Z)(o).hostname||""}(t,i)),a.replace("www.","")}var _e=t(287072),pe=t(542563),he=t(276775);const me={container:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:18,height:"32px",maxWidth:"132px"},containerHovered:{backgroundColor:"rgba(255, 255, 255, 1.0)"},containerTruncated:{maxWidth:"87px"},text:{color:"#333333"}};function ge({pin:e,sourceLinkStyle:i,surface:t,url:o}){var a,r;const s=(0,B.ZP)(),[l,c]=(0,n.useState)(!1),{id:d}=e,_=ue(e),p=(0,he.useLocation)(),h=(0,u.Kl)(e)||{},{slotIndex:m}=(0,q.E)(),g=(0,ce.Z)({boardUrl:null===(a=e.board)||void 0===a?void 0:a.url,callToCreateSourcePinId:e.call_to_create_source_pin_id,location:p,pinId:e.id,pinnerUserName:null===(r=e.pinner)||void 0===r?void 0:r.username,storyPinDataId:e.story_pin_data_id,trackingParams:e.tracking_params,trackingParamsMap:e.tracking_params_map}),v=(0,pe.Z)(12,{object_id_str:d,clientTrackingParams:g,aux_data:{grid_index:m,...(0,u.Kl)(e)||{}}}),f=(0,pe.Z)(101,{element:162,object_id_str:d,clientTrackingParams:g,aux_data:{...(0,u.Kl)(e)||{}}}),x=(0,pe.Z)(8948,{object_id_str:d,clientTrackingParams:g,aux_data:{click_type:"clickthrough",closeup_navigation_type:"click",grid_index:m,...(0,u.Kl)(e)||{}}}),y=()=>{v(),f(),x()},b=(0,_e.Z)({href:o,target:"blank",externalData:{auxData:h,pin:e,surface:t}});return"icon-only"===i?(0,G.jsx)(F.hU,{accessibilityLabel:s.bt("link", "link", "Website url link", undefined, true),bgColor:"white",href:o,icon:"arrow-up-right",iconColor:"darkGray",onClick:({event:e,dangerouslyDisableOnNavigation:i})=>{i(),y(),b({event:e})},role:"link",rel:"nofollow",size:"sm"}):(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:{...me.container,...l?me.containerHovered:Object.freeze({}),..."truncated-text"===i?me.containerTruncated:Object.freeze({})}},"data-test-id":"pinrep-source-link",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),position:"relative",children:(0,G.jsx)(le.Z,{hovered:l,pin:e,slotIndex:m,viewType:1,children:(0,G.jsx)(F.iP,{fullWidth:!1,href:o,onTap:({event:e,dangerouslyDisableOnNavigation:i})=>{i(),y(),b({event:e})},rel:"nofollow",role:"link",rounding:4,children:(0,G.jsxs)(F.xu,{alignItems:"baseline",dangerouslySetInlineStyle:{__style:me.text},display:"flex",justifyContent:"between",children:[(0,G.jsx)(F.xu,{display:"flex",flex:"none",marginTop:3,marginBottom:3,marginStart:3,children:(0,G.jsx)(F.JO,{accessibilityLabel:s.bt("link", "link", "Website url link", undefined, true),color:"default",icon:"arrow-up-right",size:9})}),(0,G.jsx)(F.xu,{alignItems:"center",display:"flex",height:18,marginStart:2,marginEnd:3,overflow:"hidden",children:(0,G.jsx)(F.xv,{color:"default",size:"200",weight:"bold",lineClamp:1,children:_})})]})})})})}var ve=t(780280);const fe=(0,n.lazy)((()=>Promise.all([t.e(97270),t.e(5954),t.e(48035)]).then(t.bind(t,329155)))),xe=(0,n.lazy)((()=>Promise.resolve().then(t.bind(t,955362)))),ye=(0,n.lazy)((()=>t.e(5035).then(t.bind(t,351326))));const be=(0,n.memo)((function({actionBarEditBeforeShare:e,feedbackData:i,feedbackType:t,layout:o,onToggleFlyout:a,pin:s,pinTitle:l,setForcePrimary:c,showEditButton:d,showOverflowMenu:u,showShareButton:_,showSourceLinkButton:p,sourceLinkStyle:h,surface:m}){var g,v;const f=(0,B.ZP)(),x=(0,F.JZ)(),{isRTL:y}=(0,ve.B)(),{viewParameter:b,viewType:P}=(0,q.E)(),{carousel_data:w,id:S,savedInfo:I,tracked_link:T,link:A,ad_destination_url:C}=s,j=null!==(g=null!==(v=null!=C?C:T)&&void 0!==v?v:A)&&void 0!==g?g:"",{isLeadPin:k}=(0,r.Z)(s),[R,O]=(0,n.useState)(d),[z,D]=(0,n.useState)(d),[L,Z]=(0,n.useState)(d),M={...y?{marginLeft:d&&u?-44:0}:{marginRight:d&&u?-44:0},transition:y?"margin-left .2s ease-in-out":"margin-right .2s ease-in-out"},V={opacity:L?1:0,transition:"opacity .2s ease-in-out",pointerEvents:"auto"},H={...y?{marginRight:z?4:0}:{marginLeft:z?4:0},transition:y?"margin-right .2s ease-in-out":"margin-left .2s ease-in-out"};(0,n.useEffect)((()=>{let e;return d&&u?(D(!0),e=setTimeout((()=>{requestAnimationFrame((()=>{O(!0),requestAnimationFrame((()=>{Z(!0)}))}))}),800)):(D(d),O(d),requestAnimationFrame((()=>{Z(d)}))),()=>{clearTimeout(e)}}),[d,u]);let U=null;p&&(U=(0,G.jsx)(se.Z,{children:k?(0,G.jsx)(F.zx,{role:"button",accessibilityLabel:f.bt("Link for close-up view and sign up", "Link for closeup view and sign up", "[m10n] pinRep.actionBar.signup", undefined, true),size:"sm",text:f.bt("Sign up", "Sign up", "[m10n] pinRep.actionBar.signup", undefined, true)}):(0,G.jsx)(ge,{pin:s,sourceLinkStyle:h,surface:m,url:j})}));const W=_&&(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRep_SendShareLink",children:(0,G.jsx)(N.Z,{children:(0,G.jsx)(F.xu,{"data-test-id":"send-share-link",children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(ye,{pin:s,setForcePrimary:c})})})})}),$=Boolean(null==I?void 0:I.localPinId)?null==I?void 0:I.localPinId:S,Y=R&&(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRep_EditButton",children:(0,G.jsx)(N.Z,{children:(0,G.jsx)(F.xu,{"data-test-id":"edit-button",dangerouslySetInlineStyle:x?void 0:{__style:V},children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(fe,{carouselSlotCurrentIndex:w&&w.index,component:0,onToggleModal:a,pinId:$,style:{size:"sm"},view:P,viewParameter:b,useLegoStyles:!0})})})})});return"equally-spaced"===o?(0,G.jsxs)(F.xu,{display:"flex",justifyContent:"between",alignItems:"center",padding:3,children:[(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:{flexBasis:32}},children:U}),e?Y:W,e?W:Y]}):(0,G.jsxs)(F.xu,{alignItems:"center",display:"flex",padding:3,children:[(0,G.jsx)(F.xu,{flex:"shrink",children:U}),(0,G.jsx)(F.xu,{alignItems:"center",display:"flex",flex:"none",marginStart:"auto",dangerouslySetInlineStyle:x?void 0:{__style:M},children:(0,G.jsxs)(F.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"end",children:[e?Y:W,e?W:Y,u&&(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRep_OverflowMenu",children:(0,G.jsx)(N.Z,{children:(0,G.jsx)(F.xu,{"data-test-id":"overflow-menu-button",dangerouslySetInlineStyle:x?void 0:{__style:H},children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(xe,{feedbackData:i,feedbackType:t,pin:s,pinTitle:l,setForcePrimary:c})})})})})]})})]})}));var Pe=t(834911),we=t(811403);function Se({direction:e,swipeHandler:i}){const t=(0,B.ZP)(),n={left:t.bt("View previous", "View Previous", "Button to advance carousel to the previous image", undefined, true),right:t.bt("View next", "View Next", "Button to advance carousel to the next image", undefined, true)};return(0,G.jsx)(F.xu,{position:"absolute",bottom:!0,top:!0,left:"left"===e,right:"right"===e,children:(0,G.jsx)(F.iP,{fullHeight:!0,fullWidth:!0,onTap:i,children:(0,G.jsx)(F.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",padding:2,width:"100%","data-test-id":`carousel-slider-${e}`,children:(0,G.jsx)(F.JO,{accessibilityLabel:n[e],color:"inverse",icon:{left:"arrow-back",right:"arrow-forward"}[e]})})})})}const Ie=(0,o.connect)(null,(function(e){return{changeCarouselSlotIndex:(i,t)=>e((0,we.yR)(i,t))}}))((({pin:e,changeCarouselSlotIndex:i})=>{const{logContextEvent:t}=(0,V.v)(),{componentType:n,viewParameter:o,viewType:a}=(0,q.E)(),r=(0,Pe.Z)({carouselData:e.carousel_data,images:e.images,richMetadata:e.rich_metadata,richSummary:e.rich_summary});if(!r)return null;const{id:s=""}=e,{carousel_slots:l=[],index:c=0,id:d}=r;function _(r){return()=>{const _="left"===r?c-1:c+1;i(s,_),((i=0,r)=>{t({event_type:108,object_id_str:s,component:n,view_type:a,view_parameter:o,event_data:{pinCarouselSlotEventData:{carouselSlotId:l[i]&&Number(l[i].id),carouselDataId:Number(d),carouselSlotIndex:i,toCarouselSlotIndex:r}},aux_data:{...(0,u.Kl)(e)||{}}})})(c,_)}}return(0,G.jsxs)(F.xu,{height:"100%",position:"relative",width:"100%",children:[c>0&&(0,G.jsx)(se.Z,{children:(0,G.jsx)(Se,{direction:"left",swipeHandler:_("left")})}),c<l.length-1&&(0,G.jsx)(se.Z,{children:(0,G.jsx)(Se,{direction:"right",swipeHandler:_("right")})})]})}));var Te=t(969956),Ee=t(116303);function Ae({accessibilityLabel:e,attributionNameLink:i,avatarUrl:t,fullWidth:n=!0,name:o="",onClick:a,outline:r=!1,size:s=32,shouldRenderAdsOnlyProfileClick:l=!1}){const c=(0,G.jsx)(F.xu,{"data-test-id":"attribution-avatar",height:s,width:s,children:(0,G.jsx)(Ee.Z,{name:o,src:t,accessibilityLabel:"",outline:r})});return i?(0,G.jsx)(F.iP,{fullWidth:n,role:"link",href:i,rel:l?"nofollow":void 0,target:l?"blank":void 0,onTap:a,accessibilityLabel:e,children:c}):c}function Ce({isHover:e,attributionNameLink:i,name:t,onClick:n,regularWeight:o}){const{checkExperiment:a}=(0,Q.F)(),r=!i&&a("web_disable_ads_blocker").anyEnabled;return(0,G.jsx)(F.xu,{children:(0,G.jsx)(F.xv,{underline:e,size:"200",lineClamp:1,weight:o?"normal":"bold",children:i?(0,G.jsx)(F.rU,{onClick:n,href:i,children:t}):r?(0,G.jsx)("span",{children:t}):t})})}function je({isHover:e,link:i,onClick:t,title:n,weight:o}){return n?(0,G.jsx)(F.xv,{inline:!0,underline:e,size:"200",weight:o,children:i?(0,G.jsx)(F.rU,{onClick:t,href:i,children:n}):n}):null}var ke=t(993786),Re=t(480622);function Oe({attributionNameLink:e,attributionTitle:i,avatarUrl:t,display:o="default",isPromotedByPinCreator:a,pin:s,name:l,url:c,verifiedIdentity:d,isVerifiedMerchant:u,shouldRenderAdsOnlyProfileClick:_}){const p=(0,Re.f)(),[h,m]=(0,n.useState)(!1),{id:g,sponsorship:v,story_pin_data_id:f}=s,{isPromoted:x}=(0,r.Z)(s),{creator:y}=v||{},{id:b}=y||{},P=!!f,w=(0,pe.Z)(101,{view_type:3,element:x?283:27,object_id_str:g,component:P?230:void 0,aux_data:{...b?{creator_id:b,pin_id:g}:{}}}),S=()=>{p.setMostRecentPinId(g),w()},I=()=>{m((e=>!e))},T=c&&!e,E=T?"":l,A="overlay"===o,C=(0,G.jsxs)(F.xu,{alignItems:"center",display:A?void 0:"flex",dangerouslySetInlineStyle:{__style:{marginLeft:"-3px",marginRight:"-3px"}},children:[(0,G.jsx)(F.xu,{flex:"none",dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},display:A?"flex":void 0,justifyContent:"center",children:(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:A?{__style:{marginTop:-45}}:void 0,children:(0,G.jsx)(Ae,{attributionNameLink:E?e:void 0,avatarUrl:t,name:E,onClick:()=>S(),accessibilityLabel:E,size:A?64:32,outline:A})})}),(0,G.jsxs)(F.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},flex:"grow",overflow:"hidden",display:A?"flex":void 0,justifyContent:"center",marginTop:A?2:void 0,children:[(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:"2px"}},children:(0,G.jsxs)(F.kC,{gap:{row:1,column:0},children:[(0,G.jsx)(Ce,{attributionNameLink:e,name:l,onClick:()=>S(),regularWeight:!(x&&!v||a),isHover:h}),(0,G.jsx)(ke.Z,{size:"sm",hasVerifiedIdentity:d,isVerifiedMerchant:u})]})}),(0,G.jsx)(je,{isHover:h,title:i,weight:"normal"})]})]});return T?(0,G.jsx)(F.iP,{role:"link",onTap:({event:e})=>{e.stopPropagation(),S()},href:c,rel:_?"nofollow":void 0,target:_?"blank":void 0,onMouseEnter:I,onMouseLeave:I,children:C}):C}var ze=t(504981),De=t(333312),Ne=t(69e4),Be=t(552684),Le=t(907811),Ze=t(778821),Me=t(875495),Fe=t(782050);function Ve({board:e,favoriteCount:i,favorited:t,pinId:a}){const{logContextEvent:r}=(0,V.v)(),s=(0,o.useDispatch)(),{slotIndex:l}=(0,q.E)(),{currentFilter:c,eligibleFilters:d,refreshData:u=(()=>{}),sectionId:_,setShowExperienceTooltip:p}=(0,Fe.s)(),h=(0,n.useRef)(null),m=(0,M.Z)(),g=(0,T.Z)(m,e),v=c===Le.Ac&&(!i||1===i),f=(0,Be.E)(d,Le.Ac),x=e=>{r({event_type:101,component:0,element:e?12225:12226,object_id_str:a,view_type:5,view_parameter:g?3069:3070})};return(0,G.jsxs)(n.Fragment,{children:[(0,G.jsx)(F.xu,{ref:h,children:(0,G.jsx)(Ne.Z,{favorited:t,favoriteCount:i,onFavorite:()=>{x(!0),f&&u(),p&&p(!0)},onUnfavorite:()=>{x(!1),e&&v&&s((0,Me.EX)({feedId:_||e.id,feedType:_?Ze.DV.BOARD_SECTION_PINS:Ze.DV.BOARDFEED,itemIds:[a],itemType:"pin"}))},pinId:a,size:20})}),h&&!t&&!_&&0===l&&(0,G.jsx)(F.mh,{children:(0,G.jsx)(De.default,{anchor:h.current,experienceIds:[502973],flyoutSize:312,idealDirection:"up",placementId:18,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center"})})]})}var Ge=t(850115),He=t.n(Ge),Ue=t(379507),We=t.n(Ue),$e=t(637956),Ye=t.n($e),Xe=t(694379),Ke=t(909745),qe=t.n(Ke),Je=t(128206),Qe=t.n(Je);const ei={goodIdea:He(),love:Ye(),thanks:qe(),wow:Qe(),haha:We()},ii={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},ti=["CreatorProfileStoryPinGrid"];const ni=function({alignment:e="start",pinId:i,pinner:t,reactionCounts:n,surface:o}){const a=(0,M.Z)(),r=n?(0,X.At)(n):null,s=n?(0,X.Ud)(n):0,l=Boolean(a.isAuth&&(null==t?void 0:t.id)===a.id),c=!!r&&r.length>0&&r.map(((e,i)=>{const t=ei[ii[e]];return(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:{marginRight:2}},children:(0,G.jsx)(F.xu,{width:17,height:17,dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${t})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})},i)})),d=!!c&&(0,G.jsx)(F.iP,{role:"link",href:`/pin/${i}/`,children:(0,G.jsxs)(F.xu,{display:"flex",direction:"row",alignItems:"center",justifyContent:e,height:19,paddingY:3,children:[(0,G.jsx)(F.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:c}),(0,G.jsx)(F.xu,{paddingX:1,children:(0,G.jsx)(F.xv,{size:"200",children:(0,G.jsx)(Xe.Z,{value:s,shortform:!0,shortformMaximumFractionDigits:1})})})]})}),u=l&&ti.includes(o)&&(0,G.jsx)(F.xu,{height:24});return d||u};var oi=t(605707),ai=t(862628);function ri({feedbackType:e,pin:i}){const t=(0,B.ZP)(),{pinner:n,source_interest:o}=i,{full_name:a,username:r}=n||{},{name:s}=o||{},l="topic"===e,c=!l&&"followed"===e,d=`/${r}/`,u=(0,ai.Z)(s),_=`/search/pins/?q=${encodeURIComponent(u)}&rs=image_only_attribution`,p=l?_:d,h={topic:t.bt("From {topic}", "From {topic}", "attribution on pin rep", undefined, true),followed:t.bt("From {pinnerName}", "From {pinnerName}", "attribution on pin rep", undefined, true),pfyBoard:t.bt("Picked for you", "Picked for you", "attribution on pin rep", undefined, true),pfy:t.bt("Picked for you", "Picked for you", "attribution on pin rep", undefined, true)}[e];if(!h)return null;if(c||l){const e=0===h.indexOf("{"),i=l?s:a,t=e?h.slice(h.indexOf("}")+1):h.slice(0,h.indexOf("{"));return e?(0,G.jsxs)(F.xu,{children:[(0,G.jsx)(F.rU,{inline:!0,href:p,underline:"hover",children:(0,G.jsx)(F.xv,{weight:"bold",inline:!0,size:"200",lineClamp:1,children:i})}),(0,G.jsx)(F.xv,{inline:!0,size:"200",children:t})]}):(0,G.jsxs)(F.xu,{children:[(0,G.jsx)(F.xv,{inline:!0,size:"200",children:t}),(0,G.jsx)(F.rU,{inline:!0,href:p,underline:"hover",children:(0,G.jsx)(F.xv,{color:"default",weight:"bold",inline:!0,size:"200",lineClamp:1,children:i})})]})}return(0,G.jsx)(F.xu,{children:(0,G.jsx)(oi.Z,{pin:i,children:(0,G.jsx)(F.xv,{color:"default",overflow:"normal",size:"200",weight:"bold",children:h})})})}var si=t(955362),li=t(397066),ci=t(48714);function di(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class ui extends n.Component{constructor(...e){super(...e),di(this,"state",{spamCheck:null}),di(this,"mounted",!1),di(this,"handleSpammyDomainCheck",(()=>{const{location:e,pin:i,surface:t,url:n}=this.props;n&&i&&(0,ci.$3)({location:e,pin:i,surface:t})&&(0,ci.iw)({isMounted:this.mounted,pin:i,location:e,spamCheckCallback:e=>this.setState({spamCheck:e}),href:n})})),di(this,"handleClick",(e=>{const{auxData:i,location:t,onClick:n,pin:o,pinId:a,url:r,logContextEvent:s}=this.props;(0,ci.gV)({isOffsiteUrl:!0,event:e})||(e.preventDefault(),n&&n(e),r&&(0,li.h)({href:r,pinId:a,pin:o,location:t,auxData:i},s))}))}componentDidMount(){this.mounted=!0,this.handleSpammyDomainCheck()}componentWillUnmount(){this.mounted=!1}componentDidUpdate(){const{spamCheck:e}=this.state;null===e&&this.handleSpammyDomainCheck()}render(){const{children:e,pin:i,url:t}=this.props;return(0,G.jsx)("a",{"aria-label":(null==i?void 0:i.domain)||"",href:t,onClick:this.handleClick,rel:"nofollow",style:{color:"inherit",textDecoration:"none",outline:"none",cursor:"pointer",display:"block"},target:null,children:e})}}function _i(e){var i;const{logContextEvent:t}=(0,V.v)(),n=(0,te.S6)()(null!==(i=e.pinId)&&void 0!==i?i:"");return(0,G.jsx)(ui,{...e,history:(0,he.useHistory)(),location:(0,he.useLocation)(),logContextEvent:t,match:(0,he.useRouteMatch)(),pin:n})}function pi(e){if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";const{downloadedAssets:i,totalAssets:t}=window.prefetchCompletion[e];return t?(i/t*100).toFixed(3).toString():"-1"}var hi=t(941646),mi=t(385740);function gi({children:e,componentType:i,contextLogData:t,pin:n,surface:o,viewParameter:a,viewType:r}){const{logContextEvent:s}=(0,V.v)(),l=(0,q.E)(),{ad_destination_url:c,carousel_data:d,id:u,link:_,tracked_link:p}=n;let h,m=c||p||_||"",g="one-tap-desktop";const v=(0,mi.SU)();if(d){const{carousel_slots:e=[],id:i,index:t=0}=d;e[t]&&e[t].link&&(m=e[t].link),h={carousel_slot_id:e[t]&&e[t].id,carousel_data_id:i,carousel_slot_index:t},g+="-carousel"}return(0,G.jsx)(F.xu,{"data-test-id":"otpp",children:(0,G.jsx)(hi.Z,{id:g,children:(0,G.jsx)(_i,{auxData:h,onClick:()=>{s({event_type:12,view_type:r||l.viewType,view_parameter:a||l.viewParameter,component:i||l.componentType,object_id_str:u,aux_data:{...t,grid_index:l.slotIndex,pin_id:u,prefetch_percentage_complete:pi(_||"")}}),s({event_type:8948,view_type:r||l.viewType,view_parameter:a||l.viewParameter,component:i||l.componentType,object_id_str:u,aux_data:{...t,click_type:"clickthrough",closeup_navigation_type:"click",grid_index:l.slotIndex,pin_id:u,prefetch_percentage_complete:pi(_||"")}}),s({event_type:13,object_id_str:u,component:i||l.componentType,view_type:3,aux_data:{closeup_navigation_type:"web_closeup",...l.contextLogData,...t}}),s({event_type:13,view_type:v.viewType,view_parameter:v.viewParameter,view_data:v.viewData})},pinId:u,surface:o,url:m,children:e})})})}function vi(e){const{pin:i,surface:t}=e,{isOneTap:n,isVideo:o,isPromoted:a,isLeadPin:s}=(0,r.Z)(i),{checkExperiment:l}=(0,Q.F)(),c=!s&&(n||o&&a&&l("web_no_tap_tap").anyEnabled)?gi:oi.Z;return(0,G.jsx)(c,{surface:n?t:void 0,...A(e,["surface"])})}function fi({pin:e,pinNoteText:i}){return(0,G.jsx)(vi,{pin:e,children:(0,G.jsx)(F.xv,{lineClamp:1,overflow:"normal",size:"200",children:i})})}var xi=t(81226);function yi({value:e,valueFormat:i}){const t=(0,B.ZP)();return e||0===e?"TIME"===i?(0,xi.Z)(e):(0,G.jsx)(Xe.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:e}):(0,G.jsx)(F.u,{idealDirection:"up",text:t.bt("This stat is not available yet", "This stat is not available yet", "closeup.partnerAnalytics.unavailableStat", undefined, true),children:""})}function bi({pin:e}){var i;const t=(0,B.ZP)(),n=(0,M.Z)(),{isStoryPin:o,isVideo:a}=(0,r.Z)(e),s=n.isAuth&&(null===(i=e.pinner)||void 0===i?void 0:i.id)===n.id&&!e.is_repin,l=n.isAuth&&n.isPartner,c=(0,ee.iL)({isOwnPin:s,isPartner:l}),d=(0,ee.H1)({isOwnPin:s,isPartner:l}),u=e.created_at?new Date(e.created_at):null,_=(c||d)&&u&&u.getTime()<=ee.HW.getTime(),p=c?function(e){const{public_creator_analytics:i}=e,{isStoryPin:t}=(0,r.Z)(e);return t&&i?i:null}(e):function(e){const{aggregated_pin_data:i,creator_analytics:t}=e,{creator_analytics:n}=i||{},{isStoryPin:o}=(0,r.Z)(e);return!t||!o&&n?n:t}(e),h=function({isVideo:e,isStoryPin:i,i18n:t,showPublicPinStats:n,showPrivateFullScreenPinStats:o}){return e?[{align:"start",displayText:t.bt("Video views", "Video views", "pinRep.pinStats.videoViews", undefined, true),field:"video_views",iconType:"play"},{align:"center",displayText:t.bt("Avg. time", "Avg. time", "pinRep.pinStats.videoAverageTime", undefined, true),field:"video_average_time",iconType:"clock",valueFormat:"TIME"},{align:"end",displayText:t.bt("Saves", "Saves", "pinRep.pinStats.save", undefined, true),field:"save",iconType:"angled-pin"}]:i?n?[{align:"start",displayText:t.bt("Full screen plays", "Full screen plays", "pinRep.pinStats.fullScreenPlays", undefined, true),field:"full_screen_play",iconType:"play"}]:o?[{align:"start",displayText:t.bt("Full screen plays", "Full screen plays", "pinRep.pinStats.fullScreenPlays", undefined, true),field:"full_screen_play",iconType:"play"},{align:"center",displayText:t.bt("Impressions", "Impressions", "pinRep.pinStats.impression", undefined, true),field:"impression",iconType:"eye"},{align:"end",displayText:t.bt("Saves", "Saves", "pinRep.pinStats.save", undefined, true),field:"save",iconType:"angled-pin"}]:[{align:"start",displayText:t.bt("Impressions", "Impressions", "pinRep.pinStats.impression", undefined, true),field:"impression",iconType:"eye"},{align:"center",displayText:t.bt("Close-ups", "Closeups", "pinRep.pinStats.closeups", undefined, true),field:"closeup",iconSize:10,iconType:"hand-pointing"},{align:"end",displayText:t.bt("Saves", "Saves", "pinRep.pinStats.save", undefined, true),field:"save",iconType:"angled-pin"}]:[{align:"start",displayText:t.bt("Impressions", "Impressions", "pinRep.pinStats.impression", undefined, true),field:"impression",iconType:"eye"},{align:"center",displayText:t.bt("Saves", "Saves", "pinRep.pinStats.save", undefined, true),field:"save",iconType:"angled-pin"},{align:"end",displayText:t.bt("Link clicks", "Link clicks", "pinRep.pinStats.clickthrough", undefined, true),field:"clickthrough",iconSize:10,iconType:"arrow-up-right"}]}({isVideo:a,isStoryPin:o,i18n:t,showPublicPinStats:c,showPrivateFullScreenPinStats:d}),m=a||o?null==p?void 0:p.all_time_realtime:null==p?void 0:p["30d_realtime"];return(0,G.jsx)(F.kC,{alignItems:"stretch",justifyContent:"start",children:h.map((({align:e,displayText:i,field:t,iconType:n,iconSize:o=12,valueFormat:a})=>(0,G.jsxs)(F.xu,{alignItems:"center",column:4,display:"flex",justifyContent:e,children:[(0,G.jsx)(F.xu,{display:"inlineBlock",marginEnd:1,children:(0,G.jsx)(F.JO,{accessibilityLabel:i,color:"default",icon:n,size:o})}),(0,G.jsx)(F.xv,{inline:!0,size:"200",children:(0,G.jsx)(yi,{value:"full_screen_play"===t&&_?null:null==m?void 0:m[t],valueFormat:a})})]},t)))})}function Pi({currentPrice:e,disableLink:i,originalPrice:t,pin:n,surface:o}){const a=t&&t!==e,r=(0,G.jsxs)(F.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[e&&(0,G.jsx)(F.xv,{color:"default",size:"200",weight:"bold",children:e}),a&&(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:{textDecoration:"line-through",textDecorationColor:"#767676"}},marginStart:1,children:(0,G.jsx)(F.xv,{color:"subtle",size:"200",weight:"bold",children:t})})]});return i?r:(0,G.jsx)(vi,{pin:n,surface:o,children:r})}function wi({disableLink:e,pin:i,surface:t}){const n=(0,G.jsx)(F.kC,{alignItems:"stretch",justifyContent:"start",children:(0,G.jsx)(F.xv,{color:"default",lineClamp:1,overflow:"normal",size:"200",weight:"normal",children:_(i,t)})});return e?n:(0,G.jsx)(vi,{pin:i,surface:t,children:n})}var Si=t(655747);function Ii({disableLink:e,numberOfLines:i=2,pin:t,pinTitle:n,surface:o}){const a=e?n:(0,G.jsx)(vi,{pin:t,surface:o,children:n});return(0,G.jsx)(F.xv,{color:"default",lineClamp:i,size:"200",weight:"bold",children:a})}var Ti=t(423217);const Ei={container:{padding:"8px 6px 16px"},productContainer:{padding:"12px 6px 16px"},imageOnlyAttribution:{hidden:{opacity:0,transition:`opacity ${Ti.X}ms ease`},visible:{opacity:1}}};function Ai({attributionType:e,board:i,feedbackData:t,feedbackType:a,hasTextContent:s,hasTitleOrSource:l,hoverTransitionState:c,pin:d,pinNoteText:u,pinTitle:_,productCurrentPrice:p,productOriginalPrice:m,setForcePrimary:g,showCarouselEllipsis:v,showFavoriteButton:f,showGroupBoardAvatar:x,showNativeReactions:y,showOverflowMenu:b,showPinStats:P,showSource:w,showTextContent:S,showAttribution:I,surface:T,titleLines:E}){var A,C,j,k;const R=(0,B.ZP)(),O=(0,M.Z)(),z=(0,o.useDispatch)(),{favorited_by_me:D,favorite_user_count:N,id:L,pinner:Z,reaction_counts:V,sponsorship:H,story_pin_data:U}=d,{has_affiliate_products:W}=U||{},{checkExperiment:$}=(0,Q.F)(),Y=function(e,i,t,n){var o,a,s,l,c;const{board:d,link_domain:u={},promoter:_,sponsorship:p,native_creator:h}=e,{sponsor:m}=p||{},{isPromoted:g}=(0,r.Z)(e),{official_user:v}=u||{},f=g&&!!p&&(null==h?void 0:h.id)!==(null==_?void 0:_.id),x=e.pinner||{};let y="",b="",P="",w="",S="",I="",T=!1,E=!1,A=!1;function C(e,i){return n&&!!e&&!!i}var j,k,R,O,z,D,N,B;if(f)y=null!==(j=null!==(k=null==h?void 0:h.image_medium_url)&&void 0!==k?k:null==h?void 0:h.image_small_url)&&void 0!==j?j:"",b=C(null==h?void 0:h.is_ads_only_profile,null==h?void 0:h.ads_only_profile_site)?null!==(R=null==h?void 0:h.ads_only_profile_site)&&void 0!==R?R:"":`/${null!==(O=null==h?void 0:h.username)&&void 0!==O?O:""}/`,P=null==_?void 0:_.full_name,w=null==h?void 0:h.full_name,I=C(null==h?void 0:h.is_ads_only_profile,null==h?void 0:h.ads_only_profile_site)?null!==(z=null==h?void 0:h.ads_only_profile_site)&&void 0!==z?z:"":`/${null!==(D=null==h?void 0:h.username)&&void 0!==D?D:""}/`,S=`/${null!==(N=null==_?void 0:_.username)&&void 0!==N?N:""}/`,T=null==h||null===(B=h.verified_identity)||void 0===B?void 0:B.verified,E=null==h?void 0:h.is_verified_merchant,A=C(null==h?void 0:h.is_ads_only_profile,null==h?void 0:h.ads_only_profile_site);else if(g&&_)y=_.image_medium_url||_.image_small_url,P=_.full_name,w=t.bt("Promoted by", "Promoted by", "indicating the username of the person who promoted the pin", undefined, true),I=C(_.is_ads_only_profile,_.ads_only_profile_site)?_.ads_only_profile_site:`/${_.username}/`,A=C(_.is_ads_only_profile,_.ads_only_profile_site);else if(p&&null!=m&&m.username){var L,Z,M,F,V,G,H,U,W;y=null!==(L=null!==(Z=null!==(M=null==h?void 0:h.image_large_url)&&void 0!==M?M:null==h?void 0:h.image_medium_url)&&void 0!==Z?Z:null==h?void 0:h.image_small_url)&&void 0!==L?L:"",b=C(null==h?void 0:h.is_ads_only_profile,null==h?void 0:h.ads_only_profile_site)?null!==(F=null==h?void 0:h.ads_only_profile_site)&&void 0!==F?F:"":`/${null!==(V=null==h?void 0:h.username)&&void 0!==V?V:""}/`,P=m.full_name,w=null==h?void 0:h.full_name,I=C(null==h?void 0:h.is_ads_only_profile,null==h?void 0:h.ads_only_profile_site)?null!==(G=null==h?void 0:h.ads_only_profile_site)&&void 0!==G?G:"":`/${null!==(H=null==h?void 0:h.username)&&void 0!==H?H:""}/`,S=`/${null!==(U=m.username)&&void 0!==U?U:""}/`,T=null==h||null===(W=h.verified_identity)||void 0===W?void 0:W.verified,E=null==h?void 0:h.is_verified_merchant,A=C(null==h?void 0:h.is_ads_only_profile,null==h?void 0:h.ads_only_profile_site)}else if(h){var $,Y,X,K;y=null!==($=null!==(Y=null!==(X=h.image_large_url)&&void 0!==X?X:h.image_medium_url)&&void 0!==Y?Y:h.image_small_url)&&void 0!==$?$:"",w=h.full_name,I=C(h.is_ads_only_profile,h.ads_only_profile_site)?h.ads_only_profile_site:`/${h.username}/`,T=null===(K=h.verified_identity)||void 0===K?void 0:K.verified,E=h.is_verified_merchant,A=C(h.is_ads_only_profile,h.ads_only_profile_site)}else if("show-for-claimed-content"===i){var q,J,Q,ee,ie;null!=v&&v.is_primary_website_verified&&v.username&&(y=null!==(q=null!==(J=null!==(Q=v.image_large_url)&&void 0!==Q?Q:v.image_medium_url)&&void 0!==J?J:v.image_small_url)&&void 0!==q?q:"",w=v.full_name,I=C(v.is_ads_only_profile,v.ads_only_profile_site)?v.ads_only_profile_site:`/${null!==(ee=v.username)&&void 0!==ee?ee:""}/`,T=null===(ie=v.verified_identity)||void 0===ie?void 0:ie.verified,E=v.is_verified_merchant,A=C(v.is_ads_only_profile,v.ads_only_profile_site))}else{var te,ne,oe,ae;y=null!==(te=null!==(ne=null!==(oe=x.image_large_url)&&void 0!==oe?oe:x.image_medium_url)&&void 0!==ne?ne:x.image_small_url)&&void 0!==te?te:"",b=`/${x.username}/`,w=x.full_name,I=d?d.url:"",T=null===(ae=x.verified_identity)||void 0===ae?void 0:ae.verified,E=x.is_verified_merchant}return{avatarUrl:null!==(o=y)&&void 0!==o?o:"",attributionNameLink:null!==(a=b)&&void 0!==a?a:"",attributionTitle:null!==(s=P)&&void 0!==s?s:"",name:null!==(l=w)&&void 0!==l?l:"",sponsorUrl:S,url:null!==(c=I)&&void 0!==c?c:"",verifiedIdentity:!!T,isVerifiedMerchant:!!E,shouldRenderAdsOnlyProfileClick:!!A}}(d,e,R,$("web_ads_only_profiles_link_redirect").anyEnabled),{avatarUrl:X,attributionNameLink:K,attributionTitle:q,name:J,sponsorUrl:ee,url:ie,verifiedIdentity:te,isVerifiedMerchant:ne,shouldRenderAdsOnlyProfileClick:oe}=Y,ae=!!d.promoter&&!d.is_downstream_promotion,re=ae&&(null===(A=d.native_creator)||void 0===A?void 0:A.id)===(null===(C=d.promoter)||void 0===C?void 0:C.id),se=(0,pe.Z)(101,{view_type:3,element:27,object_id_str:L,component:d.story_pin_data_id?230:void 0,aux_data:{pin_id:L,...null!=H&&null!==(j=H.creator)&&void 0!==j&&j.id&&null!==(k=H.sponsor)&&void 0!==k&&k.id?{creator_id:H.creator.id,sponsor_id:H.sponsor.id}:{}}}),le=e=>z(le(e)),{full_name:ce}=(null==H?void 0:H.sponsor)||{},de="ConversationView"===T?{padding:"8px"}:Ei.container;return(0,G.jsxs)(F.xu,{dangerouslySetInlineStyle:{__style:de},children:[v&&(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:l||x||"none"!==e?{marginBottom:"6px"}:{}},display:"flex",justifyContent:"center",children:(0,G.jsx)(ze.default,{pinId:L})}),P&&(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:"6px"}},flex:"grow",width:"100%",children:(0,G.jsx)(bi,{pin:d})}),(0,G.jsx)(F.kC,{alignItems:"stretch",justifyContent:"start",children:(0,G.jsxs)(F.xu,{flex:"grow",children:[(!!H||W&&!ae)&&!re&&(0,G.jsx)(F.xu,{marginBottom:1,children:(0,G.jsx)(F.xu,{flex:"grow",overflow:"hidden",children:(0,G.jsx)(Si.Z,{hasAffiliateProducts:W,href:ee||ie,isPromoted:ae,sponsorName:ce,sponsorshipStatus:null==H?void 0:H.status,onNavigateSponsorClick:()=>{le(L),se()},textWeight:"bold"})})}),(S&&s||f)&&(0,G.jsxs)(F.xu,{marginBottom:1,children:[(m||p)&&(0,G.jsx)(F.xu,{marginBottom:1,children:(0,G.jsx)(Pi,{currentPrice:p,originalPrice:m,pin:d,surface:T})}),f?(0,G.jsxs)(F.kC,{alignItems:"start",children:[(0,G.jsx)(F.kC,{flex:"grow",children:(0,G.jsx)(Ii,{numberOfLines:E,pin:d,pinTitle:_,surface:T})}),(0,G.jsx)(F.xu,{marginStart:3,children:(0,G.jsx)(Ve,{board:i,favorited:!!D,favoriteCount:null!=i&&i.is_collaborative&&(0,h.Z)({board:i,viewer:O})?null!=N?N:0:void 0,pinId:L})})]}):(0,G.jsx)(Ii,{numberOfLines:E,pin:d,pinTitle:_,surface:T}),w&&(0,G.jsx)(F.xu,{marginBottom:2,children:(0,G.jsx)(wi,{pin:d,surface:T})})]}),I&&(0,G.jsxs)(F.kC,{alignItems:"center",justifyContent:"start",children:[(0,G.jsx)(F.xu,{flex:"grow",children:(()=>{const i=(0,G.jsx)(Oe,{attributionNameLink:K,attributionTitle:ae&&!H||re?q:"",avatarUrl:X,isPromotedByPinCreator:!!re,isVerifiedMerchant:ne,shouldRenderAdsOnlyProfileClick:oe,name:J,pin:d,url:ie,verifiedIdentity:te});switch(e){case"none":return null;case"image-only-credit":return(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:Ei.imageOnlyAttribution["active"===c?"visible":"hidden"]},children:(0,G.jsx)(ri,{pin:d,feedbackType:a})});default:return Object.values(Y).some((e=>Boolean(e)))?i:null}})()}),b&&(0,G.jsx)(F.xu,{flex:"none",children:(0,G.jsx)(si.default,{feedbackData:t,feedbackType:a,pin:d,pinTitle:_,setForcePrimary:g,transparentBackground:!0})})]}),y&&!!V&&Object.keys(V).length>0&&(0,G.jsx)(F.xu,{marginTop:"ConversationView"===T?2:void 0,children:(0,G.jsx)(ni,{pinId:L,pinner:Z,reactionCounts:V,surface:T})}),u&&(0,G.jsx)(F.xu,{marginBottom:1,children:(0,G.jsx)(fi,{pin:d,pinNoteText:u})}),x&&!f&&(0,G.jsx)(F.xu,{alignItems:"center",display:"flex",marginTop:1,marginBottom:1,children:(0,G.jsxs)(n.Fragment,{children:[(0,G.jsx)(Ae,{attributionNameLink:K||ie,avatarUrl:X,fullWidth:!1,name:J,accessibilityLabel:J,shouldRenderAdsOnlyProfileClick:oe}),(0,G.jsx)(F.xu,{marginStart:2,flex:"grow",children:(0,G.jsx)(F.xv,{size:"200",children:J})})]})})]})},`${d.id}-sponsor-name-link`)]})}var Ci=t(149230);function ji(){const e=(0,B.ZP)();return(0,G.jsx)(F.xv,{color:"subtle",overflow:"normal",size:"200",weight:"normal",children:e.bt("Sold out", "Sold out", "pinrep.footer.outOfStock", undefined, true)})}var ki=t(104389);function Ri(){const e=(0,B.ZP)();return(0,G.jsx)(F.xv,{color:"subtle",overflow:"normal",size:"200",weight:"normal",children:e.bt("See price on site", "See price on site", "pinrep.footer.staleProduct", undefined, true)})}const Oi=18;function zi({dimension:e,color:i,isSelected:t,img:n,selectVariant:o}){var a,r,s;const l=(0,B.ZP)(),c=(0,G.jsx)(F.iP,{fullHeight:!0,fullWidth:!0,rounding:1,onMouseEnter:({event:t})=>{t.preventDefault(),t.stopPropagation(),o({dimensionName:e,variant:i})},onFocus:()=>{o({dimensionName:e,variant:i})},children:(0,G.jsx)(F.xu,{"data-test-id":`primary-variant-preview-icon-${i}`,height:Oi,width:Oi,rounding:1,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{border:t?"1px solid black":"1px solid #EFEFEF"}},children:(0,G.jsx)(F.xu,{height:14,width:14,position:"absolute",rounding:1,overflow:"hidden",children:(0,G.jsx)(F.xu,{"data-test-id":`${i}-variant-preview-wrapper`,dangerouslySetInlineStyle:{__style:{transform:"scale(10,10)"}},children:(0,G.jsx)(F.zd,{height:14,width:14,rounding:1,children:(0,G.jsx)(F.Ee,{alt:l.bt("Colour variant preview image", "Color variant preview image", "MerchantStorefront.Variant.VariantPreviewIcon.Image", undefined, true),naturalHeight:null!==(a=n.height)&&void 0!==a?a:1,naturalWidth:null!==(r=n.width)&&void 0!==r?r:1,src:null!==(s=n.url)&&void 0!==s?s:"",fit:"contain"})})})})})});return(0,G.jsx)(F.xu,{"data-test-id":`primary-variant-main-${i}`,display:"inlineBlock",height:Oi,rounding:1,width:Oi,children:c})}function Di(){const{logContextEvent:e}=(0,V.v)(),i=(0,oe.Xx)(),t=i&&i.primaryVariants.filter((e=>e.image)).length>0;if((0,n.useEffect)((()=>{e({event_type:120,component:14092})}),[t,e]),!i)return null;const{primaryVariants:o,primaryDimName:a}=i,r=o.slice(0,6).map((e=>{const t=e.value,n=e.value===i.selectedMap[a],o=e.image;return o?(0,G.jsx)(zi,{dimension:a,color:t,isSelected:n,img:o,selectVariant:i.selectVariant},t):null})).filter(Boolean);if(o.length>6){const e=o.length-6;r.push((0,G.jsx)(F.xu,{"data-test-id":"plus-number",display:"flex",height:Oi,rounding:1,width:Oi,justifyContent:"center",children:(0,G.jsxs)(F.iP,{fullHeight:!0,fullWidth:!0,rounding:1,onTap:({event:e})=>{e.stopPropagation()},children:["+",e]})},6))}return(0,G.jsx)(F.kC,{justifyContent:"start",alignItems:"center",gap:3,children:r})}function Ni({contentType:e,hasTextContent:i,pin:t,pinTitle:o,productCurrentPrice:a,productOriginalPrice:r,productRating:s,productShipping:l,showSource:c,showVisitSiteButton:d,surface:_,titleLines:p}){var h;const{logContextEvent:m}=(0,V.v)(),g=(0,B.ZP)(),{checkExperiment:v}=(0,Q.F)(),{anyEnabled:f,group:x}=v("web_shopping_grid_metadata_ratings_shipping",{dangerouslySkipActivation:!0}),y=(null===(h=t.rich_summary)||void 0===h?void 0:h.url)||t.link;"shopping"!==e||x.includes("pwt")||v("web_shopping_grid_metadata_ratings_shipping");let b=null;if((0,oe.Xx)()){const{anyEnabled:e}=v("storefront_variant_pins");e&&(b=(0,G.jsx)(Di,{}))}const P=(0,Ci.Z)({url:y})?"nofollow":"none";return(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:Ei.productContainer},height:"100%",children:(0,G.jsx)(F.kC,{direction:"column",flex:"grow",height:"100%",justifyContent:"between",children:i&&(0,G.jsxs)(n.Fragment,{children:[(0,G.jsx)(vi,{pin:t,surface:_,children:(0,G.jsxs)(F.kC,{direction:"column",gap:1,children:[(r||a)&&(0,G.jsx)(Pi,{currentPrice:a,disableLink:!0,originalPrice:r,pin:t,surface:_}),(0,u.qN)(t)&&(0,G.jsx)(ji,{}),(0,u.SP)(t)&&(0,G.jsx)(Ri,{}),(0,G.jsx)(Ii,{disableLink:!0,numberOfLines:p,pin:t,pinTitle:o,surface:_}),c&&(0,G.jsx)(wi,{disableLink:!0,pin:t,surface:_}),"shopping"===e&&f&&(s||Number.isFinite(null==l?void 0:l.free_shipping_value))&&(0,G.jsx)(ki.Z,{count:null==s?void 0:s.count,countFormat:"number",isGridView:!0,ratingValue:null==s?void 0:s.rating,shippingInfo:l}),b]})}),d&&y?(0,G.jsx)(F.xu,{marginTop:2,children:(0,G.jsx)(F.zx,{role:"link",fullWidth:!0,href:y,rel:P,onClick:()=>{m({event_type:12,view_type:1,view_parameter:3563})},target:"blank",text:g.bt("Visit site", "Visit site", "ShoppingList.Pin.CTA.Button.VisitSite.Text", undefined, true)})}):null]})})})}const Bi=(0,n.memo)((function({attributionType:e,blockClickEvents:i,board:t,contentType:n,feedbackData:o,feedbackType:a,hoverTransitionState:r,pin:s,pinNoteText:l,pinTitle:c,productCurrentPrice:d,productOriginalPrice:u,productRating:_,productShipping:p,setForcePrimary:h,showCarouselEllipsis:m,showFavoriteButton:g,showGroupBoardAvatar:v,showNativeReactions:f,showOverflowMenu:x,showPinStats:y,showSource:b,showTextContent:P,showVisitSiteButton:w,showAttribution:S=!0,surface:I,titleLines:T}){const E=c||b,A="shopping"===n?(0,G.jsx)(Ni,{contentType:n,hasTextContent:!!E,pin:s,pinTitle:c,productCurrentPrice:d,productOriginalPrice:u,productRating:_,productShipping:p,showSource:b,showVisitSiteButton:w,surface:I,titleLines:T}):(0,G.jsx)(Ai,{attributionType:e,board:t,feedbackData:o,feedbackType:a,hasTextContent:!!E,hasTitleOrSource:!!E,hoverTransitionState:r,pin:s,pinNoteText:l,pinTitle:c,productCurrentPrice:d,productOriginalPrice:u,setForcePrimary:h,showCarouselEllipsis:m,showFavoriteButton:g,showGroupBoardAvatar:v,showNativeReactions:f,showOverflowMenu:x,showPinStats:y,showSource:b,showTextContent:P,showAttribution:S,surface:I,titleLines:T});return i?(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:A}):(0,G.jsx)(F.kC,{flex:"grow",children:(0,G.jsx)(se.Z,{fullWidth:!0,children:A})})}));var Li=t(420632),Zi=t(784590),Mi=t(968328);const Fi=(0,n.lazy)((()=>t.e(34979).then(t.bind(t,91540)))),Vi=(0,n.lazy)((()=>Promise.all([t.e(97270),t.e(5954),t.e(40825),t.e(16985),t.e(43473)]).then(t.bind(t,828528)))),Gi=(0,n.lazy)((()=>Promise.all([t.e(97270),t.e(68292),t.e(5954),t.e(67228),t.e(22347)]).then(t.bind(t,566775)))),Hi=(0,n.lazy)((()=>Promise.all([t.e(97270),t.e(22538)]).then(t.bind(t,450564)))),Ui=(0,n.lazy)((()=>t.e(1593).then(t.bind(t,331806))));function Wi({derivedSaveButtonOptions:e,forcePrimaryContent:i,showEnabledSaveBehavior:t,onToggleFlyout:a,onToggleModal:r,pin:s}){const l=(0,oe.Xx)(),c=function(e){return(0,Zi.Z)(e?{name:"PinResource",options:{id:e}}:null)}(null==l?void 0:l.variantUrl),d=c&&c.data?c.data:s,{id:u,savedInfo:_}=d,p=(0,n.useRef)(!!_),h=(0,o.useSelector)((({experiences:e})=>{const i=e[1000294];return 502450===(null==i?void 0:i.experience_id)?i:null})),{saveBehaviorType:m}=(0,Mi.tY)(t);void 0!==m&&["classic","controlled","inline"].includes(e.type)&&(e=m);const{viewParameter:g,viewType:v}=(0,q.E)(),f=(0,pe.Z)(101,{element:0,object_id_str:u});let x=null;const y={onToggleModal:a,view:v,viewParameter:g,useLegoStyles:!0};if(!e.hidePinBetterSaveDropdown&&(h||t&&["classic","controlled"].includes(e.type))&&["classic","controlled","inline"].includes(e.type)){const{renderPinSaveTooltip:n}=e;x=(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepPrimaryContent_QuickSaveButton",children:(0,G.jsx)(N.Z,{children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(Hi,{experience:h||void 0,forcePrimaryContent:i,pin:d,renderPinSaveTooltip:n,showEnabledSaveBehavior:t,viewParameter:g})})})})}else if("classic"===e.type||"controlled"===e.type){const{renderPinSaveTooltip:i}=e;x=(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinSaveButton",children:(0,G.jsx)(N.Z,{children:(0,G.jsx)(F.xu,{"data-test-id":"pin-save-button",maxWidth:"100%",children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(Vi,{onClickCallback:f,onToggleModal:r,oneTapSave:"controlled"===e.type?e:void 0,pin:d,renderPinSaveTooltip:i,renderSavedStatus:()=>!!_&&(0,G.jsx)(se.Z,{children:(0,G.jsx)(Li.Z,{isNewlySaved:!p.current,name:_.title,type:_.type,url:_.url})}),variant:"lego",viewParameter:g})})})})})}else if("inline"===e.type){const i=d,{initialSelection:t,onSave:n,renderPinSaveTooltip:o,hidePinBetterSaveDropdown:s}=e;x=(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinBetterSave",children:(0,G.jsx)(N.Z,{children:(0,G.jsx)(F.xu,{"data-test-id":"better-save",children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(Gi,{initialSelection:t,onSave:n,onToggleFlyout:a,onToggleModal:r,pin:i,renderPinSaveTooltip:o,renderSavedStatus:({savedInfo:e})=>e&&(0,G.jsx)(se.Z,{children:(0,G.jsx)(Li.Z,{isNewlySaved:!p.current,name:e.title,type:e.type,url:e.url,shouldUseLegoStyles:!0})}),variant:"pin",viewParameter:g,hideDropdown:s})})})})})}else"persistentOneClickSave"===e.type?x=(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepPrimaryContent_PersistentOneClickSave",children:(0,G.jsx)(N.Z,{children:(0,G.jsx)(F.xu,{"data-test-id":"persistent-one-click-save",children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(Fi,{...y,saveOptions:e,pin:d})})})})}):"promote"===e.type&&(x=(0,G.jsx)(F.kC,{alignItems:"stretch",justifyContent:"end",children:(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinPromoteButton",children:(0,G.jsx)(N.Z,{children:(0,G.jsx)(F.xu,{"data-test-id":"pin-promote-button",children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(Ui,{pin:d})})})})})}));return(0,G.jsx)(E.Z,{name:"PinRepPrimaryContent",children:(0,G.jsx)(F.xu,{display:"flex",margin:3,children:x&&(0,G.jsx)(F.xu,{marginStart:"auto",flex:"grow",children:x})})})}var $i=t(64446),Yi=t(698447),Xi=t(814115),Ki=t(312955),qi=t(118334);const Ji={__style:{boxShadow:"inset 0 0 0 2px black,  inset 0 0 0 4px white",transition:"all 300ms ease"}};function Qi({isSelected:e}){const i=(0,B.ZP)();return(0,G.jsx)(F.xu,{bottom:!0,left:!0,position:"absolute",right:!0,rounding:4,top:!0,dangerouslySetInlineStyle:e?Ji:{},children:(0,G.jsx)(F.xu,{position:"absolute",bottom:!0,right:!0,padding:3,children:(0,G.jsx)(F.xu,{alignItems:"center",color:e?"dark":"default",display:"flex",height:"24px",justifyContent:"center",rounding:2,width:"24px",dangerouslySetInlineStyle:{__style:{transition:"all 300ms ease"}},children:(0,G.jsx)(F.JO,{accessibilityLabel:i.bt("Pin has been selected to be saved", "Pin is selected to be saved", "SectionSuggestionPin.iconOnPin.selectedPin", undefined, true),color:"inverse",icon:"check",size:12})})})})}var et=t(124364),it=t(802933),tt=t(674915),nt=t(559230),ot=t(428258),at=t(172071);const rt={},st=e=>{at.Z.increment("web_prefetch_via_xhr.attempt",1);const i=(0,de.Z)(e);return new Promise(((t,n)=>{if(window.navigator&&window.navigator.connection){const e=window.navigator.connection;e.saveData&&(at.Z.increment("web_prefetch_via_xhr.saveDataOn",1),t()),/2g/.test(e.effectiveType)&&(at.Z.increment("web_prefetch_via_xhr.poorConnection",1),t())}const o=new XMLHttpRequest;o.open("GET",e),o.onload=()=>{200===o.status?(rt[e]&&(rt[e].loaded=!0),at.Z.increment("web_prefetch_via_xhr.load.success",1,{hostname:i.hostname||"unknown"}),t(o.response)):(at.Z.increment("web_prefetch_via_xhr.load.error",1,{hostname:i.hostname||"unknown"}),n())},rt[e]||(o.send(),rt[e]={added:!0,xhr:o},at.Z.increment("web_prefetch_via_xhr.xhrSent",1,{hostname:i.hostname||"unknown"}))}))},lt={},ct=(e,i)=>{const t="string"==typeof e?e:e.url;if(i&&t){const e="control"===i?"v3.pinimg.com":"v2.pinimg.com";return t.replace("v.pinimg.com",e)}return t};function dt(e,i){return(ct("https://v.pinimg.com/videos/mc/hls/",i)||"")+`${e.slice(0,2)}/${e.slice(2,4)}/${e.slice(4,6)}/${e}`}function ut(e){const{id:i}=e;i&&lt[i]&&lt[i].length>0&&lt[i].forEach((e=>{(e=>{rt[e]&&rt[e].xhr&&!rt[e].loaded&&(at.Z.increment("web_prefetch_abort_xhr",1),rt[e].xhr.abort(),rt[e].aborted=!0)})(e)}))}function _t({autoplaySettingOff:e,blockClickEvents:i,fallbackColor:t,imageFit:o,imageHeightModifier:a,isDenseView:s,isHovering:l,isSocialSeasonalBoard:c=!1,onError:d,onLoad:u,pin:_,pinImageCrop:p,resolution:h="default",rootMargin:m,selectionState:g,showCarousel:v,showPromotedVideos:f,showUnavailablePin:x,surface:y}){const{contextLogData:b,slotIndex:P,viewParameter:w,viewType:S}=(0,q.E)(),{checkExperiment:I}=(0,Q.F)(),{group:T}=I("web_prefetch_video_in_feed"),{id:E="",aggregated_pin_data:A,image_signature:C,story_pin_data:j}=_,{pin_tags_chips:k}=A||{},{isOneTap:R,isVideo:O,isPromoted:z,isGif:D}=(0,r.Z)(_),{cropHeight:N,cropWidth:B}=(e=>"string"==typeof e?{cropHeight:0,cropWidth:0}:{cropHeight:e.height,cropWidth:e.width})(p);let L=null;if(x)L=(0,G.jsx)(et.Z,{isDenseView:s,height:s?250:420,rounding:0,width:s?164:236});else if(e||!O||!f&&z||"BoardCoverSelectablePin"===y)if(v)L=(0,G.jsx)(F.xu,{"data-test-id":"pinrep-carousel",children:(0,G.jsx)(Xi.Z,{cropHeight:N,cropWidth:B,onError:d,onLoad:u,highResOnly:"high-res"===h,lowResOnly:"low-res"===h,pinId:E,showCarouselBadge:!1,pin:_})});else{const e="backend"===p?function({images:e,image_crop:i}){var t;const n=e&&(null===(t=e["236x"])||void 0===t?void 0:t.height);if(i&&(0!==i.min_y||1!==i.max_y)){const{min_y:e=0,max_y:t=0}=i;return{marginTop:(e>0?-1*e*(null!=n?n:0):0)+"px",marginBottom:`${t<1?Math.round(-1*(1-t)*(null!=n?n:0)):0}px`}}return{}}(_):{};L=(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:e},"data-test-id":"pinrep-image",minHeight:55,children:(0,G.jsx)(Ki.Z,{animateGif:D&&c,cropHeight:N,cropWidth:B,fallbackColor:t,imageFit:o,highResOnly:"high-res"===h,lowResOnly:"low-res"===h,mediumResOnly:"medium-res"===h,onLoad:u,onError:d,pin:_})})}else L=(0,G.jsx)(F.xu,{"data-test-id":"pinrep-video",direction:"column",display:"flex",height:N||void 0,justifyContent:"center",children:(0,G.jsx)(qi.Z,{cropHeight:N,cropWidth:B,highResOnly:"high-res"===h,imageHeightModifier:a,inAdsDesktopVideoExperiment:O&&f,isExperimentalPinRep:!0,lowResOnly:"low-res"===h,onError:d,onLoad:u,pin:_,rootMargin:m,surface:y,viewParameter:w,viewType:S})});const Z=(0,G.jsx)(F.zd,{wash:!0,children:(0,G.jsx)(le.Z,{hovered:l,pin:_,slotIndex:P,viewType:1,children:L})}),M=["selected-image-only","deselected-image-only"].includes(g),V="selected-image-only"===g,H=(0,n.useRef)(!0),U=(0,n.useRef)(!1),W=(0,n.useRef)(!1),$=I("web_video_quic").group;if((0,n.useEffect)((()=>{H.current||!l||R||i||U.current?l||!U.current||W.current||(ut(j||_),W.current=!0):j?(!function(e,i){var t;const{id:n,pages:o,pages_preview:a}=e;if(!a&&!o)return;const r=a?a[0]:null==o?void 0:o[0],s=null==r||null===(t=r.blocks)||void 0===t?void 0:t.find((e=>3===e.block_type));if(s&&s.video){const{hlsv3:e,mp4:t}=(0,ot.Z)(s.video)||{},o=t||e;if(o&&n){var l;const e=null!==(l=ct(o,i))&&void 0!==l?l:"";lt[n]=lt[n]?lt[n].concat(e):[e],st(e)}}}(j,$),U.current=!0):(!function(e,i){const{id:t,videos:n}=e,{video_list:o}=n||{},a=(0,it.Z)({pin:e}),{video:r}=(0,tt.Z)(a)||{},{hls:s,hlsv3:l}=r||{};if(o){const e=(0,ot.t)(o)||{},n=l||s||{};if(n.url){var c;const e=null!==(c=ct(n.url,i))&&void 0!==c?c:"";lt[t]=lt[t]?lt[t].concat(e):[e],st(e).then((e=>{let n=[];if("string"==typeof e&&(n=e.split("\n").filter((e=>e.endsWith(".m3u8")))),n&&n[nt.VS]){const e=dt(n[nt.VS],i);return lt[t]=lt[t].concat(e),st(null!=e?e:"")}return null})).then((e=>{let n=[];if("string"==typeof e&&(n=e.split("\n").filter((e=>e.endsWith(".ts")))),n&&n[0]){const e=dt(n[0],i);return lt[t]=lt[t].concat(e),st(null!=e?e:"")}return null}))}else if(e.url){var d;const n=null!==(d=ct(e.url,i))&&void 0!==d?d:"";st(n),lt[t]=lt[t]?lt[t].concat(n):[n]}}}(_,$),U.current=!0),H.current=!1}),[i,l,R,j,_,T,$]),i)return(0,G.jsxs)(n.Fragment,{children:[Z,M&&(0,G.jsx)(Qi,{isSelected:V}),k&&(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:{marginTop:1}},children:(0,G.jsx)(Yi.Z,{pin:_,enableCloseupLink:!0})})]});const{commerce_data:Y,story_type:X,board_id:K,board_pin_count:J}=b||{},ee=["RelatedProductsExploreTab","RelatedProductsFeed"].includes(y);return(0,G.jsxs)(vi,{contextLogData:{commerce_data:ee?Y:void 0,grid_index:P,image_signature:C,story_type:X,board_id:K,board_pin_count:J},elementType:j?12372:35,pin:_,surface:y,children:[Z,k&&(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:{marginTop:1}},children:(0,G.jsx)(Yi.Z,{pin:_,enableCloseupLink:!1})})]})}var pt=t(812446),ht=t(946984);const mt=(0,pt.Z)((({handleSendShareFlyoutButtonClick:e})=>{const i=(0,B.ZP)(),t=(0,ht.Z)();return(0,G.jsx)(F.zx,{fullWidth:!0,onClick:({event:i})=>{i.stopPropagation(),t?t():e()},text:i.bt("Send", "Send", "Send a pin", undefined, true),color:"gray",accessibilityLabel:i.bt("Send", "Send", "Accessible label to send a pin", undefined, true)})}));function gt(e){return e<160?"header-only":"none"}function vt(e){const[i,t]=(0,n.useState)(e.current?gt(e.current.clientHeight||0):"none");return function(e,i){const t=(0,n.useRef)();(0,n.useEffect)((()=>{const n=e.current;if(!n)return;const o=t.current;o&&o.width===n.offsetWidth&&o.height===n.offsetHeight||(t.current={width:n.offsetWidth||0,height:n.offsetHeight||0},i&&i(t.current))})),t.current}(e,(({height:e})=>{const n=gt(e);n!==i&&t(n)})),i}var ft=t(521460),xt=t(704115);const yt={impressed:{backgroundColor:"#adebad"}};function bt({debugImpressionState:e="paused",slotIndex:i}){return"paused"===e?null:(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:yt.impressed},"data-test-id":"debug-pin-impressions",position:"absolute",top:!0,left:!0,right:!0,bottom:!0,opacity:.5,children:(0,G.jsx)(F.xu,{position:"absolute",top:!0,left:!0,padding:2,color:"selected",children:(0,G.jsx)(F.xv,{color:"inverse",children:(0,G.jsx)("span",{className:"deprecatedTextSizeXL",children:i})})})})}var Pt=t(472231),wt=t(31658),St=t(123987),It=t(310227);const Tt="#000000",Et="#ffffff";function At({selected:e=!1}){const i=(0,B.ZP)(),{isRTL:t}=(0,ve.B)();return(0,G.jsx)(F.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,zIndex:new F.Ry(1),"data-test-id":"pinRepSelectionBorder",dangerouslySetInlineStyle:{__style:{borderWidth:"3px",borderStyle:"solid",borderColor:e?Tt:Et,borderRadius:It.Oc,boxShadow:e?"inset 0 0 0 3px #fff":void 0}},children:e?(0,G.jsx)(F.xu,{position:"absolute",bottom:!0,right:!t,left:t,display:"flex",alignItems:"center",justifyContent:"center",margin:3,rounding:2,height:24,width:24,color:"dark",children:(0,G.jsx)(F.JO,{accessibilityLabel:i.bt("Tick icon", "Check icon", "pinRepSelectionBorder.checkIcon", undefined, true),icon:"check",color:"inverse",size:12})}):(0,G.jsx)(F.xu,{right:!t,left:t,position:"absolute",top:!0,margin:3,children:(0,G.jsx)(F.JO,{accessibilityLabel:i.bt("Handle icon", "Handle icon", "pinRepSelectionBorder.handleIcon", undefined, true),icon:"handle",color:"light",size:24})})})}const Ct={wrapper:{borderRadius:It.Oc,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},promotedPinBorderTreatment:{background:"#EFEFEF",padding:4,borderRadius:20},primaryContentContainer:{marginBottom:"auto"},visualOverlay:{backgroundColor:It.Dv.VISUAL},savedOverlay:{backgroundColor:It.Dv.SAVED},legoWashOverlay:{backgroundColor:It.Dv.LEGO_WASH}};function jt({children:e,savedOverlayVisibility:i="none",visualOverlayVisibility:t="none",handleMouseOverPinContent:n,handleMouseLeavePinContent:o,primaryContent:a,primaryContentVisibility:r="none",secondaryContent:s,secondaryContentVisibility:l="none",accessoryContent:c,accessoryContentVisibility:d="none",actionBar:u,actionBarVisibility:_="none",seeStatsButton:p,footer:h,selectionState:m="no-selection",debugContent:g,signalDebuggerContent:v,signalDebuggerV2Content:f,signalDebuggerV2ContentVisibility:x="none",obscuredPinOverlay:y,showNoPinBorderRadius:b,showPromotedPinBorderTreatment:P,shouldUseLegoWash:w}){return(0,G.jsx)(F.xu,{dangerouslySetInlineStyle:{__style:P?Ct.promotedPinBorderTreatment:{}},height:"100%","data-test-id":"pinRepPresentation",children:(0,G.jsxs)(F.xu,{dangerouslySetInlineStyle:{__style:b?{}:Ct.wrapper},"data-test-id":"pinWrapper",display:"flex",direction:"column",height:"100%",overflow:"hidden",position:"relative",children:[["selected","deselected"].includes(m)&&(0,G.jsx)(At,{selected:"selected"===m}),(0,G.jsxs)(F.xu,{"aria-hidden":Boolean(y),children:[(0,G.jsxs)(F.xu,{dangerouslySetInlineStyle:{__style:b?{}:Ct.wrapper},overflow:"hidden",position:"relative",onFocus:n,onBlur:o,onMouseEnter:n,onMouseLeave:o,children:[e,(0,G.jsx)(St.Z,{visibility:t,children:(0,G.jsx)(wt.Z,{additionalStyles:w?Ct.legoWashOverlay:Ct.visualOverlay})}),(0,G.jsx)(St.Z,{visibility:i,children:(0,G.jsx)(wt.Z,{additionalStyles:w?Ct.legoWashOverlay:Ct.savedOverlay})}),c&&(0,G.jsx)(St.Z,{visibility:d,children:(0,G.jsx)(wt.Z,{children:c})}),s&&(0,G.jsx)(St.Z,{visibility:l,children:(0,G.jsx)(wt.Z,{children:s})}),a&&(0,G.jsx)(St.Z,{visibility:r,children:(0,G.jsx)(wt.Z,{children:a})}),f&&(0,G.jsx)(St.Z,{visibility:x,children:(0,G.jsx)(wt.Z,{children:(0,G.jsx)(F.xu,{position:"absolute",left:!0,bottom:!0,marginBottom:12,marginStart:2,children:f})})}),u&&(0,G.jsx)(St.Z,{visibility:_,children:(0,G.jsx)(wt.Z,{children:(0,G.jsx)(F.xu,{position:"absolute",left:!0,right:!0,bottom:!0,children:u})})}),p&&(0,G.jsx)(wt.Z,{children:(0,G.jsx)(F.xu,{position:"absolute",bottom:!0,children:p})}),g&&(0,G.jsx)(wt.Z,{children:g}),v]}),h]}),y&&(0,G.jsx)(F.xu,{children:y})]})})}function kt(e){return"active"===e?"visible":"inactive"===e?"none":"hidden"}function Rt(...e){return e.includes("visible")?"visible":e.includes("hidden")?"hidden":"none"}const Ot=(0,n.memo)((function({actionBarProps:e,blockClickEvents:i,borderStyle:t,currentlyPlayingVideo:o,disableHover:a=!1,footerProps:r,impressionsDebuggerProps:l,obscuredPinOverlayProps:c,onError:d,onLoad:u,pin:_,pinVisualProps:p,presentationProps:h,primaryContentProps:m,rounding:g,secondaryContentProps:v,authDesktopSelectionState:f,showFooter:x,showImpressionsDebugger:y,showObscuredPinOverlay:b,showSeeStatsButton:P,showSignalDebugger:w,showUnavailablePin:S,surface:I,visibilityOverrides:T,imageHeightModifier:A}){var C,j;const{savedInfo:k}=_,{viewType:R}=(0,q.E)(),{showEnabledSaveBehavior:O}=(0,Mi.Yh)(s.ZF.includes(I)||(0,z.Z)(I)),[D,N]=(0,n.useState)(!1),B=(0,Ti.Z)(D);let{isHovering:L,hoverTransitionState:Z,handleMouseOver:M,handleMouseLeave:V}=function(){const[e,i]=(0,n.useState)(!1);return{isHovering:e,hoverTransitionState:(0,Ti.Z)(e,0,Ti.X),handleMouseOver:(0,n.useCallback)((()=>i(!0)),[i]),handleMouseLeave:(0,n.useCallback)((()=>i(!1)),[i])}}();a&&(L=!1,Z="inactive");const H=(0,Ti.Z)(!!k),U=kt(H),W=kt(Z),$=kt(Z),X=kt(B),K=kt(H),J=["HomefeedMoreIdeasTabs","BoardMoreIdeasTabContent"].includes(I),Q="visible"!==U||J?U:"none",ee={primaryContentVisibility:null!==(C=T.primaryContent)&&void 0!==C?C:Rt($,X,"visible"===K?"none":K),secondaryContentVisibility:(ie=Rt($,X,K),"none"===ie?"visible":"visible"===ie?"none":"hidden"),actionBarVisibility:Rt($,X),accessoryContentVisibility:"none",signalDebuggerV2ContentVisibility:"visible"};var ie;const te=e=>N(e),ne=e=>N(e),oe=e=>{N(e),e||V()};let ae=null;"none"!==ee.primaryContentVisibility&&(ae=(0,G.jsx)(Wi,{forcePrimaryContent:te,showEnabledSaveBehavior:O,onToggleFlyout:ne,onToggleModal:oe,pin:_,...m}));let re=null;const le=(0,n.useRef)(!0),ce=le.current;le.current=!1;const de=function(e,i){const{carousel_data:t}=e,{index:o}=t||{},[a,r]=(0,n.useState)(!t||i),s=(0,n.useRef)(o),l=(0,n.useRef)(null);if(t){const e=s.current;s.current=o,(o!==e||i)&&(l.current&&clearTimeout(l.current),r(!0),l.current=setTimeout((()=>{r(!1),l.current=null}),4e3))}return(0,n.useEffect)((()=>()=>{l.current&&clearTimeout(l.current)}),[]),a}(_,ce),ue=kt((0,Ti.Z)(de));ee.secondaryContentVisibility=null!==(j=T.secondaryContent)&&void 0!==j?j:function(...e){return e.includes("none")?"none":e.includes("hidden")?"hidden":"visible"}(ee.secondaryContentVisibility,ue),re=(v.allowShoppingPriceIndicator||v.shoppingLabelColor||"none"!==ee.secondaryContentVisibility)&&!o&&(0,G.jsx)(F.xu,{margin:2,children:(0,G.jsx)($i.Z,{pin:_,...v})});let _e=null;"visible"===T.accessoryContent&&(_e=(0,G.jsx)(Ie,{pin:_}),ee.accessoryContentVisibility=kt(Z)),p.isSocialSeasonalBoard&&(e.showShareButton=!1);let pe=null;P&&(e.showSourceLinkButton=!1,pe=(0,G.jsx)(se.Z,{children:(0,G.jsx)(Y,{pinId:_.id,surface:I})}));const he="visible"===T.actionBar?(0,G.jsx)(be,{onToggleFlyout:ne,pin:_,setForcePrimary:N,surface:I,...e}):null;let me=null;(x||(0,z.Z)(I))&&(me=(0,G.jsx)(Bi,{blockClickEvents:i,hoverTransitionState:"image-only-credit"===r.attributionType?Z:null,pin:_,setForcePrimary:N,surface:I,...r})),p.isSocialSeasonalBoard&&(me=(0,G.jsx)(F.xu,{"data-test-id":"social-seasonal-footer",marginTop:2,marginBottom:3,width:"100%",children:(0,G.jsx)(F.xu,{margin:"auto",width:ft.J,children:(0,G.jsx)(mt,{isFlyoutOpen:D,onFlyoutDismiss:()=>ne(!D),onToggleFlyout:()=>ne(!D),pinId:_.id,sendType:"pin",shownWithinMasonry:!0,viewType:R,element:72})})}));const ge=y&&(0,G.jsx)(bt,{...l}),ve=w&&_.debug_info_html&&(0,G.jsx)(F.xu,{paddingY:1,children:(0,G.jsx)("pre",{children:_.debug_info_html})}),fe=(0,G.jsx)(Te.Z,{pin:_}),xe=(0,n.useRef)();"header-only"===vt(xe)&&(ee.actionBarVisibility="none",ee.accessoryContentVisibility="none");const ye=b?(0,G.jsx)(Pt.ZP,{pin:_,...c}):null,Pe="ShoppingGridShippedMetadataWithVisitButton"===I?{height:"100%"}:{},we=x&&"default"===r.attributionType&&s.ZF.includes(I),Se=!_.is_promoted&&!a&&we;return(0,G.jsx)(E.Z,{name:"PinRepContainer",children:(0,G.jsx)(F.xu,{"data-test-id":"pin","data-test-pin-id":_.id,onFocus:M,onBlur:V,onMouseEnter:M,onMouseLeave:V,dangerouslySetInlineStyle:{__style:Pe},rounding:"ConversationView"===I?g:void 0,borderStyle:"ConversationView"===I?t:"none",overflow:"ConversationView"===I?"hidden":"visible",children:(0,G.jsx)(jt,{visualOverlayVisibility:W,savedOverlayVisibility:Q,handleMouseOverPinContent:Se?M:()=>{},handleMouseLeavePinContent:Se?V:()=>{},primaryContent:ae,primaryContentVisibility:ee.primaryContentVisibility,secondaryContent:re,secondaryContentVisibility:ee.secondaryContentVisibility,accessoryContent:_e,accessoryContentVisibility:ee.accessoryContentVisibility,actionBar:he,actionBarVisibility:ee.actionBarVisibility,seeStatsButton:pe,footer:me,selectionState:f,debugContent:ge,signalDebuggerV2Content:fe,signalDebuggerV2ContentVisibility:ee.signalDebuggerV2ContentVisibility,signalDebuggerContent:ve,obscuredPinOverlay:ye,...h,children:(0,G.jsx)(F.xu,{height:"100%",ref:xe,children:(0,G.jsx)(_t,{blockClickEvents:i,showUnavailablePin:S,isHovering:L,onError:d,onLoad:u,pin:_,surface:I,selectionState:f,imageHeightModifier:A,...p})})})})})}));var zt=t(231947),Dt=t(53987);const Nt=(0,n.lazy)((()=>Promise.all([t.e(97270),t.e(89734),t.e(67228),t.e(12545),t.e(92982)]).then(t.bind(t,576070)))),Bt=["ArticleProductsStory","BoardCoverSelectablePin","BoardNoteSelectablePin","BulkEditMode","CommentReply","EngagementDetails","IdeasHubSeasonalRow","OtherProfilePinGrid","SectionSuggestedPins","SelectableBoardlessPin","TopicBestPinNarrow","TopicBestPinWide"],Lt=["BaseBoardPinGrid","UserProfilePinGrid",...H];function Zt({attributionOption:e,blockClickEvents:i,debugImpressionState:t,disableReaction:u,feedback:_,imageOnlyOption:p="default",pin:h,pinId:g,pinImageCrop:F,pinImageFit:V,resolution:H="default",saveButtonOptions:U,authDesktopSurface:W,trackingParameters:$,...Y}){var se,le,ce,de,ue,_e,pe,me;const ge=(0,te.S6)()(g)||h,ve=null!==(se=null===(le=ge.board)||void 0===le?void 0:le.id)&&void 0!==se?se:"",fe=(0,ie.gC)()(ve)||ge.board;ge.grid_title=ge.grid_title||h.grid_title;const xe=(0,B.ZP)(),ye=(0,Q.F)(),{checkExperiment:be}=ye,{collaborated_by_me:Pe,collaborator_count:we,is_collaborative:Se}=fe||{},{is_quick_promotable:Ie,pinner:Te,showFeedback:Ee,sponsorship:Ae}=ge,{isPromoted:Ce}=(0,r.Z)(ge),je=(0,R.Z)(ge),ke=(0,M.Z)(),Re=(0,L.Z)(),{anyEnabled:Oe}=be("web_m10n_business_access_orbac_www"),{anyEnabled:ze}=be("web_m10n_business_access_orbac_ga"),De=ze?(0,zt.lJ)(ke,Re):"",Ne=(0,he.useLocation)(),{slotIndex:Be,viewParameter:Le}=$,Ze=["AuthHomefeed","BaseBoardPinGrid"].includes(W)&&be("web_repin_flow").anyEnabled,Me=(0,ae.x)(),Fe=(0,ne.P)(),{appUI:{videosAutoplaying:Ve}}=(0,J.I)(),Ge=(0,D.Z)(ge.id,Ve),He=(0,o.useSelector)((({changeBoardFromToast:e})=>e))||{},Ue=function(e){const i=e.rich_metadata&&e.rich_metadata.products&&e.rich_metadata.products[0]&&e.rich_metadata.products[0].additional_images;return!!(i&&i.length>0)}(ge),We=(0,j.Z)(ge),$e=ke.isAuth&&ke.isEmployee,Ye=ke.isAuth&&((0,k.Z)(ke.createdAt)||(0,O.Z)(null,ke))&&!ke.isPartner;let Xe=Ye;"TodayArticleFeed"===W&&(Xe=!1),"default"!==p&&(Xe="image-only"===p),(0,z.Z)(W)&&(Xe=!1),"ShoppingSquareGridDomainNoMetadata"===W&&(Xe=!0);let Ke=e;(Ye&&!Ke||Fe)&&(Ke="image-only");const qe=(0,C.Z)({feedbackOptions:_,pin:ge,viewParameter:Le},xe),{data:Je}=_||{},Qe="number"==typeof we&&we>0||Se;let ei=!1;"OtherProfilePinGrid"===W?ei=!0:"BaseBoardPinGrid"===W?ei="dense"===(null==Me?void 0:Me.boardPinDensity):"UserProfilePinGrid"===W&&(ei="dense"===(null==Me?void 0:Me.profilePinDensity));const ii=Boolean(Qe&&"BaseBoardPinGrid"===W),ti=(0,Z.Z)(),ni=(0,re.kW)(),oi=ni&&ni[null!==(ce=null===(de=ti.data)||void 0===de?void 0:de.id)&&void 0!==ce?ce:""]?ni[null!==(ue=null===(_e=ti.data)||void 0===_e?void 0:_e.id)&&void 0!==ue?ue:""]:ti.data,ai=(0,T.Z)(ke,fe);let ri=!1;if(!!(0,he.matchPath)(Ne.pathname,{path:"/:username/_created/",exact:!0}))ri=(0,zt.q6)(ke,null==oi?void 0:oi.id,Re);else if((0,Dt.am)(Ne)||(0,Dt.OJ)(Ne)){const e=fe&&fe.owner&&fe.owner.id||"";ri=(0,zt.q6)(ke,e,Re)}const si=Boolean(ke.isAuth&&Te&&Te.id===ke.id),li=Boolean(Pe||Qe&&ai),ci=ke.isAuth&&ke.isPartner,di=!(null===(pe=ge.story_pin_data)||void 0===pe||!pe.is_deleted),ui=(0,n.useMemo)((()=>function({hasCarouselData:e,isDeletedStoryPin:i,surface:t}){const n={primaryContent:null,secondaryContent:null,actionBar:I.includes(t)||i?"none":"visible",accessoryContent:e?"visible":"none"};return i||S.includes(t)?(n.primaryContent="none",n.secondaryContent="none"):["HomefeedMoreIdeasTabs","BoardMoreIdeasTabContent"].includes(t)&&(n.primaryContent="visible"),n}({hasCarouselData:We,isDeletedStoryPin:di,surface:W})),[We,di,W]),_i=(0,n.useMemo)((()=>function({board:e,isDenseView:i,isGroupBoard:t,isInlineBetterSave:n,isOwnBoard:o,isORBACProfileManager:a,isQuickPromotable:r,isRemovable:l,saveButtonOptions:c,surface:d,viewer:u,viewerIsCollaborator:_}){const p=u.isAuth?u.boardCount:void 0;let h=c||function(e=0){return 0===e?{type:"classic"}:{type:"inline"}}(p);r?h={type:"promote"}:(_||o||["OtherProfilePinGrid","UserProfilePinGrid"].includes(d))&&!["BoardlessPins","CreatorProfileActivityPinGrid","CreatorProfileStoryPinGrid","BaseBoardPinGrid"].includes(d)?h={type:"classic"}:(_||o)&&["BaseBoardPinGrid"].includes(d)&&null!=e&&e.name&&e.url&&e.id&&(h={type:"inline",initialSelection:{title:e.name,boardId:e.id,url:e.url}});return n&&(h={type:"inline",hidePinBetterSaveDropdown:"BaseBoardPinGrid"===d}),(l||w.includes(d)||a)&&(h={type:"none"}),{board:e,derivedSaveButtonOptions:h,showLikeButton:_&&t&&s.UP.includes(d),supportsReactionBar:!i}}({board:fe,isInlineBetterSave:Ze,isDenseView:ei,isGroupBoard:ii,isOwnBoard:ai,isOwnPin:si,isORBACProfileManager:ri,isQuickPromotable:Ie,isRemovable:je,saveButtonOptions:U,surface:W,viewer:ke,viewerIsCollaborator:li})),[fe,Ze,ei,ii,ai,si,ri,Ie,je,U,W,ke,li]),{anyEnabled:pi}=be("web_shopping_grid_metadata_ratings_shipping",{dangerouslySkipActivation:!0});let hi;["ShoppingDynamicHeightGrid","ShoppingGridShippedMetadata","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ShoppingGridShippedMetadataWithVisitButton"].includes(W)&&!Ce&&(hi="white");const mi=(0,n.useMemo)((()=>function({allowProductCarousel:e=!1,shoppingLabelColor:i,surface:t}){return{allowProductCarousel:e,allowShoppingPriceIndicator:s.Wv.includes(t),shoppingLabelColor:i}}({allowProductCarousel:Ue,shoppingLabelColor:hi,surface:W})),[Ue,hi,W]),gi=(0,n.useMemo)((()=>function({board:e,feedbackData:i,feedbackType:t,isDenseView:n,isGroupBoard:o,isOwnBoard:s,isORBACProfileManager:u,isORBACBeta:_,isORBACGA:p,pin:h,surface:m,viewer:g}){var v;const{isOwnPin:f,isPromoted:x}=(0,r.Z)(h),y=l({isGroupBoard:o,pin:h,surface:m}),b=e&&(0,a.Z)({action:4,board:e,viewer:g})||f,P=h.savedInfo&&h.savedInfo.localPinId,w=Boolean(s&&!o||"UserProfilePinGrid"===m&&b||P),S=Boolean(o&&b||w||u&&(!(0,c.hy)(h.story_pin_data_id)||_)),I=Boolean((null==e?void 0:e.is_collaborative)||w),T=!(x||s||o||d.includes(m)||u),E=!("CloseupRelatedProducts"===m||u&&!p),{tracked_link:A,link:C}=h,j=!(null===(v=null!=A?A:C)||void 0===v||!v);let k=o&&n?"equally-spaced":"default",R="default";return n&&(R=o?"icon-only":"truncated-text"),n&&["UserProfilePinGrid","BaseBoardPinGrid","BoardlessPins"].includes(m)&&(R="icon-only",k="equally-spaced"),{actionBarEditBeforeShare:I,feedbackData:i,feedbackType:t,layout:k,pinTitle:y,showEditButton:S,showOverflowMenu:T,showShareButton:E,showSourceLinkButton:j,sourceLinkStyle:R}}({board:fe,feedbackData:Je,feedbackType:qe,isDenseView:ei,isGroupBoard:ii,isOwnBoard:ai,isORBACProfileManager:ri,isORBACBeta:Oe,isORBACGA:ze,pin:ge,surface:W,viewer:ke})),[fe,Je,qe,ei,ii,ai,ri,Oe,ze,ge,W,ke]),vi=(0,m.rh)(ge,ke,ye,De)&&Lt.includes(W)&&(si||ze&&ri),fi=["ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ShoppingGridShippedMetadata","ShoppingGridShippedMetadataWithVisitButton","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain"].includes(W),xi=!Ce&&fi?"shopping":"standard";let yi=(u||"CreatorProfileStoryPinGrid"!==W||si)&&(0,X.J6)(ge,di);const bi=(0,oe.Xx)();yi=!Fe&&yi;const Pi=(0,n.useMemo)((()=>v({attributionOption:Ke,board:fe,contentType:xi,experimentsClient:ye,feedbackData:Je,feedbackType:qe,hasCarouselData:We,isGroupBoard:ii,isORBACProfileManager:ri,isOwnBoard:ai,pin:ge,showImageOnly:Xe,showNativeReactions:yi,showPromotedShoppingPrice:pi&&Ce&&fi,surface:W,viewer:ke,variantData:bi})),[Ke,fe,xi,ye,Je,qe,We,ii,ri,ai,Ce,fi,ge,pi,Xe,yi,W,ke,bi]),wi=!!ge.story_pin_data_id,Si=ge.created_at?new Date(ge.created_at):null,Ii=(0,ee.pN)({isOwnPin:si,isStoryPin:wi,pinCreationDate:Si,surface:W});let Ti=Boolean(Pi.pinTitle||Pi.contentType||Pi.userNote||Pi.showSource||"none"!==Pi.attributionType||Pi.showNativeReactions||Pi.productCurrentPrice||Pi.productOriginalPrice||Pi.showPinStats)||ii;"BaseBoardPinGrid"===W&&ai&&ci||Ae?Ti=!0:Bt.includes(W)||ei&&(ai||Pe)?Ti=!1:si||"CreatorProfileStoryPinGrid"!==W&&"CreatorProfileActivityPinGrid"!==W||(Ti=!1),!Fe||Ce||Ae||(Ti=!1);const Ei=Boolean(Ee),Ai={showNoPinBorderRadius:"TopicBestPinNarrow"===W||"TopicBestPinWide"===W||"ConversationView"===W,showPromotedPinBorderTreatment:"BaseBoardPinGrid"===W&&Ce,shouldUseLegoWash:!0},{anyEnabled:Ci}=be("hfp_homefeed_control_cta_variants"),ji={feedbackType:qe,isHomefeedTunerVariantExp:Ci},{anyEnabled:ki}=be("ads_desktop_video_ads",{dangerouslySkipActivation:!0}),Ri=(0,n.useMemo)((()=>function({hasCarouselData:e,isDenseView:i,isSocialSeasonalBoard:t,pinImageCrop:n,pinImageFit:o,resolution:a,showPromotedVideos:r,surface:l}){const c=s.zl.includes(l);let d="backend";"CloseupRelatedProducts"===l?d={height:P.GZ,width:P.OE}:"TopicBestPinWide"===l?d={height:b.m9,width:b.BS}:"TopicBestPinNarrow"===l?d={height:b._5,width:b.A6}:["ArticleProductsStory","ShoppingSquareGridCrop","ShoppingSquareGridDomainNoMetadata"].includes(l)||c?d={height:P.zX,width:P.zX}:n&&(d=n);let u="none",_=null!=a?a:"default";"string"!=typeof d&&(u="cover",(c||"ShoppingDynamicHeightGrid"===l&&!o||"ShoppingSquareGridDomainNoMetadata"===l)&&(u="contain",_="high-res"));const p=c||["ShoppingSquareGridDomainNoMetadata","ShoppingDynamicHeightGrid"].includes(l)?"transparent":"dominant",h=(0,x.e)(l);return{autoplaySettingOff:"undefined"!=typeof window&&0===y.Xb.getItem(f.Z.VIDEO_AUTOPLAY_LOCAL_STORAGE_KEY),fallbackColor:p,imageFit:u,isDenseView:i,isSocialSeasonalBoard:t,resolution:_,rootMargin:h,pinImageCrop:d,showCarousel:e&&!["ShoppingSquareGridStorefrontDomain","ShoppingSquareGridStorefront"].includes(l),showPromotedVideos:r}}({hasCarouselData:We,isDenseView:ei,isPromoted:Ce,isSocialSeasonalBoard:!1,pinImageCrop:F,pinImageFit:V,resolution:H,showPromotedVideos:ki,surface:W})),[We,ei,Ce,F,V,H,ki,W]),Oi=$e&&void 0!==(0,xt.Z)().debug_impression_log,zi=(0,n.useMemo)((()=>({debugImpressionState:t,slotIndex:Be})),[t,Be]),Di=(0,n.useMemo)((()=>({surface:W})),[W]);return(0,G.jsx)(E.Z,{name:"PinRepConfiguration",children:(0,G.jsx)(q.B,{value:$,children:(0,G.jsxs)(K.B,{value:Di,children:[(0,G.jsx)(Ot,{actionBarProps:gi,blockClickEvents:i,currentlyPlayingVideo:Ge,footerProps:Pi,impressionsDebuggerProps:zi,obscuredPinOverlayProps:ji,pin:ge,pinVisualProps:Ri,presentationProps:Ai,primaryContentProps:_i,secondaryContentProps:mi,showFooter:Ti||Ii,showImpressionsDebugger:Oi,showObscuredPinOverlay:Ei,showSeeStatsButton:vi,showSignalDebugger:$e,showUnavailablePin:di,surface:W,visibilityOverrides:ui,...A(Y,["pinId"])}),He.shouldOpenModal&&He.newPin&&(null===(me=He.originalPin)||void 0===me?void 0:me.id)===ge.id&&(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepConfiguration_ChangeBoardModal",children:(0,G.jsx)(N.Z,{children:(0,G.jsx)(Nt,{experience:He.experience,newPin:He.newPin})})})]})})})}},301921:(e,i,t)=>{t.r(i),t.d(i,{default:()=>x});var n=t(667294),o=t(564194),a=t(768559),r=t(868565),s=t(905723),l=t(304515),c=t(883119),d=t(785893);const u={overlay:{__style:{backgroundColor:"#000"}}};function _(e){var i,t,o,a;const{pin:{id:r,images:_,title:p,videos:h,video_status_message:m}}=e,g=m||{},v=_&&_["236x"],f=h&&(null===(i=h.video_list)||void 0===i?void 0:i[s.Z.V_HLSV4]),{duration:x}=f||{};return(0,d.jsx)(n.Fragment,{children:(0,d.jsx)(c.Zb,{children:(0,d.jsxs)(c.iP,{role:"link",href:`/pin/${r}`,rounding:2,children:[(0,d.jsxs)(c.xu,{overflow:"hidden",position:"relative",rounding:2,children:[v&&(0,d.jsx)(c.Ee,{alt:p||"",color:"lightGray",naturalHeight:null!==(t=v.height)&&void 0!==t?t:1,naturalWidth:null!==(o=v.width)&&void 0!==o?o:1,src:null!==(a=v.url)&&void 0!==a?a:""}),!!x&&(0,d.jsx)(c.xu,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex",children:(0,d.jsx)(l.Z,{duration:x})}),(0,d.jsx)(c.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:u.overlay}),(0,d.jsxs)(c.xu,{position:"absolute",top:!0,left:!0,padding:5,width:"100%",children:[(0,d.jsx)(c.X6,{color:"light",overflow:"normal",size:"400",children:g.title}),(0,d.jsx)(c.xu,{marginTop:4,children:(0,d.jsx)(c.xv,{color:"light",size:"200",overflow:"normal",children:g.subtitle})})]})]}),(0,d.jsx)(c.xu,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1,children:(0,d.jsx)(c.xu,{flex:"grow",children:p&&(0,d.jsx)(c.xu,{paddingY:1,children:(0,d.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:p})})})})]})})})}var p=t(623568),h=t(802201),m=t(276775),g=t(813401),v=t(597017),f=t(35495);function x({trackingParams:e,objectIdStr:i,impressionData:t,auxData:s,componentType:l,slotIndex:c,viewData:u,viewParameter:x,viewType:y,pin:b,pinId:P,...w}){var S,I,T,E,A,C;const j=(0,m.useLocation)(),k=(0,h.S6)(),R=(P?k(P):null)||b,O=!(null===(S=R.story_pin_data)||void 0===S||!S.is_deleted),z=e||(0,a.Z)({boardUrl:null===(I=R.board)||void 0===I?void 0:I.url,callToCreateSourcePinId:R.call_to_create_source_pin_id,location:j,pinId:R.id,pinnerUserName:null===(T=R.pinner)||void 0===T?void 0:T.username,storyPinDataId:R.story_pin_data_id,trackingParams:R.tracking_params,trackingParamsMap:R.tracking_params_map}),D=(0,r.Z)(R),N=!!(D&&D.url&&D.height&&D.width)||void 0,B=D&&R.videos?R.videos.id:void 0,[L,Z]=(0,n.useState)(!1),M=(0,n.useCallback)((()=>Z(!O)),[O]),F=(0,n.useCallback)((()=>Z(!1)),[]),V=(0,g.yz)();return(0,d.jsx)(o.Z,{componentType:l,contextLogData:{pwa_type:V,...s,...(0,f.Kl)(R,s)},impressionAuxFields:{...t||{},isNativeVideoAndWatchable:N,videoIdStr:B,clientTrackingParams:z||`${R.tracking_params||""}-0`,imageURL:null!==(E=null===(A=R.images)||void 0===A||null===(C=A["236x"])||void 0===C?void 0:C.url)&&void 0!==E?E:"",richTypes:(0,f.GT)(R)},impressionType:"Pin",isPaused:!L,loggingId:R.id,slotIndex:c,objectIdStr:i,viewData:u,viewParameter:x,viewType:y,children:(0,p._J)(R)?(0,d.jsx)(_,{pin:R}):(0,d.jsx)(v.Z,{...w,debugImpressionState:L?"started":"paused",onError:F,onLoad:M,pin:R,pinId:P,trackingParameters:{componentType:l,contextLogData:s,slotIndex:c,viewParameter:x,viewType:y}})})}},243943:(e,i,t)=>{t.d(i,{Xx:()=>h,wA:()=>u,wH:()=>p});var n=t(667294),o=t(752802),a=t(835209),r=t(407043),s=t(789707),l=t(533655),c=t(785893);const d=(0,n.createContext)(undefined),u=e=>{const{variant_set:i}=(0,a.Z)({richPinData:e.rich_metadata})||{},{dimension_metadata:t,variants:n}=i||{};if(!t||!n)return!1;const o=t.find((e=>{var i;return"color"===(null===(i=e.name)||void 0===i?void 0:i.toLowerCase())}));return!!(o&&o.name&&o.values&&1!==o.values.length)},_=({pinId:e,children:i,dimensionMetadata:t,primaryDimName:a,variants:u,primaryDimensionThumbnailImages:_})=>{const p=(0,n.useCallback)((({selectedMap:e})=>{const i=(0,l.B)({dimensionMetadata:t,primaryDimName:a,primaryDimensionThumbnailImages:_,defaultStatus:"invalid"});return(0,l.U0)({variantMap:i,selectedMap:e,variants:u}),i}),[t,a,_,u]),{logContextEvent:h}=(0,r.v)(),m=u.find((e=>e.is_preselected)),g=(0,s.a)(),{pinsState:v,setPinState:f}=g||{},x=v&&v[e],y=x?x.selectedMap:(0,l.O5)(u),b=x?x.selectedVariants:(0,l.x1)({selectedMap:y,variants:u}),P=x?x.variantMap:p({selectedMap:y}),w=!!x&&x.isSelectedByUser,S=x?x.variantUrl:(null==m?void 0:m.pin_id)||e,I=(0,n.useCallback)(((i,t=!1)=>{const n=(0,l.x1)({selectedMap:i,variants:u}),o={selectedMap:i,selectedVariants:n,variantMap:p({selectedMap:i}),isSelectedByUser:t,variantUrl:""},a=n[0].pin_id;a&&(o.variantUrl=a),f&&f(e,o)}),[p,e,f,u]),T=(0,n.useCallback)((()=>{const e=(0,l.O5)(u);I(e)}),[I,u]),E=(0,n.useCallback)((({dimensionName:e,variant:i,isAutoSelection:t=!1})=>{var n;const o=null===(n=P[e])||void 0===n?void 0:n.find((({value:e})=>e===i));try{if(!o)throw new Error(`Unable to find the selected variant ${e}: ${i}`);if(y[e]===i)return;const n={..."invalid"!==o.status?y:{},[e]:i},a=(0,l.i8)({variantMap:P,status:"invalid"});(0,l.U0)({variantMap:a,selectedMap:n,variants:u}),I(n,!t),h({event_type:10240,component:14092})}catch(a){throw T(),a}}),[P,y,u,I,T,h]),{title:A}=b[0],C=(0,o.Z)({images:(b[0].additional_images||[])[0].canonical_images}),j=(0,l.$b)(b),k=(0,n.useMemo)((()=>{const e=((null==m?void 0:m.dimensions)||{})[a],i=P[a]||[];let n=i;if(e&&i){const t=i.find((i=>i.value===e));t&&(n=[t,...i.filter((i=>i.value!==e))])}return{dimensionMetadata:t,offerSummary:j,primaryVariants:n,primaryDimName:a,selectedMap:y,isSelectedByUser:w,selectVariant:E,title:A,variants:u,image:C,variantUrl:S}}),[m,a,P,t,j,y,w,E,A,u,C,S]);return(0,c.jsx)(d.Provider,{"data-test-id":"safe-product-pins-feed-context-provider",value:k,children:i})},p=({children:e,pin:i,isEligible:t})=>{if(!t)return(0,c.jsx)(d.Provider,{"data-test-id":"undefined-context-provider",value:void 0,children:e});const{variant_set:n}=(0,a.Z)({richPinData:i.rich_metadata})||{},{dimension_metadata:o,primary_dimension_thumbnail_images:r,variants:s}=n||{},l=null==o?void 0:o.find((e=>{var i;return"color"===(null===(i=e.name)||void 0===i?void 0:i.toLowerCase())}));return(0,c.jsx)(_,{pinId:i.id,dimensionMetadata:o||[],primaryDimName:(null==l?void 0:l.name)||"",primaryDimensionThumbnailImages:r,variants:s||[],children:e})},h=()=>(0,n.useContext)(d)},789707:(e,i,t)=>{t.d(i,{A:()=>r,a:()=>s});var n=t(667294),o=t(785893);const a=(0,n.createContext)(void 0),r=({children:e})=>{const[i,t]=(0,n.useState)({}),r=(0,n.useMemo)((()=>({setPinState:(e,n)=>{t({...i,[e]:{...i[e]||{},...n}})},pinsState:i})),[i]);return(0,o.jsx)(a.Provider,{value:r,children:e})},s=()=>(0,n.useContext)(a)},104389:(e,i,t)=>{t.d(i,{Z:()=>d});var n=t(854035),o=t(869503),a=t(67828),r=t(883119),s=t(785893);const l=({count:e,countFormat:i,ratingValue:t,shippingInfo:l})=>(0,s.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,s.jsx)(n.Z,{count:e,countFormat:i,rating:t,textSize:"200"}),(0,s.jsx)(r.xu,{marginTop:(0,a.Z)({count:e,rating:t})?1:0,children:(0,s.jsx)(o.Z,{customStyles:{color:"subtle",size:"200"},freeShippingPrice:null==l?void 0:l.free_shipping_price,freeShippingValue:null==l?void 0:l.free_shipping_value})})]}),c=({count:e,countType:i,countFormat:t,ratingValue:l,shippingInfo:c})=>(0,s.jsxs)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{rowGap:8}},display:"flex",marginTop:1,wrap:!0,children:[(0,s.jsx)(n.Z,{count:e,countFormat:t,countType:i,rating:l,textSize:"300"}),(0,s.jsx)(o.Z,{customStyles:{color:"default",size:"300"},showPrevDot:(0,a.Z)({count:e,rating:l}),freeShippingPrice:null==c?void 0:c.free_shipping_price,freeShippingValue:null==c?void 0:c.free_shipping_value})]});function d(e){return e.isGridView?(0,s.jsx)(l,{...e}):(0,s.jsx)(c,{...e})}},533655:(e,i,t)=>{t.d(i,{$b:()=>l,A6:()=>d,B:()=>o,O5:()=>u,U0:()=>s,i8:()=>a,x1:()=>_,xD:()=>c});var n=t(752802);const o=({defaultStatus:e="available",dimensionMetadata:i,primaryDimName:t,primaryDimensionThumbnailImages:o})=>{const a={};for(const{values:n,name:r}of i)r&&n&&(a[r]=n.map((i=>({status:e,value:i}))));return(a[t]||[]).forEach(((e,i)=>{const t=o&&o[i.toString()];t&&(e.image=(0,n.Z)({images:t.canonical_images}))})),a},a=({status:e,variantMap:i})=>{const t={};for(const o in i){var n;t[o]=null===(n=i[o])||void 0===n?void 0:n.map((i=>({...i,status:e})))}return t},r=({dimensionName:e,variants:i,selectedTuple:t,variantStatuses:n})=>{const o=t.filter((([i])=>i!==e));for(const{dimensions:a={},offer_summary:r={}}of i){if(!o.every((([e,i])=>a[e]===i)))continue;const i=n.find((({value:i})=>i===a[e]));i&&(i.status=r.in_stock||"available"===i.status?"available":"outOfStock")}},s=({variants:e,selectedMap:i={},variantMap:t})=>{const n=Object.entries(i);for(const o in t){const i=t[o];i&&r({dimensionName:o,variants:e,selectedTuple:n,variantStatuses:i})}},l=e=>{let i,t,n,o,a=!1;const{percentage_off:r,standard_price:s}=1===e.length&&e[0].offer_summary||{};for(const l of e){const{max_price:e,max_price_val:r,min_price:s,min_price_val:c,price:d,price_val:u,price_in_micro_currency:_,in_stock:p}=l.offer_summary||{},h=u||Number(_);Number.isFinite(c)&&Number.isFinite(r)&&((void 0===t||c<t)&&(t=c,i=s),(void 0===o||r>o)&&(o=r,n=e),a=a||!!p),Number.isFinite(h)&&((null==t||h<t)&&(t=h,i=d),(null==o||h>o)&&(o=h,n=d),a=a||!!p)}if(n&&i)return i===n?{in_stock:a,percentage_off:r,price:i,standard_price:s}:{in_stock:a,max_price:n,min_price:i,percentage_off:r,price:i,standard_price:s}},c=(e,i)=>e.length===i.length&&e.every(((e,t)=>{var o,a;return(null===(o=(0,n.Z)({images:e.canonical_images}))||void 0===o?void 0:o.url)===(null===(a=(0,n.Z)({images:i[t].canonical_images}))||void 0===a?void 0:a.url)})),d=e=>{const i=new Set;return e.filter((e=>{const{url:t}=(0,n.Z)({images:e.canonical_images})||{};return!!t&&(!i.has(t)&&(i.add(t),!0))}))||[]},u=e=>{var i;const t={...(null===(i=e.find((e=>!!e.is_preselected)))||void 0===i?void 0:i.dimensions)||{}};for(const n in t)t[n]||delete t[n];return t},_=({selectedMap:e,variants:i})=>i.filter((({dimensions:i={}})=>{for(const t in e){const n=e[t];if(i[t]!==n)return!1}return!0}))},807592:(e,i,t)=>{function n(e){const{max_price:i,min_price:t,price:n}=e;return i&&t?`${t}-${i}`:n}t.d(i,{Z:()=>n})},841478:(e,i,t)=>{t.d(i,{A6:()=>l,BS:()=>r,EC:()=>o,_5:()=>s,m9:()=>a,z9:()=>n});const n=800,o=508,a=424,r=278,s=640,l=508},35495:(e,i,t)=>{t.d(i,{GT:()=>p,Gy:()=>r,Kl:()=>g,QY:()=>_,RR:()=>l,SP:()=>d,Sn:()=>m,Zs:()=>h,bA:()=>u,i8:()=>s,nn:()=>a,qN:()=>c});var n=t(834911),o=t(229428);const a=e=>!!e&&(e.shopping_flags||[]).includes(2),r=e=>{var i,t;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null!==(i=null===(t=e.rich_metadata)||void 0===t?void 0:t.products)&&void 0!==i?i:[]).length>0},s=e=>{var i;return null===(i=e.aggregated_pin_data)||void 0===i?void 0:i.is_shop_the_look},l=e=>{var i,t;return null===(i=e.rich_summary)||void 0===i||null===(t=i.aggregate_rating)||void 0===t?void 0:t.rating_value},c=e=>e.is_oos_product,d=e=>e.is_stale_product,u=e=>c(e)||d(e),_=e=>{var i,t,n,o;const a=null==e||null===(i=e.link_domain)||void 0===i||null===(t=i.official_user)||void 0===t?void 0:t.full_name;if(a)return a;const r=null==e||null===(n=e.rich_summary)||void 0===n?void 0:n.site_name;if(r)return r;if(e.domain){if("Uploaded by user"===e.domain){return((e.is_repin?e.origin_pinner:e.pinner)||{}).full_name}return e.domain}const s=null==e||null===(o=e.via_pinner)||void 0===o?void 0:o.full_name;return e.is_repin&&s?s:void 0},p=e=>{if(e){const i=e.shopping_flags||[];return!i.includes(10)&&e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0]&&e.product_pin_data.items[0].additional_images&&i.push(10),i}return[]};function h(e,i={}){var t,a,r,s,l,c;const d=p(e),u={...i.commerce_data};d.includes(2)&&(u.pin_is_shop_the_look=!0),d.includes(1)&&(u.is_available=!0),d.includes(5)&&(u.is_product_pin_v2=!0),d.includes(6)&&(u.is_rich_product_pin=!0),d.includes(10)&&(u.is_organic_product_carousel=!0);if((!!e.visual_objects&&(0,o.k)(e.visual_objects)||[]).some((e=>!0===e.is_stela))&&(u.pin_is_stela=!0),e.is_eligible_for_pdp||e.is_ooo_product||e.is_stale_product){e.is_oos_product?u.pin_show_pdp_oos=!0:e.is_stale_product?u.pin_show_pdp_stale=!0:u.pin_show_pdp=!0;const i=(0,n.Z)({carouselData:e.carousel_data,images:e.images,richMetadata:null==e?void 0:e.rich_metadata,richSummary:null==e?void 0:e.rich_summary});var _;if(i)u.image_count=null===(_=i.carousel_slots)||void 0===_?void 0:_.length,u.image_index=i.index}null!=e&&null!==(t=e.rich_summary)&&void 0!==t&&null!==(a=t.products)&&void 0!==a&&null!==(r=a[0])&&void 0!==r&&r.item_id&&(u.item_id=e.rich_summary.products[0].item_id),null!=e&&null!==(s=e.rich_summary)&&void 0!==s&&null!==(l=s.products)&&void 0!==l&&null!==(c=l[0])&&void 0!==c&&c.item_set_id&&(u.item_set_id=e.rich_summary.products[0].item_set_id);const h=e.aggregated_pin_data||{};return null!=h&&h.is_shop_the_look&&(u.pin_is_shop_the_look=!0),e.story_pin_data&&(u.story_pin_id=e.story_pin_data.id),u}function m(e){const i=JSON.stringify(e);return"{}"!==i?{commerce_data:i}:null}const g=(e,i={})=>{if(e){return m(h(e,i))}return null}},699825:(e,i,t)=>{t.d(i,{Z:()=>u});var n=t(667294),o=t(102500),a=t(692627),r=t(47170),s=t(35495),l=t(623568),c=t(407043),d=t(785893);function u({children:e,hovered:i,pin:t,slotIndex:u,trafficSource:_,viewType:p}){var h,m,g;const{logContextEvent:v}=(0,c.v)(),[f,x]=(0,n.useState)(),[y,b]=(0,n.useState)(),{id:P,tracked_link:w,link:S}=t,I=w||S||"",T=()=>{x(!0)},E=(0,r.Z)(t),A=(0,a.Z)({hasPin:!!t,hasPinRichMetadata:!(null==t||!t.rich_metadata),hasPinRichMetadataProducts:!(null==t||null===(h=t.rich_metadata)||void 0===h||!h.products),hasPinRichMetadataArticle:!(null==t||null===(m=t.rich_metadata)||void 0===m||!m.article),hasPinRichMetadataRecipe:!(null==t||null===(g=t.rich_metadata)||void 0===g||!g.recipe),hasPinStoryPinData:!(null==t||!t.story_pin_data)}),C=(0,n.useCallback)((()=>{((e,i,t)=>{const n={check_only:t,pin_id:e.id,url:i,client_tracking_params:E,aux_data:JSON.stringify({clickthrough_type:"rightClick",objectId:P,...u||{},...(0,s.Kl)(e)||{}})};return(0,o.Z)(n)})(t,I,!1).callGet({showError:!1}).then((e=>{e&&(v({event_type:12,object_id_str:P,view_type:p,view_parameter:A,aux_data:{clickthrough_type:"rightClick",...u||{},...(0,s.Kl)(t)||{}}}),v({event_type:8948,view_type:p,object_id_str:P,view_parameter:A,aux_data:{click_type:"clickthrough",closeup_navigation_type:_&&(0,l.sV)(_)?"deeplink":"click",clickthrough_type:"rightClick",...u||{},...(0,s.Kl)(t)||{}}}))}))})),j=e=>{var i;f&&(/^\/pin/.test(null===(i=e.target.activeElement.attributes.href)||void 0===i?void 0:i.value)||(C(),x(!1)),window.removeEventListener(y,j,!1))};return(0,n.useEffect)((()=>{var e,i,t,n,o,a;void 0!==(null===(e=window)||void 0===e||null===(i=e.document)||void 0===i?void 0:i.hidden)?b("visibilitychange"):void 0!==(null===(t=window)||void 0===t||null===(n=t.document)||void 0===n?void 0:n.msHidden)?b("msvisibilitychange"):void 0!==(null===(o=window)||void 0===o||null===(a=o.document)||void 0===a?void 0:a.webkitHidden)&&b("webkitvisibilitychange")}),[]),(0,n.useEffect)((()=>(f&&window&&window.addEventListener(y,j,!1),()=>window.removeEventListener(y,j))),[f,y]),(0,n.useEffect)((()=>(i&&window.addEventListener("contextmenu",T),()=>{window.removeEventListener("contextmenu",T)})),[i]),(0,d.jsx)(n.Fragment,{children:e})}},241244:(e,i,t)=>{t.d(i,{N:()=>r,Z:()=>a});var n=t(883119),o=t(785893);function a({children:e,fullWidth:i}){return(0,o.jsx)(n.xu,{"data-test-id":"pointer-events-wrapper",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:i?"100%":void 0}},children:e})}function r({children:e,enabled:i}){return i?(0,o.jsx)(a,{children:e}):e}},310227:(e,i,t)=>{t.d(i,{Dv:()=>a,Ml:()=>r,Oc:()=>n,mv:()=>o});const n=16,o=4,a={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},r=120},244617:(e,i,t)=>{t.d(i,{Z:()=>P});var n=t(567831),o=t(794230),a=t(107193),r=t(402201),s=t(704115),l=t(6637);const c={open(e){var i;const t=(d=e,c._validParams.reduce(((e,i)=>(d&&Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i]),e)),{}));var d;const u=c._getDialogType(e),_=c.generateFbRef(null!==(i=e.unauthId)&&void 0!==i?i:""),p=e.object_type&&e.object_id&&"feed"===u;let h=(0,n.Z)(e.path);const m=(0,s.Z)();if(m.ptrf&&(h=(0,o.Z)(h,{ptrf:m.ptrf})),p&&(h=(0,o.Z)(h,{fb_ref:_})),t.method=u,"feed"===t.method){const i=(0,r.Z)({width:e.width,height:e.height});let n="http://www.facebook.com/sharer/sharer.php?u="+h;t.picture&&(n+="&picture="+t.picture),t.name&&(n+="&title="+t.name),t.description&&(n+="&description="+t.description),t.caption&&(n+="&caption="+t.caption),window.open(encodeURI(n),"sharer",i)}else"send"===t.method?t.link=h:"share"===t.method&&(t.href=h),(0,a.default)((i=>{i.getLoginStatus((()=>{if("send"===t.method){i.ui(t);let n,o=10;const a=setInterval((()=>{n=function(){if(!document)return;const e=Array.from(document.querySelectorAll(".fb_dialog_iframe iframe"));if(!e.length)return;if(1===e.length)return e[0];const i=e.splice(0,e.length-1);for(let t=0;t<i.length;t+=1){const e=i[t].parentNode;e&&e.removeChild(i[t])}return e[0]}(),!n&&o||(clearInterval(a),n&&c.executeMessengerCallback(n,e.callback)),o-=1}),1e3)}else"share"===t.method&&i.ui(t,(i=>{p&&i&&!i.error_message&&l.Z.create("LogFacebookFeedShare",{object_type:e.object_type,object_id:e.object_id,fb_ref:_}).callCreate({showError:!1}),e.callback&&e.callback(i)}))}))}),e.viewer)},_validParams:["description","name","picture","to","href","caption","display"],_validOptions:["send","feed","share"],executeMessengerCallback(e,i){let t=10;const n=setInterval((()=>{"0px"!==e.style.width&&t||(clearInterval(n),e.style.width="575px"),t-=1}),1e3);i&&i()},generateFbRef(e){let i="";for(;i.length<20;)i+=Math.floor(65535*Math.random()).toString(16);return e+":"+i},_getDialogType:e=>c._validOptions.includes(e.type)?e.type:"feed"},d=c;function u(e,i,t){const n=function(e,i){const t=window.screen.width,n=window.screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+e+",height="+i+",left="+Math.round((t-e)/2)+",top="+(n>i?Math.round((n-i)/2):0)}(i,t);window.open(e,void 0,n)}const _={DIALOG_WIDTH:510,DIALOG_HEIGHT:525,openDialog(e){u(_._getWindowUrl(e.share_path,e.share_text),_.DIALOG_WIDTH,_.DIALOG_HEIGHT)},_getWindowUrl:(e,i)=>(0,o.Z)("https://social-plugins.line.me/lineit/share",{url:e?(0,n.Z)(e):void 0,text:i})},p=_,h={DIALOG_WIDTH:550,DIALOG_HEIGHT:420,openDialog(e){u(h._getWindowUrl(e.tweet_path,e.tweet_text),h.DIALOG_WIDTH,h.DIALOG_HEIGHT)},_getWindowUrl:(e,i)=>(0,o.Z)("https://twitter.com/intent/tweet",{via:"pinterest",url:e?(0,n.Z)(e):void 0,text:i||void 0})},m=h;var g,v,f=t(167912);const x=void 0!==g?g:g=t(166379),y=void 0!==v?v:v=t(380465),b={ObjectTypeToInviteObject:{pin:1,board:2,pinner:3,article:5,did_it:6,today_article:8,search:0},_convertToInviteObject(e){return this.ObjectTypeToInviteObject[e]||0},_logShareInvite(e,i,t){const n=this._convertToInviteObject(e.object_type),o=e.invite_channel,a=null==e.invite_category?3:e.invite_category,r=e.object_id;return l.Z.create("SentExternalInviteCallbackResource",{invite_type:{invite_category:a,invite_object:n,invite_channel:o},invite_code:i,object_id:r,client_tracking_params:e.client_tracking_params}).callCreate()},createShareInviteData(e,i){const t=this._convertToInviteObject(e.object_type),n=e.invite_channel,o=null==e.invite_category?3:e.invite_category,a=e.orbac_subject_id;if(10===o&&e.path){if(i)return(async(e,i,t)=>{var n;const o=await(0,f.fetchQuery)(e,y,{invite_category:t.toString(),url:i}).toPromise();return(e=>{var i,t,n;return{invite_code:null!==(i=null==e?void 0:e.invite_code)&&void 0!==i?i:"",invite_url:null!==(t=null==e?void 0:e.invite_url)&&void 0!==t?t:"",title:null!==(n=null==e?void 0:e.title)&&void 0!==n?n:""}})(null==o||null===(n=o.v3CreateShareLinkQuery)||void 0===n?void 0:n.data)})(i,e.path,o);return l.Z.create("ShareLinkResource",{invite_category:o,url:e.path}).callCreate().then((e=>Promise.resolve(e.resource_response.data)),(e=>Promise.reject(e)))}if(i)return(async(e,i,t,n,o)=>{var a;const r={invite_category:i,invite_object:t,invite_channel:n},s=await(0,f.fetchQuery)(e,x,{inviteType:JSON.stringify(r),objectId:o}).toPromise();return(e=>{var i,t,n;return{invite_code:null!==(i=null==e?void 0:e.invite_code)&&void 0!==i?i:"",invite_url:null!==(t=null==e?void 0:e.invite_url)&&void 0!==t?t:"",title:null!==(n=null==e?void 0:e.title)&&void 0!==n?n:""}})(null==s||null===(a=s.v3InviteUserExternalQuery)||void 0===a?void 0:a.data)})(i,o,t,n.toString(),e.object_id);{const i=e.object_id;return l.Z.create("CreateExternalInviteResource",{invite_type:{invite_category:o,invite_object:t,invite_channel:n},object_id:i,...a?{orbac_subject_id:a}:{}}).callCreate().then((e=>Promise.resolve(e.resource_response.data)),(e=>Promise.reject(e)))}},logShareInvite(e,i,t){i&&b._logShareInvite(e,i.invite_code,t)},shareFacebookInvite(e,i){const{options:t,unauthId:n,viewer:o}=e;return b.createShareInviteData(t,i).then((e=>{const a=e.invite_url,r=e.invite_code;if(a){const s={type:"share",object_type:t.object_type,object_id:t.object_id,name:t.name,caption:e.title,description:t.description,path:a,picture:t.picture,callback(e){e&&!e.error_message&&b._logShareInvite(t,r,i)}};d.open({...s,display:"popup",unauthId:n,viewer:o})}return Promise.resolve(e)}),(e=>Promise.reject(e)))},shareTwitterInvite(e,i){const t=this._convertToInviteObject(e.object_type);return b.createShareInviteData(e,i).then((n=>{const o=n.invite_url,a=n.invite_code;let r=e.description;return 6===t&&e.name&&(r=e.name),r.trim()||(r=`${n.title}\n`),o&&m.openDialog({tweet_path:o,tweet_text:r}),b._logShareInvite(e,a,i),Promise.resolve(n)}),(e=>Promise.reject(e)))},shareLineInvite(e,i){const t=this._convertToInviteObject(e.object_type);return b.createShareInviteData(e,i).then((n=>{const o=n.invite_url,a=n.invite_code;let r=e.description;return 6===t&&e.name&&(r=e.name),r.trim()||(r=`${n.title}\n`),o&&p.openDialog({share_path:o,share_text:r}),b._logShareInvite(e,a,i),Promise.resolve(n)}),(e=>Promise.reject(e)))},shareFbMessengerInvite(e,i){const{options:t,unauthId:n,viewer:o}=e;return b.createShareInviteData(t,i).then((e=>{const a=e.invite_url,r=e.invite_code;return a&&d.open({type:"send",object_type:t.object_type,object_id:t.object_id,name:t.name,caption:e.title,description:t.description,path:a,picture:t.picture,callback(e){e&&e.success&&b._logShareInvite(t,r,i)},display:"popup",unauthId:n,viewer:o}),Promise.resolve(e)}),(e=>Promise.reject(e)))}},P=b},41233:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(221263),o=t(937330);function a({action:e,board:i,viewer:t}){var a;return(0,n.Z)(t,i)||(0,o.Z)({board:i,viewer:t})&&!(null===(a=i.collaborator_permissions)||void 0===a||!a.includes(e))}},221263:(e,i,t)=>{function n(e,i){const t=i&&i.owner&&i.owner.id;return e.isAuth&&t===e.id}t.d(i,{Z:()=>n})},937330:(e,i,t)=>{function n({board:e,viewer:i}){const{collaborated_by_me:t}=e;return Boolean(i.isAuth&&t)}t.d(i,{Z:()=>n})},4294:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(221263),o=t(937330);function a({board:e,viewer:i}){return(0,n.Z)(i,e)||(0,o.Z)({board:e,viewer:i})}},737022:(e,i,t)=>{function n(e){return e?e["564x"]&&e["564x"].url?e["564x"]:e["736x"]&&e["736x"].url?e["736x"]:e["474x"]&&e["474x"].url?e["474x"]:e["236x"]&&e["236x"].url?e["236x"]:null:null}t.d(i,{Z:()=>n})},687551:(e,i,t)=>{function n(e){return!!(e&&e.carousel_data&&e.carousel_data.id)}t.d(i,{Z:()=>n})},47170:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(768559),o=t(558068),a=t(276775);function r(e){var i,t;const r=(0,a.useLocation)(),{previous:s}=(0,o.Hv)();return(0,n.Z)({boardUrl:null===(i=e.board)||void 0===i?void 0:i.url,callToCreateSourcePinId:e.call_to_create_source_pin_id,location:r,pinId:e.id,pinnerUserName:null===(t=e.pinner)||void 0===t?void 0:t.username,previousHistory:s,storyPinDataId:e.story_pin_data_id,trackingParams:e.tracking_params,trackingParamsMap:e.tracking_params_map})}},827896:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(768559),o=t(802201),a=t(276775);function r(){const e=(0,o.S6)(),i=(0,a.useLocation)();return(t,o)=>{let a;const r=e(t);if(null!=o&&o.shouldTrackForPrevLocation){const e=(null==r?void 0:r.tracking_params_map)||{},i=Object.keys(e).find((e=>"PinResource"!==e));r&&(a=i?e[i]:e.PinResource)}else if(r){var s,l;a=(0,n.Z)({boardUrl:null===(s=r.board)||void 0===s?void 0:s.url,callToCreateSourcePinId:r.call_to_create_source_pin_id,location:i,pinId:r.id,pinnerUserName:null===(l=r.pinner)||void 0===l?void 0:l.username,storyPinDataId:r.story_pin_data_id,trackingParams:r.tracking_params,trackingParamsMap:r.tracking_params_map})}return a}}},402201:(e,i,t)=>{t.d(i,{Z:()=>n});const n=e=>{const[i,t]=[(null==e?void 0:e.width)||580,(null==e?void 0:e.height)||400],[n,o]=[window.screen.width,window.screen.height];return["scrollbars=yes","resizable=yes","toolbar=no","location=yes",`width=${i}`,`height=${t}`,`left=${Math.round((n-i)/2)}`,`top=${o>t?Math.round((o-t)/2):0}`].join(",")}},572551:(e,i,t)=>{t.r(i),t.d(i,{default:()=>y});var n=t(667294),o=t(319915),a=t(757184),r=t(317254),s=t(463076);function l({isRTL:e,maxItemWidth:i=300,maxColumns:t=16,minColumns:n=2}){let o=`\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n  max-width: ${t*i}\n}\n\n.gridCentered .static {\n  position: absolute !important;\n  visibility: hidden !important;\n}\n\n@media (min-width: ${t*i}px) {\n  .gridCentered .static:nth-child(-n+${t}) {\n    position: static !important;\n    visibility: visible !important;\n    float: ${e?"right":"left"};\n    display: block;\n  }\n\n  .gridCentered .static:nth-child(-n+${t}) {\n    position: static !important;\n    visibility: visible !important;\n    float: ${e?"right":"left"};\n    display: block;\n  }\n\n  .gridCentered .static {\n    width: ${i}px !important;\n  }\n}\n`;for(let a=n;a<t+1;a+=1){o+=`\n@media (min-width: ${a===n?0:(a-1)*i}px) and (max-width: ${a*i-1}px) {\n  .gridCentered .static:nth-child(-n+${a}) {\n    position: static !important;\n    visibility: visible !important;\n    float: ${e?"right":"left"};\n    display: block;\n  }\n\n  .gridCentered .static {\n    width: calc(100% / ${a}) !important;\n  }\n}\n`}return o}var c=t(391254),d=t(883119),u=t(773285),_=t(780280),p=t(444445),h=t(785893);function m(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class g extends n.Component{constructor(...e){super(...e),m(this,"Item",(e=>{const{Item:i}=this.props,{gutterWidth:t,paddingBottom:n}=this.getGutters();return(0,h.jsx)("div",{style:{paddingBottom:n,paddingLeft:t/2,paddingRight:t/2},children:(0,h.jsx)(i,{...e})})}))}getGutters(){const{gutterWidth:e,paddingStyle:i}=this.props,t="simplified"===i,n=t?p.oX:e,o=t?16:6;return{gutterWidth:null!=n?n:p.ZZ,paddingBottom:o}}render(){const{columnWidth:e,flexible:i,isGridCentered:t,isRTL:n,items:o,layout:a,loadItems:r,masonryRef:u,measurementStore:_,minCols:m,scrollContainerRef:g,serverRender:v,virtualize:f,virtualBufferFactor:x}=this.props,{gutterWidth:y}=this.getGutters(),b=v?"serverRenderedFlexible":"flexible";let P;t&&(P="gridCentered");const w=()=>(null==g?void 0:g.current)||window;return(0,h.jsxs)("div",{className:P,children:[v&&(0,h.jsx)(c.Z,{unsafeCSS:i?l({isRTL:n,maxItemWidth:(e||p.yF)+y,maxColumns:o.length||p.g5,minColumns:m||p.yc}):(0,s.Z)({isRTL:n,itemWidth:(e||p.yF)+y,maxColumns:o.length||p.g5,minColumns:m||p.yc})}),(0,h.jsx)(d.Rk,{columnWidth:(null!=e?e:p.yF)+y,gutterWidth:0,Item:this.Item,items:o,layout:i?b:null!=a?a:"basic",loadItems:r,measurementStore:_,minCols:m,ref:e=>{u&&(u.current=e)},scrollContainer:w,virtualize:f,virtualBufferFactor:x})]})}}function v(e){var i;const{isRTL:t}=(0,_.B)(),{checkExperiment:n}=(0,u.F)(),o=null!==(i={enabled_0_3:"0.3",enabled_0_5:"0.5",enabled_0_9:"0.9",enabled_1_1:"1.1",enabled_1_3:"1.3"}[n("web_masonry_virtual_buffer_factor").group])&&void 0!==i?i:.7;return(0,h.jsx)(g,{...e,isRTL:t,virtualBufferFactor:o})}function f(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}m(g,"defaultProps",{gutterWidth:p.ZZ,isGridCentered:!0,minCols:p.yc,paddingStyle:"simplified",virtualize:!0});class x extends n.Component{constructor(...e){super(...e),f(this,"Item",(e=>{const{Item:i}=this.props;return(0,h.jsx)(o.Z,{name:"MasonryPerfTimingItem",children:(0,h.jsx)(i,{...e})})})),f(this,"loadItems",(()=>{const{isFetching:e,loadItems:i}=this.props;!e&&i&&i()}))}render(){const{cacheKey:e,columnWidth:i,flexible:t,gutterWidth:n,isGridCentered:o,items:r,layout:s,masonryRef:l,minCols:c,paddingStyle:d,scrollContainerRef:u,serverRender:_,virtualize:p}=this.props;return(0,h.jsx)(v,{columnWidth:i,flexible:t,gutterWidth:n,isGridCentered:o,Item:this.Item,items:r,layout:s,loadItems:this.loadItems,masonryRef:l,measurementStore:(0,a.Z)(e),minCols:c,paddingStyle:d,scrollContainerRef:u,serverRender:_,virtualize:p})}}function y({cacheKey:e,columnWidth:i,flexible:t,gutterWidth:n,isAtEnd:o,isFetching:a,isGridCentered:s=!0,Item:l,items:c,pinData:d,layout:u,loadItems:_,masonryRef:p,minCols:m,paddingStyle:g,scrollContainerRef:v,serverRender:f=!0,virtualize:y=!0,includeBackgroundImages:b,includeVideos:P}){return(0,h.jsx)(r.Z,{isAtEndOfFeed:o,pinData:d,itemCount:c.length,includeBackgroundImages:b,includeVideos:P,children:(0,h.jsx)(x,{cacheKey:e,columnWidth:i,Item:l,flexible:t,gutterWidth:n,isFetching:a,isGridCentered:s,items:c,layout:u,loadItems:_,masonryRef:p,minCols:m,paddingStyle:g,scrollContainerRef:v,serverRender:f,virtualize:y})})}},757184:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(883119);const o={};function a(e){if(null!=e)return o[e]&&o[e].screenWidth===window.innerWidth||(o[e]={screenWidth:window.innerWidth,cache:n.Rk.createMeasurementStore()}),o[e].cache}},463076:(e,i,t)=>{function n({isRTL:e,itemWidth:i=236,maxColumns:t=16,minColumns:n=2}){let o="\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n}\n.gridCentered .static {\n  position: absolute;\n  visibility: hidden;\n}\n";for(let a=n;a<t+1;a+=1){o+=`\n@media (min-width: ${a===n?0:a*i}px) and (max-width: ${(a+1)*i-1}px) {\n  .gridCentered {\n    width: ${a*i}px;\n  }\n  .gridCentered .static:nth-child(-n+${a}) {\n    position: static !important;\n    visibility: visible !important;\n    float: ${e?"right":"left"};\n    display: block;\n  }\n}\n`}return o}t.d(i,{Z:()=>n})},954571:(e,i,t)=>{t.d(i,{Z:()=>n});function n(e){if(!e)return!1;const i=new Date(e);return i.setDate(i.getDate()+28),(new Date).getTime()<i.getTime()}},329734:(e,i,t)=>{t.d(i,{P:()=>a,Z:()=>o});var n=t(702664);function o(e){return e&&e[1000069]&&500417===e[1000069].experience_id&&e[1000069].display_data.hide_footer}function a(){const e=(0,n.useSelector)((({experiences:e})=>e));return!!e&&o(e)}},64446:(e,i,t)=>{t.d(i,{Z:()=>_});var n=t(605028);var o=t(341732),a=t(81226),r=t(898781),s=t(883119),l=t(785893);const c={borderRadius:"18px",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"},d={borderRadius:"18px",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"4px 8px"};function u({backgroundColor:e,identifier:i,size:t="sm"}){const n="pine"===e?"#0FA573":"#fff",o="sm"===t?c:d;return(0,l.jsx)(s.xu,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{...o,backgroundColor:e?n:"rgba(255, 255, 255, 0.8)",color:"pine"===e?"#fff":"#111"}},"data-test-id":"PinTypeIdentifier",children:i})}function _({pin:e,size:i="sm",allowProductCarousel:t,allowShoppingPriceIndicator:c,shoppingLabelColor:d}){const _=(0,r.ZP)(),p=(0,n.Z)(e);if(p.isGif)return u({identifier:"GIF",size:i});if(p.isStoryPin){const{page_count:t=0,total_video_duration:n=0}=e.story_pin_data||{};let o=t.toString();if(n>0)return o=(0,a.Z)(n),u({identifier:o,size:i});return u({identifier:(0,l.jsxs)(s.kC,{alignItems:"center",justifyContent:"between",children:[(0,l.jsx)(s.xu,{marginEnd:1,display:"flex",alignItems:"center",children:(0,l.jsx)(s.JO,{accessibilityLabel:_.bt("Idea Pin", "Idea Pin", "pin.pinTypeIdentifier.ideaPinIconAccessibilityLabel", undefined, true),inline:!0,icon:"idea-pin",color:"default",size:"sm"===i?12:16})}),(0,l.jsx)(s.xv,{inline:!0,size:"100",weight:"bold",children:o})]}),size:i})}if(p.isVideo){const t=e.videos,{duration:n=0}=t&&t.video_list&&t.video_list[Object.keys(t.video_list)[0]]||{};return u({identifier:(0,a.Z)(n),size:i})}if(p.isProduct){const t=e.rich_summary&&e.rich_summary.products&&e.rich_summary.products[0]&&e.rich_summary.products[0].offer_summary;if(c){const e=t&&(t.price||t.max_price);return e?u({identifier:e,size:i}):null}if(d){const t=function(e){var i;return((((null===(i=e.rich_summary)||void 0===i?void 0:i.products)||[])[0]||{}).label_info||{}).labels||[]}(e)[0];return t?u({identifier:t,backgroundColor:d,size:i}):null}return null}if(t){const t=e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0],n=t&&(0,o.Z)(e.images,t.additional_images,e.carousel_data&&e.carousel_data.index)||{},{carousel_slots:a=[],index:r=0}=n;return u({identifier:`${r+1}/${a.length}`,size:i})}if(p.isCarousel){const t=e.carousel_data||{},{carousel_slots:n=[],index:o=0}=t;return u({identifier:`${o+1}/${n.length}`,size:i})}return null}},55275:(e,i,t)=>{t.d(i,{P:()=>r,t:()=>s});var n=t(6637);const o=()=>{};const a={complaint:function(e,i){n.Z.create("PinFeedbackResource",e).callUpdate().then((()=>i()))},followBoard:function(e,i){n.Z.create("BoardFollowResource",e).callCreate().then((()=>i()))},followPinner:function(e,i){n.Z.create("UserFollowResource",e).callCreate().then((()=>i()))},followTopic:function(e,i){n.Z.create("InterestFollowResource",e).callCreate().then((()=>i()))},newsHubPinHide:function(e,i){n.Z.create("NewsHubPinFeedbackResource",e).callUpdate().then((()=>i()))},promotedComplaint:function(e,i){n.Z.create("PinFeedbackResource",e).callUpdate().then((()=>i()))},relatedPinHide:function(e,i){n.Z.create("RelatedPinFeedbackResource",e).callUpdate().then((()=>i()))},reportPin:function(e,i){i()},showAdReasons:function(e,i){i()},unfollowBoard:function(e,i){n.Z.create("BoardFollowResource",e).callDelete().then((()=>i()))},unfollowPinner:function(e,i){n.Z.create("UserFollowResource",e).callDelete().then((()=>i()))},unfollowTopic:function(e,i){n.Z.create("InterestFollowResource",e).callDelete().then((()=>i()))},unrelatedSearchPin:function(e,i){n.Z.create("SearchPinFeedbackResource",e).callUpdate().then((()=>i()))}},r=["complaint","relatedPinHide","unrelatedSearchPin","promotedComplaint","newsHubPinHide","unfollowBoard","unfollowPinner","unfollowTopic"];function s(e,i,t=o){const n=e?a[e]:null;return n?n(i,t):t()}},680046:(e,i,t)=>{t.d(i,{EF:()=>u,XZ:()=>c,ZP:()=>s,nb:()=>d,yl:()=>l});var n=t(55275),o=t(760372),a=t(966113);const r=e=>e.length>32?`${e.substring(0,32).trim()}...`:e,s=({i18n:e,interpolateNamedTemplate:i})=>({getLearnMoreUrl:e=>{switch(e){case 1:return a.hsD;case 2:case 3:return a.LbF;default:return a.m7f}},getRecommendationDescription:({ad_match_reason:t,board:n,feedbackType:o,makeNavigateLink:a,pinner:s,promoter:l,recommendationReason:c,sourceInterest:d})=>{switch(o){case"pfy":return e.bt("This Pin was inspired by your recent activity", "This Pin was inspired by your recent activity", "Pin feedback reason", undefined, true);case"pfyBoard":const{name:o,url:u}=c.board,_=a("navigation",u,o);return i(e.bt("This Pin was inspired by your board {{ boardLink }}", "This Pin was inspired by your board {{ boardLink }}", "Pin feedback - inspired by your board", undefined, true),{boardLink:_});case"topic":const{name:p,url_name:h}=d,m=a("topicUrl",`/topics/${h}`,p);return i(e.bt("This Pin was inspired by {{ formattedTopic }}", "This Pin was inspired by {{ formattedTopic }}", "Pin feedback", undefined, true),{formattedTopic:m});case"followed":const g=`/${s.username}`,v=a("boardUrl",n.url,r(n.name)),f=a("pinnerUrl",g,r(s.full_name));return s.explicitly_followed_by_me?i(e.bt("This Pin is from {{ formattedPinner }}, a profile you follow", "This Pin is from {{ formattedPinner }}, a profile you follow", "Pin feedback", undefined, true),{formattedPinner:f}):i(e.bt("This Pin is from {{ formattedBoard }}, a board you follow", "This Pin is from {{ formattedBoard }}, a board you follow", "Pin feedback", undefined, true),{formattedBoard:v});case"promoted":switch(t){case 1:case 2:case 3:return e.bt("This ad was personalised for you using info from one of our partners", "This ad was personalized for you using info from one of our partners", "Pin feedback", undefined, true);default:const{full_name:t,username:n}=l,o=a("promotedLink",n?"/"+n+"/":"/",t);return i(e.bt("{{ promoterLink }} paid to have this Pin displayed where youd be more likely to notice it.", "{{ promoterLink }} paid to have this Pin show up where youd be more likely to notice it", "Pin feedback", undefined, true),{promoterLink:o})}default:return null}},getFeedbackType({board:e,feedback:i,viewParameter:t,pin:{promoter:n,is_downstream_promotion:o,recommendation_reason:a},pinner:r}){const s=i&&i.type;return n&&!o?"promoted":s||((e=>!!e&&"FOLLOWED_INTEREST"!==e.reason&&"FOLLOWING_FEED"!==e.reason&&"RECENT_FOLLOWED_BOARD"!==e.reason&&!0)(a)?a.board?"pfyBoard":"pfy":a&&"FOLLOWED_INTEREST"===a.reason?"topic":e&&e.followed_by_me||r&&r.explicitly_followed_by_me?"followed":140===t||144===t||141===t||145===t||139===t||3173===t?"related":92===t?"default":3082===t?"newsHub":null)},getHidePinAction:({feedbackData:e,feedbackType:i,pinId:t,recommendationReasonId:n,pinFeedbackType:o,complaintReason:a,throughId:r,throughProperties:s,clientTrackingParams:l})=>{const c="promoted"===i;let d,u;switch(i){case"promoted":d="promotedComplaint";break;case"search":d="unrelatedSearchPin";break;case"related":d="relatedPinHide";break;case"newsHub":d="newsHubPinHide";break;default:d="complaint"}switch(i){case"search":u={query:e.query,pin_id:t};break;case"related":u={pin:t};break;case"newsHub":u={pinId:t,newsId:e.newsId};break;default:u={complaint_reason:a||0,pin_id:t,...n?{recommendation_reason_id:n}:{},feedback_type:o||1,promoted:c,...r?{through_id:r}:{},...s?{through_properties:s}:{},...l?{client_tracking_params:l}:{}}}return{action:d,actionOptions:u}},getUnfollowAction:({board:t,feedbackType:n,makeNavigateLink:a,pinner:r,sourceInterest:s})=>{if("topic"===n){if(s){const{id:t,name:n,url_name:r}=s,l=a("topicUrl",`/topics/${r}`,n,!0),c=i(e.bt("Well show you fewer Pins from {{ formattedTopic }} in future.", "Well show you less Pins from {{ formattedTopic }} in the future.", "pin.contextualMenu.feedback.unfollowTopic.subtitle", undefined, true),{formattedTopic:l});return{action:"unfollowTopic",actionOptions:{interest_id:t,interest_list:o.X},title:"",subTitle:c}}}else if("followed"===n&&t&&r){const{id:n,name:o,url:s}=t||{},{explicitly_followed_by_me:l,full_name:c,username:d}=r,u=`/${d}`,_=a("boardUrl",s,o,!0),p=a("pinnerUrl",u,c,!0);let h=l?i(e.bt("Youve unfollowed {{ formattedPinner }}s board {{ formattedBoard }}. You can follow it again by searching for it.", "Youve unfollowed {{ formattedPinner }}s Board {{ formattedBoard }}. You can follow it again by searching for it.", "Confirmation text after unfollowing a board", undefined, true),{formattedPinner:p,formattedBoard:_}):i(e.bt("Youve unfollowed {{ formattedBoard }}. You can follow it again by searching for it.", "Youve unfollowed {{ formattedBoard }}. You can follow it again by searching for it.", "Confirmation text after unfollowing a board", undefined, true),{formattedBoard:_});return h=l?i(e.bt("You unfollowed {{ formattedPinner }} and wont see Pins they save any more.", "You unfollowed {{ formattedPinner }} and wont see Pins they save anymore.", "Confirmation text after unfollowing a user", undefined, true),{formattedPinner:p}):i(e.bt("You unfollowed the board {{ formattedBoard }} and wont see Pins saved to it any more.", "You unfollowed the board {{ formattedBoard }} and wont see Pins saved to it anymore.", "Confirmation text after unfollowing a board", undefined, true),{formattedBoard:_}),{action:"unfollowBoard",actionOptions:{board_id:n},title:"",subTitle:h}}return null}});function l(e){return null!=e&&e.reason_id?e.reason_id:null!=e&&e.board?e.board.id:null!=e&&e.pin?e.pin.id:null!=e&&e.interest?e.interest.id:""}function c(e){return null==e?void 0:e.through_properties}function d(e){switch(e){case"promoted":return 60;case"followed":case"topic":return 100;case"pfyBoard":case"pfy":return 58}}function u(e,i,t,o,a,r,s){return()=>{const l={...e,undo:!0};let c=i;"unfollowPinner"===i?c="followPinner":"unfollowBoard"===i?c="followBoard":"unfollowTopic"===i&&(c="followTopic"),(0,n.t)(c,l),r(t),s({event_type:101,component:0,element:11181,view_type:o,view_parameter:a})}}},205202:(e,i,t)=>{function n(e,i){return e&&e[i]&&e[i].url}t.d(i,{Z:()=>n})},752802:(e,i,t)=>{t.d(i,{Z:()=>o});const n=["564x","736x","orig","474x","236x"],o=({images:e={},resolutionPreferences:i=n})=>{for(const t of i)if(e[t]&&e[t].url)return e[t];return null}},248975:(e,i,t)=>{function n({embedSrc:e,embedType:i,images:t,preferredResolution:n}){if(!e&&!i&&!t)return"";if("gif"===i)return e||"";const o=t;if(!o)return"";if(n){const e="474x"===n&&o["474x"]||"236x"===n&&o["236x"]||o["736x"];if(e&&e.url)return e.url}const a=Object.keys(o).map((e=>{try{const i=e.split("x")[0];return Number.isNaN(Number(i))?(o[i]=o[e],i):e}catch(i){return""}}));a.sort();const r=a.pop();return o[r]&&o[r].url||""}t.d(i,{Z:()=>n})},605028:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(687551),o=t(623568);function a(e){const{access:i,attribution:t,embed:a,is_eligible_for_web_closeup:r,rich_summary:s,sponsorship:l,story_pin_data_id:c,videos:d}=e,u={isLeadPin:!1,isCarousel:!1,isGif:!1,isOneTap:!1,isOwnPin:!1,isProduct:!1,isPromoted:!1,isRecipe:!1,isSponsored:!1,isStoryPin:!1,isVideo:!1};(0,o._Q)(e)&&(u.isLeadPin=!0),(0,n.Z)(e)&&(u.isCarousel=!0),r&&(u.isOneTap=!0),(0,o.iR)(d)&&(u.isVideo=!0);const _=a||t&&t.embed||null;return _&&"gif"===_.type&&(u.isGif=!0),s&&"product"===s.type_name&&(u.isProduct=!0),s&&"recipe"===s.type_name&&(u.isRecipe=!0),e.promoter&&!e.is_downstream_promotion&&(u.isPromoted=!0),(i||[]).includes("write")&&(u.isOwnPin=!0),c&&(u.isStoryPin=!0),l&&(u.isSponsored=!0),u}},674915:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(307061),o=t(736688);const a=(0,n.Z)((e=>{const{videos:i}=e.pin,{id:t,video_list:n={}}=i||{},{V_720P:a,V_HLSV4:r,V_HLSV3_MOBILE:s}=n,l=(0,o.V3)(r),c=(0,o.V3)(s),d=(0,o.V3)(a),u=d||l||c;return t&&u?{...e,video:{id:t,hasVideo:u,mp4:d||void 0,hls:l||void 0,hlsv3:c||void 0}}:null}))},976071:(e,i,t)=>{function n(e){return Boolean(e.promoted_is_removable)}t.d(i,{Z:()=>n})},18857:(e,i,t)=>{t.d(i,{G7:()=>c,WE:()=>l,l6:()=>d,rh:()=>s});var n=t(27255),o=t(605028),a=t(66699),r=t(623568);function s(e,i,t,a){var s,l,c;if(!i.isAuth)return!1;const d=(0,r.Nc)(e)||(0,r.o)(e),u=(null===(s=e.board)||void 0===s?void 0:s.privacy)===n.Z.BoardPrivacy.PUBLIC,_=((null===(l=e.board)||void 0===l?void 0:l.privacy)===n.Z.BoardPrivacy.PROTECTED||u)&&!e.is_repin&&[i.id,a].includes(null===(c=e.pinner)||void 0===c?void 0:c.id),{isStoryPin:p}=(0,o.Z)(e);return d||i.isPartner&&_||(e=>e.checkExperiment("web_ps4p").anyEnabled)(t)&&p&&_||(0,r.pU)(e)}function l(e,i,t,n,o,a){return e.isAuth&&i&&(t||n)&&!(null==o||!o.isLoaded)&&!a}function c(e,i){return(0,a.Z)(i.nbt(["The last day", "Last {{ count }} days"], e, "Previous {{ count }} days from current date", true),{count:e})}function d(e,i){return(0,a.Z)(i.nbt(["Last {{ count }} hour", "Last {{ count }} hours"], e, "analytics.utils", true),{count:e})}},692627:(e,i,t)=>{function n({hasPin:e,hasPinRichMetadata:i,hasPinRichMetadataProducts:t,hasPinRichMetadataArticle:n,hasPinRichMetadataRecipe:o,hasPinStoryPinData:a}){if(e){if(i)return t?144:n?141:o?145:139;if(a)return 157}return 140}t.d(i,{Z:()=>n})},336882:(e,i,t)=>{t.d(i,{Z:()=>n});const n={STARTED:1,FINISHED:2}},177471:(e,i,t)=>{t.d(i,{k:()=>P});var n=t(667294),o=t(702664),a=t(6637),r=t(19121),s=t(414327),l=t(780280);const c=["etsy","facebook","microsoft","twitter","google","instagram","youtube","dropbox"];async function d(e,i){if(c.includes(e))return await a.Z.create("UserSocialNetworkResource",{network:e,data:i}).callCreate();const t=`/v3/connect/${e}/`,n=((e,i)=>{let t;switch(e){case"gplus":t=i?{one_time_code:i.one_time_code,redirect_uri:i.redirect_uri||void 0}:Object.freeze({});break;case"line":t=i?{line_id_token:i.line_id_token,line_access_token:i.line_access_token}:Object.freeze({});break;default:t=Object.freeze({})}return t})(e,i);return await a.Z.create("ApiResource",{url:t,data:n}).callUpdate()}var u=t(553171),_=t(124237),p=t(402201),h=t(572752),m=t(966113),g=t(83969),v=t(539497);let f=Object.freeze({});const x=e=>{const{network:i}=e;if(!f[i])return;const{[i]:{error:t,success:n,complete:o},...a}=f;f={...a},"error"===e.type?null==t||t(Object.freeze({})):n("facebook"===e.network?{id:e.profile.id}:{one_time_code:e.one_time_code,redirect_uri:e.redirect_uri}),null==o||o()},y=({i18n:e,network:i,callbacks:t,requestContext:n})=>{if(t={error:()=>{},complete:()=>{},...t},(0,v.My)(`auth_web.social_connect.${i}.${(0,h.Z)(n)}`),"gplus"===i||"google"===i)(0,v.My)("auth_web.social_connect.google.migration"),async function(e){var i,t;await(0,g.Px)();const n=null===(i=window.google)||void 0===i||null===(t=i.accounts)||void 0===t?void 0:t.oauth2;n&&n.initCodeClient({client_id:m.v3o,scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",ux_mode:"popup",callback:e}).requestCode()}((e=>{t.success({one_time_code:e.code,redirect_uri:"postmessage"})}));else if("line"===i){const{locale:e}=n;(0,u.Z)(e,t)}else{const n=window.open("/connect/"+i+"/","",(e=>{switch(e){case"dropbox":return"width=600,height=800";case"instagram":return(0,p.Z)({width:580,height:580});case"etsy":return(0,p.Z)({width:580,height:775});case"youtube":return(0,p.Z)({width:605,height:640});default:return(0,p.Z)()}})(i));var o,a;if(!n)return _.Z.showError(e.bt("You must enable pop-ups.", "You must enable popups!", " - ", undefined, true)),void(null===(o=(a=t).error)||void 0===o||o.call(a,Object.freeze({})));const r=setInterval((()=>{n.closed&&(clearInterval(r),x({network:i,type:"error"}))}),1e3);f={...f,[i]:t}}};window.addEventListener("message",(e=>{const i=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(e.origin!==i)return;const t=e.data;if(t&&"social-connect-complete"===t.type){const i=e.data;i.network&&x(i)}}));class b{constructor({invalidateResource:e,requestContext:i,viewer:t}){this.getUserId=()=>t.isAuth?t.id:"",this.getUsername=()=>t.isAuth?t.username:"",this.isLimitedLogin=()=>t.isLimitedLogin,this.invalidateResource=e,this.requestContext=i}handleConnect(e,i,t,n){const o=i=>{("connect"===i.type?d(e,i.data):a.Z.create("ApiResource",{url:`/v3/connect/${e}/`}).callDelete()).then((e=>{var i;const n={user_id:this.getUserId(),username:this.getUsername(),field_set_key:"social_connect"};this.invalidateResource("UserResource",n),a.Z.create("UserResource",n).callGet(),null===(i=t.success)||void 0===i||i.call(t,e)}),(e=>{var i;e&&"object"==typeof e&&(null===(i=t.error)||void 0===i||i.call(t,{api_error_code:e.api_error_code,code:e.code,message:e.message}))})).finally((()=>{var e;null===(e=t.complete)||void 0===e||e.call(t)}))};i?this.isLimitedLogin()?o({type:"connect"}):y({network:e,callbacks:{success:e=>o({type:"connect",data:e}),error:t.error,complete:t.complete},i18n:n,requestContext:this.requestContext}):o({type:"disconnect"})}}function P(){const e=(0,o.useDispatch)(),i=(0,l.B)(),t=(0,r.Z)();return(0,n.useMemo)((()=>new b({invalidateResource:(i,t)=>e((0,s.jB)(i,t)),requestContext:i,viewer:t})),[e,i,t])}},553171:(e,i,t)=>{t.d(i,{Z:()=>_});var n=t(231486);var o=t(643913),a=t(226198),r=t(966113),s=t(696157),l=t(826067),c=t(957161);const d="undefined"!=typeof window,u=d?`${window.location.origin}/oauth/line/redirect`:"";function _(e,i){var t;if(!d)return void(null===(t=i.error)||void 0===t||t.call(i,{message:"Window is undefined"}));let _;const p=function(e=5){const i="abcdefghijklmnopqrstuvwxyz1234567890";return new Array(e).fill("").map((()=>i[Math.floor(Math.random()*i.length)])).join("")}(10),h=async e=>{if(!e.isTrusted)return;const t=e instanceof MessageEvent?(({origin:e,data:i})=>i&&e===window.location.origin?String(i):null)(e):(({url:e,key:i})=>{if(!e.startsWith(window.location.origin)||i!==s.MM)return null;const t=(0,c.qn)(s.MM);return(0,c.L_)(s.MM),t})(e),r=(0,l.mB)(t);if(r.state&&r.code&&r.state===p){_&&!_.closed&&_.close();try{const e=await fetch("/oauth/line/verify",{headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","x-csrftoken":`${String(n.U2(a.fS))}`},method:"POST",body:(0,o.Z)({code:r.code,redirect_uri:u})}),t=await e.json(),{id_token:s,access_token:l}=t;var d;if(s&&l)i.success({line_id_token:s,line_access_token:l});else null===(d=i.error)||void 0===d||d.call(i,{message:"No tokens returned"})}catch(v){var m;null===(m=i.error)||void 0===m||m.call(i,v)}finally{var g;_&&!_.closed&&_.close(),window.removeEventListener("message",h),window.removeEventListener("storage",h),null===(g=i.complete)||void 0===g||g.call(i)}}};window.addEventListener("message",h),window.addEventListener("storage",h),_=window.open(`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${r.zal}&redirect_uri=${encodeURIComponent(u)}&state=${p}&ui_locales=${e}&scope=profile%20openid%20email`,"_blank")}},107193:(e,i,t)=>{t.r(i),t.d(i,{default:()=>u});var n=t(336882),o=t(935879),a=t(713930),r=t(6637),s=t(966113),l=t(539497);let c=!1;const d=(e,i,t="en-US",u)=>{u&&(0,l.dy)({event:"load_script_start",provider:"facebook"}),(0,a.Z)((0,o.Z)(t),"FACEBOOK").then((()=>{u&&(0,l.dy)({event:"load_script_success",provider:"facebook"});const t=window.FB;t?(c||(u&&(0,l.dy)({event:"initialize_library",provider:"facebook"}),t.init({appId:s.GHq,status:!0,version:"v2.2"}),FB.Event.subscribe("auth.statusChange",(()=>{(e=>e.isAuth&&!!e.facebookId&&!e.isLimitedLogin)(i)&&d((e=>{if(!e.getUserID())return;const i=e.getAccessToken();i&&r.Z.create("ApiResource",{url:"/v3/connect/facebook/",data:{facebook_token:i}}).callCreate({showError:!1})}),i)})),c=!0,window.fb_init=n.Z.FINISHED),e(t)):u&&(0,l.dy)({event:"global_object_not_found",provider:"facebook"})})),window.fb_init=n.Z.STARTED},u=d},935879:(e,i,t)=>{t.d(i,{Z:()=>n});const n=e=>`//connect.facebook.net/${(e=>{const i=e.replace(/-/g,"_");if(i.startsWith("es"))return"es_LA";if(i.startsWith("ar"))return"ar_AR";switch(i){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return i}})(e)}/sdk.js`},869503:(e,i,t)=>{t.d(i,{Z:()=>d});var n=t(939106),o=t(898781),a=t(349700),r=t(883119),s=t(785893);function l(){const e=(0,o.ZP)();return e.bt("Free delivery", "Free shipping", "closeup.product.shipping", undefined, true)}function c({freeShippingPrice:e}){const i=(0,o.ZP)();return(0,a.nk)(i.bt("Free delivery with {{ shippingPrice }}+", "Free shipping with {{ shippingPrice }}+", "closeup.product.shipping", undefined, true),{shippingPrice:e}).join("")}function d({customStyles:e,showPrevDot:i,freeShippingPrice:t,freeShippingValue:o}){const a=i?[""]:[],{color:d="subtle",size:u="200"}=e||{};return Number.isFinite(o)?(0===o?a.push((0,s.jsx)(l,{})):t&&a.push((0,s.jsx)(c,{freeShippingPrice:t})),0===a.length?null:(0,s.jsx)(r.xv,{color:d,size:u,children:(0,s.jsx)(n.Z,{color:d,items:a})})):null}},317254:(e,i,t)=>{t.d(i,{Z:()=>l});var n=t(969853),o=t(667294),a=t(276602),r=t(543059);var s=t(198462);function l({children:e,isAtEndOfFeed:i,pinData:t,itemCount:l,includeBackgroundImages:c=!1,includeVideos:d=!1,includeSections:u=!1}){var _;return(null===(_=(0,s.N5)())||void 0===_?void 0:_.isAuthenticated)||(u=!0),(0,n.Z)({pinData:t,isAtEndOfFeed:i,includeBackgroundImages:c,includeVideos:d,includeSections:u}),function(e){const i=(0,a.EV)(),t=(0,o.useRef)(null);(0,o.useEffect)((()=>{e!==t.current&&(t.current=e,i&&(0,r.ZP)(r.at))}),[!!i,e])}(l),e}},681227:(e,i,t)=>{function n(e){const i=Object.keys(e);if(i.length>0){return i.sort(((i,t)=>e[t]-e[i])).slice(0,3)}return null}function o(e){const i=Object.values(e);if(i.length>0){return i.reduce(((e,i)=>e+i),0)}return 0}function a(e,i){const{videos:t,is_downstream_promotion:n,is_promoted:o,story_pin_data_id:a,board:r}=e;return!(o||n||(!t||!t.id)&&!a||i||null!=r&&r.is_collaborative&&r.collaborated_by_me)}t.d(i,{At:()=>n,J6:()=>a,Ud:()=>o})},561195:(e,i,t)=>{t.d(i,{A:()=>l,Z:()=>c});var n=t(667294),o=t(498913),a=t.n(o),r=t(883119),s=t(785893);const l=({fill:e,width:i,color:t})=>{const o="half"===e?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(r.xu,{position:"absolute",children:(0,s.jsx)(r.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:12})}),(0,s.jsx)(r.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:12})]}):(0,s.jsx)(r.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:12});return(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},display:"inlineBlock","data-test-id":`rating-star-${e}`,children:o})};function c({max_rating:e,rating:i,width:t,color:o}){const r=[],c=function(e,i){return 5*(i=i<=e?i:e)/e}(parseFloat(e)||5,parseFloat(i)||0);if(Number.isNaN(c))return null;const d=Math.floor(c),u=c-d;return a()(d,(e=>r.push((0,s.jsx)(l,{color:o,fill:"full",width:t},e)))),u>=.75?r.push((0,s.jsx)(l,{color:o,fill:"full",width:t},r.length)):u>=.25&&r.push((0,s.jsx)(l,{color:o,fill:"half",width:t},r.length)),a()(5-r.length,(()=>r.push((0,s.jsx)(l,{color:o,fill:"empty",width:t},r.length)))),(0,s.jsx)(n.Fragment,{children:r})}},736688:(e,i,t)=>{t.d(i,{QO:()=>l,V3:()=>r,cO:()=>u,dn:()=>c,fP:()=>d,j1:()=>_,v_:()=>s});var n=t(841726),o=t(539497),a=t(623568);const r=e=>{const{thumbnail:i,url:t,width:n,height:o,duration:a}=e||{};return i&&t&&n&&o&&{thumbnail:i,url:t,width:n,height:o,duration:a}||void 0};function s(e,i){if(i&&i.products&&i.products[0]){const t=i.products[0],n=!(!t.name&&!e),a=!(!i.aggregate_rating||0===i.aggregate_rating.rating_count&&0===i.aggregate_rating.review_count||Number.isNaN(parseFloat(i.aggregate_rating.rating_value))),r=!(!t.offer_summary||!t.offer_summary.min_price&&!t.offer_summary.price),s=n&&(a||r);return(({isEligible:e,hasName:i,hasAggregateRating:t,hasOffers:n})=>{(0,o.My)("closeup_main_pin.leaf_snippet.is_product",{isEligible:e,hasName:i,hasAggregateRating:t,hasOffers:n})})({isEligible:s,hasName:n,hasAggregateRating:a,hasOffers:r}),s}return!1}const l=(e,{userName:i,fullName:t})=>{const n=i||"";return{"@type":"Person",name:t||n,url:e+"/"+n}};function c(e,i,t,o,a,r,s,l){t=t.trim(),i=i.trim();let c="";c=s&&l&&!i&&r&&s("seo_title_fallback_snippets_ffe").anyEnabled?i||r||t||o:i||t||o;const d=()=>i||a;if(!e||!e.metatags)return{title:c,description:t||d()};const{description:u=""}=e.metatags;var _;return{title:c,description:(_=u,(0,n.o)(_||"").trim())||d()}}const d=(e,i,t)=>{let n=i;return t?(n="recipe"===e?t.bt("Pinterest recipe", "Pinterest Recipe", "pin.closeup.leafsnippet.recipe", undefined, true):"howto"===e?t.bt("Pinterest how-to", "Pinterest How To", "pin.closeup.leafsnippet.howto", undefined, true):"video"===e?t.bt("Pinterest Video", "Pinterest Video", "pin.closeup.leafsnippet.video", undefined, true):"product"===e?t.bt("Pinterest product", "Pinterest Product", "pin.closeup.leafsnippet.product", undefined, true):t.bt("Pin page", "Pin page", "pin.closeup.leafsnippet.pin", undefined, true),{fallbackTitle:n,fallbackDescription:n}):{fallbackTitle:n,fallbackDescription:n}},u=e=>{if(!e)return;const i=e.rating_count,t=e.review_count;if(!(!!i||!!t)||Number.isNaN(parseFloat(e.rating_value)))return;const n=i||t;return{"@type":"AggregateRating",ratingValue:e.rating_value,ratingCount:n,bestRating:5,worstRating:1}},_=(e,i=!0)=>{var t,n,o,r;const s=!!(0,a.iR)(e.videos),l=i&&!!(0,a.cL)({embedSrc:null===(t=e.embed)||void 0===t?void 0:t.src,embedSubtype:null===(n=e.embed)||void 0===n?void 0:n.subtype,embedType:null===(o=e.embed)||void 0===o?void 0:o.type}),c=!(null===(r=e.story_pin_data)||void 0===r||!r.total_video_duration);return s||l||c}},53325:(e,i,t)=>{t.d(i,{$O:()=>s,GZ:()=>c,OE:()=>d,Xv:()=>l,Z0:()=>n,_z:()=>a,fM:()=>r,qA:()=>o,zX:()=>u});const n=40,o=4,a=106,r=133,s=.1,l=10,c=246,d=197,u=236},31149:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#EFEFEF"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1106 19.6408C18.2759 19.551 18.4653 19.5 18.6667 19.5H37.3333C37.5535 19.5 37.7594 19.561 37.9351 19.667C37.9351 19.667 37.9352 19.667 37.9352 19.667L28.7395 27.2024C28.3095 27.5547 27.6905 27.5547 27.2605 27.2024L18.0648 19.667C18.0799 19.6579 18.0951 19.6492 18.1106 19.6408ZM14 20.8611V20.6667C14 18.0893 16.0893 16 18.6667 16H37.3333C39.9107 16 42 18.0893 42 20.6667V20.8611V34.6667C42 37.244 39.9107 39.3333 37.3333 39.3333H18.6667C16.0893 39.3333 14 37.244 14 34.6667V20.8611ZM38.5 23.7292V34.6667C38.5 35.311 37.9777 35.8333 37.3333 35.8333H18.6667C18.0223 35.8333 17.5 35.311 17.5 34.6667V23.7292L25.0422 29.9095C26.7622 31.319 29.2378 31.319 30.9578 29.9096L38.5 23.7292Z",fill:"black"})]})}},659522:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("path",{d:"M56 28C56 12.536 43.464 0 28 0S0 12.536 0 28c0 13.975 10.24 25.56 23.625 27.66V36.094h-7.11V28h7.11v-6.169c0-7.017 4.18-10.893 10.576-10.893 3.064 0 6.268.546 6.268.546v6.891h-3.53c-3.479 0-4.564 2.159-4.564 4.373V28h7.766l-1.242 8.094h-6.524V55.66C45.761 53.56 56 41.975 56 28Z",fill:"#1877F2"}),(0,n.jsx)("path",{d:"M38.9 36.094 40.14 28h-7.765v-5.252c0-2.215 1.085-4.373 4.563-4.373h3.53v-6.89s-3.203-.547-6.267-.547c-6.396 0-10.576 3.876-10.576 10.893V28h-7.11v8.094h7.11V55.66a28.206 28.206 0 0 0 8.75 0V36.094h6.524Z",fill:"#fff"})]})}},331744:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("path",{d:"M28 56c15.464 0 28-12.536 28-28S43.464 0 28 0 0 12.536 0 28s12.536 28 28 28Z",fill:"#00B900"}),(0,n.jsx)("path",{d:"M46.625 26.32c0-8.335-8.354-15.115-18.625-15.115-10.267 0-18.625 6.78-18.625 15.115 0 7.471 6.627 13.73 15.578 14.91.606.13 1.432.401 1.642.92.187.47.122 1.208.06 1.684l-.265 1.596c-.08.471-.373 1.843 1.615 1.003 1.988-.835 10.724-6.314 14.634-10.812 2.693-2.964 3.986-5.969 3.986-9.3Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M24.215 22.293H22.91c-.201 0-.364.163-.364.364v8.115c0 .2.163.364.364.364h1.306c.2 0 .364-.163.364-.364v-8.12a.363.363 0 0 0-.364-.36ZM33.208 22.293H31.9c-.2 0-.364.163-.364.364v4.82l-3.72-5.02c-.009-.015-.018-.024-.027-.038l-.005-.005-.023-.023c-.005 0-.005-.005-.005-.005-.005-.005-.014-.01-.019-.014l-.009-.01c-.005-.004-.014-.008-.019-.013-.004-.005-.009-.005-.009-.005a.036.036 0 0 0-.019-.01c-.004 0-.009-.004-.009-.004-.005-.004-.014-.004-.019-.01-.004 0-.009-.004-.014-.004l-.023-.01c-.005 0-.01 0-.014-.004-.01 0-.014-.005-.019-.005h-.014c-.004 0-.014 0-.018-.004H26.212c-.2 0-.364.163-.364.364v8.115c0 .2.164.364.364.364h1.307c.2 0 .364-.163.364-.364v-4.82l3.724 5.03a.283.283 0 0 0 .093.089s.005 0 .005.005c.01.004.014.009.023.014.005 0 .005.004.01.004.004.005.01.005.018.01.005.004.01.004.02.009.004 0 .008.005.008.005.01.004.02.004.024.009h.004c.028.01.061.014.094.014h1.306c.201 0 .364-.163.364-.364v-8.125a.37.37 0 0 0-.368-.36ZM21.065 29.097h-3.551v-6.445c0-.2-.164-.364-.364-.364h-1.307c-.2 0-.364.163-.364.364v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306a.358.358 0 0 0-.359-.364ZM40.422 24.323c.201 0 .364-.163.364-.364v-1.307c0-.2-.163-.364-.364-.364h-5.217a.353.353 0 0 0-.252.103l-.005.005c0 .004-.004.004-.004.004a.373.373 0 0 0-.103.252v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55c.201 0 .364-.164.364-.364v-1.307c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55v.005Z",fill:"#00B900"})]})}},757146:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#fff"}),(0,n.jsx)("rect",{x:".5",y:".5",width:"55",height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4"}),(0,n.jsx)("path",{d:"M28 12c-9.012 0-16 6.604-16 15.52 0 4.664 1.912 8.696 5.024 11.48.26.232.42.56.428.912l.088 2.848c.028.908.964 1.5 1.796 1.132l3.176-1.4c.268-.12.572-.14.856-.064 1.46.4 3.012.616 4.632.616 9.012 0 16-6.604 16-15.52S37.012 12 28 12Z",fill:"url(#paint0_radial_3730_649)"}),(0,n.jsx)("path",{d:"m18.392 32.06 4.7-7.456a2.401 2.401 0 0 1 3.472-.64l3.74 2.804a.96.96 0 0 0 1.156-.004l5.048-3.832c.672-.512 1.552.296 1.104 1.012l-4.704 7.452a2.401 2.401 0 0 1-3.472.64l-3.74-2.804a.96.96 0 0 0-1.156.004l-5.048 3.832c-.672.512-1.552-.292-1.1-1.008Z",fill:"#fff"}),(0,n.jsx)("defs",{children:(0,n.jsxs)("radialGradient",{id:"paint0_radial_3730_649",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.16 43.826) scale(34.8672)",children:[(0,n.jsx)("stop",{stopColor:"#09F"}),(0,n.jsx)("stop",{offset:".61",stopColor:"#A033FF"}),(0,n.jsx)("stop",{offset:".935",stopColor:"#FF5280"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#FF7061"})]})})]})}},464240:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#1DA1F2"}),(0,n.jsx)("path",{d:"M24.34 42c11.37 0 17.591-9.429 17.591-17.591 0-.265 0-.53-.012-.796a12.596 12.596 0 0 0 3.087-3.207c-1.11.494-2.303.82-3.557.976a6.22 6.22 0 0 0 2.725-3.424 12.299 12.299 0 0 1-3.93 1.495 6.17 6.17 0 0 0-4.51-1.953 6.19 6.19 0 0 0-6.186 6.185c0 .483.06.953.157 1.411-5.136-.253-9.694-2.725-12.744-6.463a6.184 6.184 0 0 0-.832 3.111 6.2 6.2 0 0 0 2.749 5.148 6.254 6.254 0 0 1-2.797-.771v.084a6.196 6.196 0 0 0 4.955 6.065 6.028 6.028 0 0 1-1.628.217c-.397 0-.783-.036-1.157-.109a6.182 6.182 0 0 0 5.775 4.293 12.4 12.4 0 0 1-7.68 2.652c-.494 0-.989-.024-1.471-.084A17.587 17.587 0 0 0 24.34 42Z",fill:"#fff"})]})}},22641:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#25D366"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.206 16.65A15.75 15.75 0 0 0 27.99 12c-8.74 0-15.854 7.113-15.857 15.855a15.821 15.821 0 0 0 2.117 7.927L12 44l8.406-2.205a15.837 15.837 0 0 0 7.577 1.93h.007c8.74 0 15.853-7.114 15.856-15.857a15.76 15.76 0 0 0-4.64-11.218ZM27.99 41.047h-.005c-2.365 0-4.684-.636-6.708-1.837l-.482-.286-4.988 1.309 1.331-4.864-.313-.499a13.146 13.146 0 0 1-2.015-7.014c.003-7.266 5.915-13.178 13.185-13.178a13.09 13.09 0 0 1 9.318 3.865 13.098 13.098 0 0 1 3.856 9.324c-.003 7.267-5.915 13.18-13.179 13.18Zm7.23-9.871c-.397-.199-2.345-1.157-2.708-1.289-.364-.132-.628-.198-.891.198-.264.397-1.024 1.29-1.255 1.554-.231.264-.462.297-.858.099-.396-.199-1.673-.617-3.187-1.966-1.178-1.051-1.973-2.348-2.204-2.745-.231-.397-.024-.611.173-.808.178-.178.397-.463.595-.695.198-.23.264-.396.396-.66.132-.265.066-.496-.033-.695-.098-.198-.89-2.148-1.221-2.941-.322-.773-.649-.668-.892-.68a16.01 16.01 0 0 0-.759-.014c-.264 0-.693.099-1.057.495-.363.397-1.387 1.356-1.387 3.305 0 1.95 1.42 3.835 1.618 4.1.199.264 2.794 4.265 6.769 5.982.945.409 1.683.653 2.259.835.948.302 1.812.26 2.495.157.76-.114 2.344-.958 2.674-1.884.33-.925.33-1.719.23-1.884-.098-.166-.362-.266-.758-.464Z",fill:"#fff"})]})}},867060:(e,i,t)=>{t.d(i,{c:()=>n,y:()=>o});const n={10:13098,11:13099,6:13100,5:13101,14:13102,12:13103,15:13104,8:13105,4:13106,1:13107,18:13108,19:13109,20:13110,21:13111,22:13112,23:13113,26:13114,27:13115,29:13116},o={pin:1,board:2,did_it:6,pinner:3,user:3,today_article:8}},124364:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(898781),o=t(883119),a=t(785893);function r({height:e,isDenseView:i,rounding:t,width:r}){const s=(0,n.ZP)();return(0,a.jsx)(o.xu,{color:"default",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",rounding:t,overflow:"hidden",width:r,height:e,"data-test-id":"unavailable-pin",children:(0,a.jsxs)(o.kC,{direction:"column",alignItems:"center",children:[(0,a.jsx)(o.xu,{paddingY:i?2:4,children:(0,a.jsx)(o.JO,{accessibilityLabel:s.bt("Pin not available", "Pin not available", "story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel", undefined, true),color:"default",icon:"alert",size:20})}),(0,a.jsx)(o.xv,{weight:"bold",children:s.bt("Unavailable", "Unavailable", "story-pin.Closeup.UnavailableIdeaPin.Unavailable", undefined, true)}),!i&&(0,a.jsx)(o.xu,{paddingY:1,children:(0,a.jsx)(o.xv,{children:s.bt("Removed by the creator", "Removed by the creator", "story-pin.Closeup.UnavailableIdeaPin.Removed", undefined, true)})})]})})}},936776:(e,i,t)=>{t.d(i,{Z:()=>o});const n=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,o=e=>n.test(e)},927104:(e,i,t)=>{t.d(i,{Z:()=>n});const n=(e,i)=>e.length>i?e.substr(0,i-3).trim()+"":e},841726:(e,i,t)=>{t.d(i,{Z:()=>o,o:()=>n});function n(e,i){const t=(((i||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>|<!--[\s\S]*/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,((e,i)=>t.indexOf("<"+i.toLowerCase()+">")>-1?e:""))}const o=e=>e.replace(/(<([^>]+)>)/gi,"")},482981:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(784641);function o(e){const{article_creator_user:i,display_type:t,feed_source:o,header_pin_id:a,id:r,is_product_pin_feed:s,title:l,video_pin:c}=e;switch(t){case 0:case 1:return l?(0,n.T7)(o,null!=s&&s,l,r):"";case 8:return null!=i&&i.username?`/${encodeURIComponent(i.username)}/`:"";case 3:case 6:return a?`/pin/${a}/`:"";case 2:return null!=c&&c.id?`/pin/${c.id}/`:"";default:return""}}},207112:(e,i,t)=>{t.d(i,{Z:()=>s});var n=t(667294),o=t(883119),a=t(785893);class r extends n.Component{constructor(e){var i,t,o;super(e),o={manualTruncate:!1},(t="state")in(i=this)?Object.defineProperty(i,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[t]=o,this.ref=(0,n.createRef)()}componentDidMount(){const{maxHeightPx:e,shaveOptions:i={}}=this.props,n=this.ref&&this.ref.current;if(!n)return;const o=void 0===n.textContent?"innerText":"textContent",a=n[o];("boolean"!=typeof i.spaces||i.spaces?a.split(" "):a).length<2?this.setState({manualTruncate:!0}):t.e(14118).then(t.bind(t,448433)).then((({default:t})=>{t(n,e,i)}))}render(){const{maxWidthPx:e,maxHeightPx:i,inline:t=!1}=this.props,{manualTruncate:n}=this.state,r={maxWidth:e,maxHeight:i},s=t?{display:"inline",...r}:{...r};return n?(0,a.jsx)(o.xu,{overflow:"hidden",dangerouslySetInlineStyle:{__style:s},ref:this.ref,"data-test-id":"truncater",children:this.props.children}):(0,a.jsx)(o.xu,{ref:this.ref,dangerouslySetInlineStyle:{__style:s},"data-test-id":"truncater",children:this.props.children})}}const s=r},948618:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(883119),o=t(785893);function a({ariaHidden:e=!1,color:i="darkGray",size:t}){return(0,o.jsx)("span",{"aria-hidden":e,style:{padding:"0 4px"},children:(0,o.jsx)(n.xv,{color:i,inline:!0,size:null!=t?t:"200",children:""})})}},939106:(e,i,t)=>{t.d(i,{Z:()=>l});var n=t(667294),o=t(948618),a=t(883119),r=t(785893);function s(e){return null!=e}function l({additionalPadding:e,color:i="darkGray",inline:t,items:l}){const c=e?(0,r.jsx)("span",{style:{padding:`0 ${4*e}px`},children:(0,r.jsx)(o.Z,{color:i})}):(0,r.jsx)(o.Z,{color:i}),d=l.filter(s).reduce(((e,i,t)=>[...e,0!==t?c:null,i]),[]).filter(s).map(((e,i)=>(0,r.jsx)(n.Fragment,{children:e},i)));return 0===d.length?null:t?(0,r.jsx)(a.xu,{children:d}):(0,r.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:d})}},357787:(e,i,t)=>{t.d(i,{Z:()=>d});var n=t(667294),o=t(973935),a=t(785893);function r(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const s=new Map;let l=null;const c=e=>{e.forEach((e=>{const i=s.get(e.target);i&&i(e)}))},d=e=>{class i extends n.Component{constructor(...e){super(...e),r(this,"seen",!1),r(this,"enter",(e=>{const i=e.intersectionRatio>0||e.isIntersecting;this.seen=i,this.seen&&this.props.onVisibilityChanged(!0)})),r(this,"leave",(()=>{const e=this._node;e&&(e=>s.has(e))(e)&&this.seen&&(this.props.onVisibilityChanged(!1),this.seen=!1)})),r(this,"observe",(e=>{try{this._node=o.findDOMNode(this)}catch(n){return}if(!this._node)return;const{inAdsDesktopVideoExperiment:i}=this.props,t=this._node;((e,i="-64px 0px 0px 0px",t)=>{const n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:i,threshold:[0,.5,1]};l=l||new window.IntersectionObserver(c,n),s.set(e,t),l.observe(e)})(t,e,(e=>{if(!s.has(t))return;const n=i?e.intersectionRatio>=.5:e.intersectionRatio>0||e.isIntersecting,o=this.props.trackFullVisible?e.intersectionRatio>=1:n,a=this.props.trackFullVisible?0===e.intersectionRatio:!o;!this.seen&&o?this.enter(e):this.seen&&a&&this.leave()}))}))}componentDidMount(){const{rootMargin:e}=this.props;this.observe(e)}componentWillUnmount(){const e=this._node;e&&(this.leave(),(e=>{l.unobserve(e),s.delete(e)})(e))}render(){return(0,a.jsx)(e,{...this.props})}}return r(i,"displayName",`DeprecatedWithVisibilityChanged(${e.displayName||e.name})`),i}},46584:(e,i,t)=>{t.d(i,{Z:()=>s});var n=t(667294);const o=new Map;let a=null;const r=e=>{e.forEach((e=>{const i=o.get(e.target);i&&i(e)}))};function s({onVisibilityChanged:e,inAdsDesktopVideoExperiment:i,trackFullVisible:t,rootMargin:s}){const l=(0,n.useRef)(null);let c=!1;const d=()=>{var i;l.current instanceof HTMLElement&&(i=l.current,o.has(i))&&(c&&(e(!1),c=!1))},u=(0,n.useCallback)((n=>{l.current instanceof HTMLElement&&((e,i="-64px 0px 0px 0px",t)=>{const n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:i,threshold:[0,.5,1]};a=a||new window.IntersectionObserver(r,n),o.set(e,t),a.observe(e)})(l.current,n,(n=>{if(!o.has(l.current))return;const a=i?n.intersectionRatio>=.5:n.intersectionRatio>0||n.isIntersecting,r=t?n.intersectionRatio>=1:a,s=t?0===n.intersectionRatio:!r;!c&&r?(i=>{const t=i.intersectionRatio>0||i.isIntersecting;c=t,c&&e(!0)})(n):c&&s&&d()}))}),[l.current]);return(0,n.useEffect)((()=>(u(s),()=>{var e;l.current instanceof HTMLElement&&(d(),e=l.current,a.unobserve(e),o.delete(e))})),[u]),l}},964082:(e,i,t)=>{function n(e,i){const{organicVideosAutoplaying:t,promotedVideosAutoplaying:n}=i,o={...t,...n};for(const a in o){const{paused:i}=o[a];if(a!==e&&!i)return!1}return!0}t.d(i,{Z:()=>n})},36971:(e,i,t)=>{function n(e,i){const{organicVideosAutoplaying:t,promotedVideosAutoplaying:n}=i,o={...t,...n};return o[e]&&o[e].currentTime}t.d(i,{Z:()=>n})},428258:(e,i,t)=>{t.d(i,{Z:()=>a,t:()=>o});const n=()=>{var e,i;const t="undefined"!=typeof window?null===(e=window.navigator)||void 0===e||null===(i=e.connection)||void 0===i?void 0:i.effectiveType:void 0;let n,o=null===(a=window)||void 0===a||!a.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x";var a;return t?"4g"===t?n="40-80":(o="1x",n="0-1"):n="unknown",{downloadSpeedGroup:n,screenDimension:o}};function o(e){const{downloadSpeedGroup:i,screenDimension:t}=n(),o={"1x":e.V_EXP3,"2x":e.V_EXP5},a={"1x":e.V_EXP7,"2x":e.V_EXP7};return{unknown:o,"0-1":o,"1-5":{"1x":e.V_EXP4,"2x":e.V_EXP5},"5-10":{"1x":e.V_EXP5,"2x":e.V_EXP5},"10-20":{"1x":e.V_EXP6,"2x":e.V_EXP6},"20-40":a,"40-80":a,"80_or_above":a}[i][t]||e.V_720P||void 0}function a(e){const{video_list:i={}}=e,t=o(i),n=i.V_HLSV3_MOBILE||void 0;return t?{hlsv3:n,mp4:t}:{hlsv3:n}}},868565:(e,i,t)=>{function n(e){const i=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return i?i.V_HLSV3_MOBILE||i.V_HLSV4||i.V_720P:null}t.d(i,{Z:()=>n})},463045:(e,i,t)=>{function n(e,i){const{organicVideosAutoplaying:t,promotedVideosAutoplaying:n}=i,o={...t,...n};return!!o[e]&&!o[e].paused}t.d(i,{Z:()=>n})},905723:(e,i,t)=>{t.d(i,{Z:()=>n});const n={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},229428:(e,i,t)=>{function n(e){return e.filter((e=>e.is_stela))}function o(e){return e.filter((e=>!!e.label))}t.d(i,{k:()=>n,m:()=>o})},869899:(e,i,t)=>{t.r(i),t.d(i,{RoleBasedAccessControlProvider:()=>x,useRoleBasedAccessControlContext:()=>f});var n=t(667294),o=t(389643),a=t(784590),r=t(19121),s=t(773285),l=t(425288),c=t(70061);const d=e=>{const i={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&("object"!=typeof e[t]||null===e[t]||Array.isArray(e[t])?i[(0,c.Z)(t)]=e[t]:i[(0,c.Z)(t)]=d(e[t]));return i},u=(e,i)=>{const t=[];for(const a in e)a!==i&&t.push({id:a,...d(e[a])});const n=t.sort((({user:{businessName:e}},{user:{businessName:i}})=>e.localeCompare(i))),o=new Map;for(const a of n)o.set(a.id,a);return o};var _=t(622096);const p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,i)=>{switch(i.type){case"LOAD_PROFILES":return{...e,profiles:i.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:i.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:i.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:i.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:i.payload};default:return e}},m=e=>{const[i,t]=(0,n.useReducer)(h,p),o=(({dispatch:e,isEnabled:i,state:t})=>{const{orbacVisibility:o,disableProfileChanger:a,headerVisible:r}=t;return{changeProfile:(0,n.useCallback)((t=>{i&&e({type:"SET_ACTIVE_PROFILE",payload:t})}),[i,e]),toggleORBACVisibility:(0,n.useCallback)((t=>{i&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=t?t:!o})}),[i,e,o]),toggleDisableProfileChanger:(0,n.useCallback)((t=>{i&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=t?t:!a})}),[i,e,a]),toggleHeaderVisibility:(0,n.useCallback)((t=>{i&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=t?t:!r})}),[i,e,r])}})({dispatch:t,isEnabled:e,state:i}),{activeProfile:a,orbacVisibility:r}=i;(0,n.useEffect)((()=>{const e=(0,_.qn)("orbacActiveProfile",!1);e&&t({type:"SET_ACTIVE_PROFILE",payload:e})}),[]),(0,n.useEffect)((()=>{const e=(0,_.qn)("orbacVisibilty",!1);e&&t({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})}),[]),(0,n.useEffect)((()=>{(0,_.Nh)("orbacVisibility",r)}),[r]),(0,n.useEffect)((()=>{(0,_.Nh)("orbacActiveProfile",a)}),[a]);return{state:i,actions:o,receiveProfiles:(0,n.useCallback)(((e,i)=>{t({type:"LOAD_PROFILES",payload:u(e,i)})}),[t])}};var g=t(785893);const{Provider:v,useMaybeHook:f}=(0,l.Z)("RoleBasedAccessControlContext"),x=({children:e})=>{const{checkExperiment:i}=(0,s.F)(),t=(0,r.Z)(),l=Boolean(t.isAuth&&t.isPartner&&i("web_m10n_business_access_orbac_www").anyEnabled),{state:c,actions:d,receiveProfiles:u}=m(l),{activeProfile:_,headerVisible:p,profiles:h=[]}=c,f=h?Array.from(h.values()):[],x=(0,o.Z)(f),y=!!(t.isAuth&&f.length>0)&&x,b=t.isAuth?t.id:"",P=t.isAuth?t.username:"",{changeProfile:w,toggleORBACVisibility:S,toggleDisableProfileChanger:I,toggleHeaderVisibility:T}=d;(0,n.useEffect)((()=>{l&&("string"!=typeof x?_||w(b):w(x))}),[x,b,l,w,_]),(0,n.useEffect)((()=>{l&&(y&&!p&&T(!0),!y&&p&&T(!1))}),[T,y,l,p,h]);const{data:E}=(0,a.Z)(l?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),A=null==E?void 0:E.profiles;let C;t&&t.isAuth&&c.activeProfile===t.id?C={id:t.id,permissions:["OWNER"],user:{username:P,businessName:t.fullName,imgUrl:t.imageSmallUrl}}:_&&c.profiles&&(C=c.profiles.get(_)),(0,n.useEffect)((()=>{A&&u(A,b)}),[u,A,b]);const j=c.profiles?Array.from(c.profiles.values()):[];return(0,g.jsx)(v,{value:{profiles:j,headerVisible:c.headerVisible,activeProfile:C,changeProfile:w,toggleORBACVisibility:S,toggleDisableProfileChanger:I,toggleHeaderVisibility:T},children:e})}},717615:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(389643),o=t(773285),a=t(869899);const r=()=>{const{checkExperiment:e}=(0,o.F)(),i=(0,a.useRoleBasedAccessControlContext)(),{activeProfile:t}=i||{},r=e("web_m10n_business_access_orbac_www").anyEnabled,s=(0,n.Z)((null==i?void 0:i.profiles)||[]),{anyEnabled:l}=e("useorbacroutematcher_in_useorbacactingas");return r?l&&!s?Object.freeze({}):t&&(t.viewerMeetsMfaRequirement||(t.permissions||[]).includes("OWNER"))?t:Object.freeze({}):Object.freeze({})}},389643:(e,i,t)=>{t.d(i,{Z:()=>l});var n=t(702664),o=t(19121),a=t(773285),r=t(53987),s=t(276775);const l=e=>{var i;const t=(0,s.useLocation)(),l=(0,o.Z)(),{anyEnabled:c}=(0,a.F)().checkExperiment("web_m10n_business_access_orbac_www"),d=(0,s.useRouteMatch)("/:username"),u=null==d||null===(i=d.params)||void 0===i?void 0:i.username,_=(0,s.useRouteMatch)("/pin/:id"),p=(0,n.useSelector)((e=>{var i,t,n,o;return!(null==_||null===(i=_.params)||void 0===i||!i.id)&&(null==e||null===(t=e.pins)||void 0===t||null===(n=t[_.params.id])||void 0===n||null===(o=n.pinner)||void 0===o?void 0:o.id)}));if((0,r.ej)(t))return!1;if((0,r.RU)(t))return!0;if((0,r.mY)(t))return c;const h=e.concat(l.isAuth?{user:{username:l.username},id:l.id}:{}).find((e=>{const{user:i={},id:t}=e||{},{username:n}=i;return!!(n&&u||p&&t)&&(n===u||p===t)}));return!!h&&h.id}},231947:(e,i,t)=>{t.d(i,{D3:()=>c,DX:()=>s,KY:()=>d,Ms:()=>n,N1:()=>u,_P:()=>r,lJ:()=>a,nl:()=>o,q6:()=>l});const n=(e,i)=>{let t=e&&e.isAuth?e.username:"";return e&&i&&i.user&&i.user.username&&(t=i.user.username),t},o=(e,i)=>Boolean(i&&i.user&&e&&e.isAuth&&i.id!==e.id?i.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),a=(e,i)=>e&&e.isAuth&&i&&i.id&&i.id!==e.id?i.id:"",r=(e,i,t)=>{var n;return t&&t.user&&i&&i.isAuth&&t.id!==i.id?t.user.merchantId:null===(n=e.advertiser)||void 0===n?void 0:n.merchant_id},s=(e,i,t)=>t&&t.user&&e.isAuth&&t.id!==e.id?t.user.scheduledPinCount||0:e.isAuth&&i&&i.scheduled_pin_count||0,l=(e,i,t)=>!!(e&&e.isAuth&&t&&t.id&&t.id!==e.id&&t.id===i),c=(e,i,t)=>!!(l(e,i,t)||e&&e.isAuth&&i===e.id),d=(e,i,t)=>{const n=i&&i.owner&&i.owner.id||"";return c(e,n,t)};function u(e,i,t){const n=i?i.id:"";return c(e,n,t)}},698447:(e,i,t)=>{t.d(i,{Z:()=>s});var n=t(605707),o=t(883119),a=t(785893);const r={chip:{marginRight:1,flex:"1 1 0"},chipInner:{paddingBottom:"100%"},chipContainer:{marginRight:-1}};function s({pin:e,enableCloseupLink:i}){const{aggregated_pin_data:t}=e,{pin_tags_chips:s}=t||{},l=s&&s.length>=3?s.slice(0,3):[];return(0,a.jsx)(o.xu,{display:"flex",dangerouslySetInlineStyle:{__style:r.chipContainer},children:l.map((t=>{var s,l,c,d;const u=(null===(s=t.images)||void 0===s?void 0:s["750x"])||{},_=(0,a.jsx)(o.Ee,{alt:"",fit:"cover",naturalHeight:null!==(l=u.height)&&void 0!==l?l:1,naturalWidth:null!==(c=u.width)&&void 0!==c?c:1,role:"presentation",src:null!==(d=u.url)&&void 0!==d?d:""});return(0,a.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:r.chip},"data-test-id":"collageChip",children:(0,a.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:r.chipInner},position:"relative",children:(0,a.jsx)(o.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,children:(0,a.jsx)(o.zd,{height:"100%",wash:!0,width:"100%",children:i?(0,a.jsx)(n.Z,{sizing:"fullSize",collageChipId:t.id,pin:e,children:_}):_})})})},t.id)}))})}},542563:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(667294),o=t(407043),a=t(946595);function r(e,i){const{logContextEvent:t}=(0,o.v)(),{componentType:r,contextLogData:s,viewParameter:l,viewType:c}=(0,a.E)(),{aux_data:d,view_type:u,view_parameter:_,component:p,clientTrackingParams:h,...m}=null!=i?i:{};return(0,n.useCallback)((()=>{t({event_type:e,view_type:u||c,view_parameter:_||l,component:p||r,clientTrackingParams:h,...m,aux_data:{...d,...s}})}),[t,d,h,m,_,u,p,r,s,e,l,c])}},423217:(e,i,t)=>{t.d(i,{X:()=>o,Z:()=>a});var n=t(667294);const o=120;function a(e,i=0,t=o){const[a,r]=(0,n.useState)(e?"active":"inactive");return(0,n.useEffect)((()=>{if(!e){const e=setTimeout((()=>r("inactive")),t);return()=>{clearTimeout(e)}}if(i){const e=setTimeout((()=>r("active")),i);return()=>{clearTimeout(e)}}r("active")}),[e]),a}},639758:(e,i,t)=>{t.d(i,{Z:()=>c});var n=t(898781),o=t(883119),a=t(785893);const r={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},s={__path:"M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},l={overlay:{__style:{backgroundColor:"#000"}}};function c({backgroundImage:e,naturalHeight:i,naturalWidth:t,onRestartVideo:c,pinTitle:d,pin:u}){const _=(0,n.ZP)(),{id:p}=u;return(0,a.jsxs)(o.Ee,{alt:d||_.bt("Pin image", "pin image", "image of a pin", undefined, true),naturalHeight:i,naturalWidth:t,src:e,children:[(0,a.jsx)(o.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.8,dangerouslySetInlineStyle:l.overlay}),(0,a.jsxs)(o.xu,{justifyContent:"center",direction:"column",display:"flex",position:"absolute",height:"100%",width:"100%","data-test-id":`video-end-card-${p}`,children:[(0,a.jsx)(o.iP,{rounding:2,children:(0,a.jsxs)(o.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,a.jsx)(o.JO,{accessibilityLabel:_.bt("Visit site", "Visit site", "Button when pressed goes to pin's website", undefined, true),color:"light",dangerouslySetSvgPath:s,size:25}),(0,a.jsx)(o.xu,{margin:1}),(0,a.jsx)(o.xv,{color:"light",lineClamp:1,weight:"bold",children:_.bt("Visit site", "Visit site", "Button when pressed goes to pin's website", undefined, true)})]})}),(0,a.jsx)(o.xu,{margin:3}),(0,a.jsx)(o.iP,{onTap:c,rounding:2,children:(0,a.jsxs)(o.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,a.jsx)(o.JO,{accessibilityLabel:_.bt("Watch again", "Watch again", "Button when pressed restarts the video", undefined, true),color:"light",dangerouslySetSvgPath:r,size:25}),(0,a.jsx)(o.xu,{margin:1}),(0,a.jsx)(o.xv,{color:"light",lineClamp:1,weight:"bold",children:_.bt("Watch again", "Watch again", "Button when pressed restarts the video", undefined, true)})]})})]})]})}},758523:(e,i,t)=>{t.d(i,{$:()=>a,B:()=>o});var n=t(425288);const{Provider:o,useHook:a}=(0,n.Z)("SurfaceContext",{surface:"Unknown"})},946595:(e,i,t)=>{t.d(i,{B:()=>o,E:()=>a});var n=t(425288);const{Provider:o,useHook:a}=(0,n.Z)("trackingParametersContext")},605707:(e,i,t)=>{t.d(i,{Z:()=>_});var n=t(66699),o=t(898781),a=t(287072),r=t(35495),s=t(883119),l=t(407043),c=t(243943),d=t(946595),u=t(785893);function _({sizing:e="default",children:i,collageChipId:t,componentType:_,contextLogData:p,elementType:h,pin:m,viewParameter:g,viewType:v}){const f=(0,o.ZP)(),{logContextEvent:x}=(0,l.v)(),y=(0,d.E)(),{carousel_data:b,id:P}=m;let w,S=`/pin/${t||P}/`;const I=(0,c.Xx)();if(null!=I&&I.variantUrl&&(S=`/pin/${I.variantUrl}/`),b){const{carousel_slots:e=[],id:i,index:t=0}=b;S=`/pin/${P}/`,w={carousel_slot_id:e[t]&&e[t].id,carousel_data_id:i,carousel_slot_index:t}}w={...w||{},...(0,r.Kl)(m,p)||{}};const T=(0,a.Z)({href:S,externalData:{auxData:w,pin:m}});return(0,u.jsx)(s.iP,{accessibilityLabel:(0,n.Z)(f.bt("{{ pinTitle }} Pin page", "{{ pinTitle }} pin page", "pinRep.closeupLink.tapArea.accessibilityLabel", undefined, true),{pinTitle:m.grid_title||m.title||m.description||""}),mouseCursor:"zoomIn",rounding:2,onTap:({event:e,dangerouslyDisableOnNavigation:i})=>{i(),x({event_type:101,component:_||y.componentType,element:h,object_id_str:P,view_type:v||y.viewType,view_parameter:g||y.viewParameter,aux_data:{...p,...(0,r.Kl)(m,p)||{}}}),x({event_type:8948,view_type:v||y.viewType,view_parameter:g||y.viewParameter,component:_||y.componentType,element:h,object_id_str:P,aux_data:{closeup_navigation_type:"click",...p,...(0,r.Kl)(m,p)||{}}}),T({event:e})},fullWidth:"fullSize"===e,fullHeight:"fullSize"===e,href:S,role:"link",children:i})}},31658:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(883119),o=t(785893);function a({children:e,additionalStyles:i={}}){return(0,o.jsx)(n.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...i}},"data-test-id":"contentLayer",children:e})}},969956:(e,i,t)=>{t.d(i,{Z:()=>P});var n=t(667294),o=t(499128),a=t(898781),r=t(883119),s=t(785893);function l(e){const i=(0,a.ZP)(),{onHide:t}=e,n=(0,s.jsx)(r.xv,{children:i.bt("Thank you for helping improve signal detection on Pinterest.", "Thank you for helping improve signal detection on Pinterest!", "pinRep.actionBar.signalDetector.toast", undefined, true)});return(0,s.jsx)(o.ZP,{onHide:t,text:n})}var c=t(6637),d=t(19121),u=t(343341);const _=function({anchor:e,onDismiss:i,pinId:t,signals:o}){const _=(0,a.ZP)(),[p,h]=(0,n.useState)(0),m=(0,d.Z)(),{showOneToast:g}=(0,u.F9)();if(!m.isEmployee)return null;const v=o.map((({signal_message:e})=>({href:"#",text:null!=e?e:""}))),{background_color:f,icon_url:x,signal_id:y,signal_message:b}=o[p];return(0,s.jsx)(r.mh,{children:(0,s.jsx)(r.J2,{anchor:e,idealDirection:"right",onDismiss:i,positionRelativeToAnchor:!1,size:"lg",children:(0,s.jsxs)(r.xu,{padding:4,width:"100%",children:[o.length>1&&(0,s.jsx)(r.xu,{overflow:"scrollX",padding:1,marginBottom:4,children:(0,s.jsx)(r.mQ,{activeTabIndex:p,onChange:({event:e,activeTabIndex:i,dangerouslyDisableOnNavigation:t})=>{t(),(({activeTabIndex:e,event:i})=>{i.preventDefault(),h(e)})({activeTabIndex:i,event:e})},tabs:v})}),(0,s.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(0,s.jsx)(r.X6,{size:"400",children:_.bt("Signal detected:", "Signal detected:", "pinRep.actionBar.signalDetector.header", undefined, true)})}),(0,s.jsx)(r.xu,{paddingY:3,children:(0,s.jsxs)(r.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",children:[(0,s.jsx)(r.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:x?(0,s.jsx)(r.Ee,{alt:_.bt("Signal display", "Signal display", "pinRep.actionBar.signalDetector.signalAsset", undefined, true),color:"white",naturalHeight:1,naturalWidth:1,src:x}):(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:f}},height:40,width:40})}),(0,s.jsx)(r.xv,{size:"200",children:b})]})}),(0,s.jsx)(r.xu,{marginBottom:3,children:(0,s.jsx)(r.xv,{size:"200",children:_.bt("If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "pinRep.actionBar.signalDetector.instructions", undefined, true)})}),(0,s.jsxs)(r.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"start",children:[(0,s.jsx)(r.zx,{fullWidth:!0,color:"red",size:"md",text:_.bt("Send for review", "Send for review", "pinRep.actionBar.signalDetector.button.review", undefined, true),onClick:()=>{const e={pin_id:t,signal_id:y,user:m.id};c.Z.create("SignalReviewRequestResource",e).callCreate(),i(),g((({hideToast:e})=>(0,s.jsx)(l,{onHide:e})))}}),(0,s.jsx)(r.zx,{fullWidth:!0,color:"gray",size:"md",text:_.bt("Cancel", "Cancel", "pinRep.actionBar.signalDetector.button.cancel", undefined, true),onClick:i})]})]})})})};var p=t(241244),h=t(319915),m=t(947599),g=t(215292);function v({signals:e,pinId:i}){const{background_color:t,icon_url:o,signal_message:a}=e[0],[l,c]=(0,n.useState)(!1),d=(0,n.useRef)();return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(h.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,s.jsx)(m.Z,{children:(0,s.jsx)(r.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,s.jsx)(p.Z,{children:(0,s.jsx)(g.q,{children:({hovered:e,onMouseEnter:i,onMouseLeave:n})=>(0,s.jsx)(r.iP,{onTap:()=>c((e=>!e)),rounding:"pill",onMouseEnter:i,onMouseLeave:n,children:(0,s.jsxs)(r.xu,{color:e?"dark":"transparentDarkGray",rounding:"pill",display:"flex",alignItems:"center",padding:3,ref:d,children:[(0,s.jsx)(r.xu,{display:"flex",width:24,height:24,rounding:"circle",color:"default",marginEnd:1,justifyContent:"center",alignItems:"center",children:(0,s.jsx)(r.xu,{width:20,height:20,rounding:"circle",overflow:"hidden",children:(0,s.jsx)(r.Ee,{alt:"",color:t,src:null!=o?o:"",naturalHeight:1,naturalWidth:1})})}),(0,s.jsx)(r.xv,{color:"inverse",size:"200",weight:"bold",children:a})]})})})})})})}),l&&d&&d.current&&(0,s.jsx)(_,{anchor:d.current,onDismiss:()=>c(!1),pinId:i,signals:e})]})}const f=({signal:e,anchor:i,setShowFlyout:t,setStore:n})=>{var o;const{hovered:a,onMouseEnter:l,onMouseLeave:c}=(0,g.Z)();return(0,s.jsx)(r.iP,{onTap:()=>(e=>{t((e=>!e)),n(e)})(e),rounding:"pill",onMouseEnter:l,onMouseLeave:c,children:(0,s.jsxs)(r.xu,{color:a?"dark":"transparentDarkGray",rounding:"pill",display:"flex",alignItems:"center",padding:3,ref:i,children:[(0,s.jsx)(r.xu,{display:"flex",minWidth:24,height:24,rounding:"circle",marginEnd:1,color:"default",justifyContent:"center",alignItems:"center",children:(0,s.jsx)(r.xu,{width:20,height:20,rounding:"circle",overflow:"hidden",children:(0,s.jsx)(r.Ee,{alt:"",color:e.background_color,src:null!==(o=e.icon_url)&&void 0!==o?o:"",naturalHeight:1,naturalWidth:1})})}),(0,s.jsx)(r.xv,{color:"inverse",size:"200",weight:"bold",children:e.signal_message})]})})};const x=function({anchor:e,onDismiss:i,pinId:t,signal:n}){const o=(0,a.ZP)(),_=(0,d.Z)(),{showOneToast:p}=(0,u.F9)();if(!_.isEmployee)return null;const{background_color:h,icon_url:m,signal_id:g,signal_message:v}=n;return(0,s.jsx)(r.mh,{children:(0,s.jsx)(r.J2,{anchor:e,idealDirection:"right",onDismiss:i,positionRelativeToAnchor:!1,size:"lg",children:(0,s.jsxs)(r.xu,{padding:4,width:"100%",children:[(0,s.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(0,s.jsx)(r.X6,{size:"400",children:o.bt("Signal detected:", "Signal detected:", "pinRep.actionBar.signalDetector.header", undefined, true)})}),(0,s.jsx)(r.xu,{paddingY:3,children:(0,s.jsxs)(r.kC,{alignItems:"center",gap:2,justifyContent:"center",children:[(0,s.jsx)(r.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:m?(0,s.jsx)(r.Ee,{alt:o.bt("Signal display", "Signal display", "pinRep.actionBar.signalDetector.signalAsset", undefined, true),color:"white",naturalHeight:1,naturalWidth:1,src:m}):(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:h}},height:40,width:40})}),(0,s.jsx)(r.xv,{size:"200",children:v})]})}),(0,s.jsx)(r.xu,{marginBottom:3,children:(0,s.jsx)(r.xv,{size:"200",children:o.bt("If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "pinRep.actionBar.signalDetector.instructions", undefined, true)})}),(0,s.jsxs)(r.kC,{alignItems:"center",gap:2,justifyContent:"start",children:[(0,s.jsx)(r.zx,{fullWidth:!0,color:"red",size:"md",text:o.bt("Send for review", "Send for review", "pinRep.actionBar.signalDetector.button.review", undefined, true),onClick:()=>{const e={pin_id:t,signal_id:g,user:_.id};c.Z.create("SignalReviewRequestResource",e).callCreate(),i(),p((({hideToast:e})=>(0,s.jsx)(l,{onHide:e})))}}),(0,s.jsx)(r.zx,{fullWidth:!0,color:"gray",size:"md",text:o.bt("Cancel", "Cancel", "pinRep.actionBar.signalDetector.button.cancel", undefined, true),onClick:i})]})]})})})};function y({signals:e,pinId:i}){const[t,o]=(0,n.useState)(!1),a=(0,n.useRef)(null),[l,c]=(0,n.useState)(e[0]);return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(h.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,s.jsx)(m.Z,{children:(0,s.jsx)(r.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,s.jsx)(p.Z,{children:(0,s.jsx)(r.kC,{alignItems:"stretch",justifyContent:"start",children:e.map((e=>(0,s.jsx)(r.xu,{marginEnd:2,children:(0,s.jsx)(f,{signal:e,anchor:a,setShowFlyout:o,setStore:c})},e.signal_id)))})})})})}),t&&(0,s.jsx)(x,{anchor:a.current,onDismiss:()=>o(!1),pinId:i,signal:l})]})}var b=t(276775);function P({pin:e}){const i=(0,d.Z)(),{search:t}=(0,b.useLocation)(),o=(0,n.useMemo)((()=>new URLSearchParams(t)),[t]);if(!i.isEmployee)return null;const{id:a,deb_ads:r,deb_content_quality:l,deb_inclusive_product:c,deb_shopping:u,deb_trust_and_safety:_}=e;if(r)return(0,s.jsx)(v,{pinId:a,signals:r});if(l)return(0,s.jsx)(v,{pinId:a,signals:l});if(c){if("skin_tone"===o.get("type")){const e=c.filter((e=>"visual_signals_hair_pattern_v1"!==e.signal_id));return(0,s.jsx)(y,{pinId:a,signals:e})}{const e=c.filter((e=>"visual_body_analyses_v2_0"!==e.signal_id));return(0,s.jsx)(y,{pinId:a,signals:e})}}return u?(0,s.jsx)(v,{pinId:a,signals:u}):_?(0,s.jsx)(v,{pinId:a,signals:_}):null}},123987:(e,i,t)=>{t.d(i,{Z:()=>s});var n=t(883119),o=t(423217),a=t(785893);function r(e,i){return{hidden:{opacity:0,transition:i?`opacity ${i}ms ease`:void 0},visible:{opacity:1,transition:e?`opacity ${e}ms ease`:void 0}}}function s({children:e,fadeInDuration:i=0,fadeOutDuration:t=o.X,visibility:s}){return"none"!==s&&e?(0,a.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:r(i,t)[s]},children:e}):null}},472231:(e,i,t)=>{t.d(i,{ZP:()=>g});var n=t(667294),o=t(31658),a=t(898781),r=t(55275),s=t(310227),l=t(407043),c=t(883119),d=t(785893);const u={base:{transition:"all 250ms",opacity:0},blurred:{backgroundPosition:"50% 50%",backgroundSize:"cover",borderRadius:s.Oc,filter:"blur(10px)",opacity:1}},_={base:{transition:"all 250ms"},blurred:{backgroundColor:"rgba(0,0,0,0.6)"}},p={base:{opacity:0,transition:"all 250ms"},visible:{opacity:1}},h=["followed","related","search"],m=["pfy","pfyBoard"];function g({feedbackType:e,isHomefeedTunerVariantExp:i,pin:t,hideContents:g=!1}){var v;const{logContextEvent:f}=(0,l.v)(),x=(0,a.ZP)(),[y,b]=(0,n.useState)(!1),[P,w]=(0,n.useState)(!1);(0,n.useEffect)((()=>b(!0)),[]);const S=()=>w(!0),{feedbackText:I,images:T,showFeedbackOverlay:E,undoAction:A,undoText:C}=t,j=T&&(null===(v=T["236x"])||void 0===v?void 0:v.url),{image:k,subTitle:R,title:O,unfollow:z}=null!=I?I:{},D=!h.includes(e),N=m.includes(e),B=()=>{f({event_type:101,view_type:1,view_parameter:92,element:11347})};return(0,d.jsxs)(c.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{borderRadius:s.Oc}},"data-test-id":"obscured-overlay",overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:[(0,d.jsxs)(c.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:s.Oc}},margin:-4,overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:[j&&(0,d.jsx)(o.Z,{additionalStyles:{...u.base,...y?u.blurred:{},backgroundImage:`url("${j}")`}}),(0,d.jsx)(o.Z,{additionalStyles:{..._.base,..._.blurred}})]}),(0,d.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...p.base,...!E&&y?p.visible:{}}},height:"100%",padding:4,position:"relative",width:"100%",children:!g&&(0,d.jsx)(c.xu,{height:"100%",children:(0,d.jsxs)(c.xu,{"data-test-id":"PinFeedbackConfirmation",display:"flex",direction:"column",height:"100%",maxWidth:216,children:[(0,d.jsx)(c.xu,{marginBottom:2,children:(0,d.jsx)(c.X6,{color:"light",size:"400",children:O})}),(0,d.jsxs)(c.xu,{display:"flex",marginBottom:1,children:[k&&(0,d.jsx)(c.xu,{marginEnd:3,children:(0,d.jsx)(c.zd,{width:k.width,height:k.height,rounding:2,wash:!0,children:(0,d.jsx)(c.Ee,{alt:R||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:k.url||""})})}),(0,d.jsx)(c.xv,{color:"light",overflow:"normal",children:R})]}),i?(0,d.jsxs)(n.Fragment,{children:[A&&(0,d.jsx)(c.xu,{children:(0,d.jsx)(c.iP,{onTap:A,children:(0,d.jsx)(c.xv,{color:"inverse",weight:"bold",overflow:"normal",children:x.bt("Undo", "Undo", "Text on the button to navigate to undo hiding a pin", undefined, true)})})}),(0,d.jsxs)(c.xu,{marginTop:"auto",children:[!A&&!P&&z&&!N&&(0,d.jsx)(c.zx,{fullWidth:!0,color:"white",onClick:()=>(0,r.t)(z.action,z.actionOptions,S),text:x.bt("Unfollow", "Unfollow", "Text on the button to unfollow a specific board / user", undefined, true)}),D&&(0,d.jsx)(c.zx,{role:"link",color:"white",fullWidth:!0,href:"/edit",onClick:B,text:x.bt("Tune your feed", "Tune your feed", "Text on the button to navigate to homefeed control", undefined, true)})]})]}):(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(c.xu,{children:D&&(0,d.jsx)(c.rU,{href:"/edit",onClick:B,children:(0,d.jsx)(c.xv,{color:"inverse",weight:"bold",overflow:"normal",children:x.bt("Tune your home feed", "Tune your home feed", "Text on the link to navigate to homefeed control", undefined, true)})})}),(0,d.jsxs)(c.xu,{marginTop:"auto",children:[!A&&!P&&z&&!N&&(0,d.jsx)(c.zx,{fullWidth:!0,color:"white",onClick:()=>(0,r.t)(z.action,z.actionOptions,S),text:x.bt("Unfollow", "Unfollow", "Text on the button to unfollow a specific board / user", undefined, true)}),A&&(0,d.jsx)(c.zx,{fullWidth:!0,color:"white",onClick:A,text:C||x.bt("Undo", "Undo", "Text on the button to undo hiding a pin", undefined, true)})]})]})]})})})]})}},248034:(e,i,t)=>{t.d(i,{Z:()=>_});var n=t(865093),o=t(898781),a=t(55275),r=t(883119),s=t(61877),l=t(349700),c=t(407043),d=t(680046),u=t(785893);function _({anchor:e,feedbackData:i,feedbackType:t,pinId:_,onDismiss:p,onHide:h,recommendationReason:m,viewParameter:g,viewType:v}){const{logContextEvent:f}=(0,c.v)(),x=(0,o.ZP)(),y=(0,d.ZP)({i18n:x,interpolateNamedTemplate:l.nk}),b=(e,o)=>{const r=(0,n.Z)(m),s=m&&(0,d.yl)(m),l=m&&(0,d.XZ)(m),{action:c,actionOptions:u}=y.getHidePinAction({feedbackData:i,feedbackType:t,pinId:_,recommendationReasonId:r,throughId:s,throughProperties:l,complaintReason:e});(e=>{f({event_type:101,view_type:v,view_parameter:g,element:e,component:(0,d.nb)(t)})})(o),(0,a.t)(c,u),h()},P="promoted"===t?[{text:x.bt("Not relevant to me", "Not relevant to me", "homefeed.hideReasons.reason.notRelevant", undefined, true),reason:10,elementType:1296},{text:x.bt("Seen Pin too many times", "Seen Pin too many times", "homefeed.hideReasons.reason.seenTooMany", undefined, true),reason:3,elementType:11172},{text:x.bt("Blurry or pixelated image", "Blurry or pixelated image", "homefeed.hideReasons.reason.lowQualityPicture", undefined, true),reason:13,elementType:10898}]:[{text:x.bt("Not relevant to me", "Not relevant to me", "homefeed.hideReasons.reason.notRelevant", undefined, true),reason:10,elementType:1296},{text:x.bt("Not in a language I understand", "Not in a language I understand", "homefeed.hideReasons.reason.languageDontUnderstand", undefined, true),reason:15,elementType:11178},{text:x.bt("Seen Pin too many times", "Seen Pin too many times", "homefeed.hideReasons.reason.seenTooMany", undefined, true),reason:3,elementType:295},{text:x.bt("Blurry or pixelated image", "Blurry or pixelated image", "homefeed.hideReasons.reason.lowQualityPicture", undefined, true),reason:13,elementType:10898},{text:x.bt("Other", "Other", "homefeed.hideReasons.reason.other", undefined, true),reason:8,elementType:11179}];return(0,u.jsx)(r.Lt,{anchor:e,idealDirection:"down",onDismiss:p,zIndex:s.lI,id:"pin-action-dropdown",children:(0,u.jsx)(r.Lt.Section,{label:x.bt("Do you have a moment? Please tell us why.", "Got a moment? Tell us why.", "homefeed.hideReasons.title", undefined, true),children:P.map((({text:e,reason:i,elementType:t})=>(0,u.jsx)(r.Lt.Item,{onSelect:()=>b(i,t),option:{value:`hide-reason-${e.split(" ").join("-")}`,label:e},dataTestId:`hide-reason-${e.split(" ").join("-")}`})))})})}},420632:(e,i,t)=>{t.d(i,{Z:()=>p});var n=t(667294),o=t(294184),a=t.n(o),r=t(391254),s=t(149230),l=t(927104),c=t(898781),d=t(883119),u=t(785893);class _ extends n.Component{constructor(...e){var i,t,n;super(...e),n={showBoardName:!1},(t="state")in(i=this)?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n}componentDidMount(){this.timer=setTimeout((()=>{this.setState({showBoardName:!0})}),950)}componentWillUnmount(){clearTimeout(this.timer)}render(){const{showBoardName:e}=this.state,{isDenseView:i,isNewlySaved:t,name:o,shouldUseLegoStyles:c,type:_,url:p}=this.props;if(c&&i)return null;const h="boardless"===_?this.props.i18n.bt("Saved to profile", "Saved to Profile", "Saved.render.title", undefined, true):o;let m,g;if(!t||e||c){const e=c?(0,u.jsx)(d.xv,{color:"inverse",size:"300",weight:"bold",children:h.length<=20?h:(0,l.Z)(h,20)}):(0,u.jsx)(d.X6,{color:"inverse",size:"400",lineClamp:1,children:h}),i=(0,s.Z)({url:p})?"nofollow":"none";m=p?(0,u.jsx)(d.rU,{rel:i,href:p,children:e}):e}else m=(0,u.jsx)(d.xv,{color:"inverse",children:(0,u.jsx)("span",{className:"deprecatedTextSizeXL",children:this.props.i18n.bt("Saved!", "Saved!", "Indication that a pin has been saved", undefined, true)})});return t&&(g=e?"board":"saved"),(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(r.Z,{unsafeCSS:"\n.SavedAnimation {\n  &.saved {\n    animation: SavedAnimation--down-then-right 1s cubic-bezier(0, 0.33, 0.33, 1.1);\n  }\n\n  &.board {\n    animation: SavedAnimation--to-right 0.12s cubic-bezier(0, 0.33, 0.33, 1.1);\n  }\n}\n\n@keyframes SavedAnimation--down-then-right {\n  0% {\n    opacity: 0;\n    transform: translateY(-24px);\n  }\n\n  33% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n\n  80% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n\n  100% {\n    opacity: 0;\n    transform: translateX(24px);\n  }\n}\n\n@keyframes SavedAnimation--to-right {\n  from {\n    opacity: 0;\n    transform: translateX(-16px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n"}),(0,u.jsx)("div",{"data-test-id":"savedInfo",className:!c&&a()("SavedAnimation",g),children:m})]})}}const p=function(e){const i=(0,c.ZP)();return(0,u.jsx)(_,{...e,i18n:i})}},554779:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(307640);function o(e){return n.zI.includes(e)}},521460:(e,i,t)=>{t.d(i,{J:()=>n});const n=228},865093:(e,i,t)=>{t.d(i,{Z:()=>o});const n={REPIN_BOARD:1,USER_ACTIVITY:4,CLICKTHROUGH:9,FRESH_REPIN_BOARD:47,FRESH_CLICKTHROUGH:48,FRESH_USER_ACTIVITY:49,LOCAL_REPIN_BOARD:13,LOCAL_CLICKTHROUGH:32,LOCAL_USER_ACTIVITY:33,P2P_CLICKTHROUGH:28,INSTANT_PFY_NON_MATERIALIZABLE:36,FOLLOWED_INTEREST:5,TOPIC_BEST_PINS:70,EMBEDDING_BASED_BEST_PINS:173,RECOMMENDED_TOPICS:65,RECOMMENDED_GEO_INTERESTS:192,USER_SEQUENCE_INTERESTS_PINS:193,GRAPHSAGE_USER_EMBEDDINGS_TO_ORGANIC_PINS:109,NAVBOOST_PFY:89,NAVBOOST_P2P:88,NOTIFICATION_NEWS_HUB:138,GEMINI_INTERESTS_FRESH:104,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN:100,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN_ENGAGEMENT:175,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_VIDEO:95,INTENTIONAL_DISTRIBUTION_DOMAIN:86,INTENTIONAL_DISTRIBUTION_TOPICS_STORY_PINS:91,INTENTIONAL_DISTRIBUTION_TOPICS_VIDEO:98,GRAPHSAGE_MULTI_PINS_TO_CREATOR_PINS_REALTIME:135,GRAPHSAGE_MULTI_PINS_TO_VIDEO_PINS_REALTIME:139,GRAPHSAGE_MULTI_PINS_TO_STORY_PINS_REALTIME:140,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGEED_INTERESTS_VIDEO:118,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGED_INTERESTS_STORY_PIN:130,CREATOR_DIRECT_INJECT:148,USER_INTERESTS_TO_LONGTERM_CREATOR_PINS:141,GRAPHSAGE_PRODUCT_PINS:97,GRAPHSAGE_USER_EMBEDDINGS_TO_PINS:108,PROMOTED_PIN:15,UNKNOWN:0,RECOMMENDED_CATEGORY:2,COOKIE_MONSTER:3,REALTIME_P2B:6,REALTIME_P2B_CLOSEUP:22,RECOMMENDED_INTEREST:7,VISUALLY_SIMILAR:8,BOARD_FOLLOW:35,USER_FOLLOW:45,RECOMMENDED_COMMERCE:10,EVERYTHING_FEED:11,RECOMMENDED_LOCAL_PIN:12,SEARCH:46,P2P_USER_COMMERCE:16,COMMERCE_EDUCATION:17,LANDING_PAGE_PINS:18,FOLLOWING_FEED:19,POPULAR_FEED:20,P2P_DYNAMIC_GRID:23,LANDING_PAGE_INTEREST_PINS:24,FRESH_PIN_FROM_PIN:25,FRESH_PIN_FROM_INTEREST:26,FRESH_PIN_FROM_BOARD:27,SIFTER_VIDEO_FROM_INTEREST:39,SIFTER_PRODUCTS:57,SIFTER_DISTRIBUTION_A:50,SIFTER_DISTRIBUTION_B:51,SIFTER_DISTRIBUTION_C:52,SIFTER_DISTRIBUTION_D:53,SIFTER_DISTRIBUTION_E:54,SIFTER_ACTIVATION_EXPERIMENT:58,SIFTER_FRESHMAKER_PIN_FROM_INTEREST:40,P2P_CLOSEUP:29,P2P_LIKE:30,P2P_PIN_CREATE:31,INSTANT_PFY:34,DYNAMIC_INSERTION:37,DYNAMIC_INSERTION_BOARD_FOLLOW:38,HYPERLOCAL_INTEREST_BOARD:41,NUX_BOARD_FOLLOW_P2P:42,INDIRECT_DOMAIN_PIN:43,PIXIE_PINS_FOR_BOARD:44,SCREENSHOT_SAVE:55,TEXT_EMBEDDINGS:56,FRESH_TEXT_EMBEDDINGS:67,PREFETCH_LOAD:60,DIVERSE_TOPICS:62,QUIZ_RESULTS:63,INTENTIONAL_DISTRIBUTION_TOPICS:64,INTENTIONAL_DISTRIBUTION_TOPICS_THIRD_PARTY:90,INTENTIONAL_DISTRIBUTION_GEMINI:73,INTENTIONAL_DISTRIBUTION_GEMINI_V5:120,INTENTIONAL_DISTRIBUTION_SHOP_STYLE_STL:74,INTENTIONAL_DISTRIBUTION_GRAPHSAGE:78,INTENTIONAL_DISTRIBUTION_REPIN_BOARD:80,INTENTIONAL_DISTRIBUTION_CLICKTHROUGH:81,INTENTIONAL_DISTRIBUTION_USER_ACTIVITY:82,INTENTIONAL_DISTRIBUTION_CREATOR_BASELINE:92,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS:102,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_STORY_PIN:103,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_DIVERSITY:105,PIXIE_RECENT_ACTION:66,NATIVE_CONTENT_TOPICS:68,BUBBLE_OPEN_TOPICS:69,TOPIC_BEST_PINS_V2:77,DAILY_BEST_PINS:79,TOPIC_BEST_PINS_V3:101,TOPIC_BEST_STORY_PINS:164,REC_SEQ_STORY_PIN_CLS:165,DARK_PROMOTED_PIN:71,POST_EXPLORE_TOPICS:72,GRAPHSAGE_EMBEDDINGS:75,DEMOGRAPHIC_PFY:76,SHOPPING_STL:83,UNAUTH_PIXIE_P2B:84,UNAUTH_PIXIE_P2P:85,VIDEO_EMBEDDINGS:87,VIDEO_EMBEDDINGS_GEMINI_V5:121,GEMINI_V5_EMBEDDINGS_STATIC:93,GEMINI_V5_EMBEDDINGS_FRESH:94,GEMINI_V5_EMBEDDINGS_REALTIME:106,GEMINI_V5_EMBEDDINGS_STORYPIN:107,CURATED_VIDEO_INTEREST:96,GRAPHSAGE_PRODUCT_PINS_LONGER_HISTORY:112,GRAPHSAGE_SHOPPABLE_INSPIRATION:126,GRAPHSAGE_PRODUCT_PINS_EXPERIMENTAL:134,NUX_GRAPHSAGE:99,GRAPHSAGE_USER_EMBEDDINGS_TO_PRODUCT_PINS:110,GRAPHSAGE_VIDEO_PINS:113,RECBOOST_REPIN_BOARD:114,RECBOOST_CLICKTHROUGH:115,RECBOOST_USER_ACTIVITY:116,RECBOOST_CREATOR_BOARDS:129,RECOMMENDED_BOARDS:117,RECOMMENDED_ANNOTATION_BOARDS:136,RECOMMENDED_GRAPHSAGE_BOARDS:153,INTENTIONAL_DISTRIBUTION_RECOMMENDED_GRAPHSAGE_BOARDS:191,RECOMMENDED_CREATOR_BOARDS:124,ANNOTATION_REC_CREATOR_BOARDS:127,INTENTIONAL_DISTRIBUTION_MANUAL_INTERESTS_VIDEO:119,INTENTIONAL_DISTRIBUTION_INTERESTS_VIDEO:143,INTENTIONAL_DISTRIBUTION_INTERESTS_STORY_PIN:144,REPIN_CREATOR_BOARD:122,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS:123,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS_REALTIME:131,FRESH_SIG_FROM_BOARD:125,RECENT_ENGAGED_CREATOR_BOARDS:128,RECENT_ENGAGED_BOARDS:132,SHOPPING_CREATOR_REALTIME:133,GRAPHSAGE_BASED_RECOMMENDED_CREATOR_BOARDS:137,PIXIE_P2P:142,NEW_USE_CASE_PINS:145,RECBOOST_NEW_USE_CASES:146,SEARCHSAGE_PFY:147,SEARCHSAGE_SHOPPING_PFY:155,INTEREST_EXPLORATION:149,INTEREST_EXPLORATION_TRENDY_QUERIES:150,INTEREST_EXPLORATION_RELATED_INTERESTS:151,RECBOOST_INTERESTS:152,HF_STORY_SHOPPING_RETARGETING:154,RECBOOST_STORY_PINS:156,RECBOOST_STORY_BOARDS:157,PINNABILITY_EMBEDDINGS:158,PINNABILITY_FRESH_STORY_EMBEDDINGS:159,PINNABILITY_STORY_EMBEDDINGS:160,EXPLORATION_STORY_PINS:161,EXPLORATION_STORY_PINS_BASELINE:162,EXPLOITATION_STORY_PINS:163,ANNOTATION_REC_CREATOR_STORY_PINS:166,GRAPHSAGE_MULTI_PINS_TO_STORY_PINS:167,IDEASTREAM_GRAPHSAGE_STORY_PINS:168,HF_EDUCATION_PIN_INSERTION:169,RP_EDUCATION_PIN_INSERTION:170,USER_TO_CREATOR_STORY_PINS:171,USER_TO_CREATOR_STORY_PINS_ENGAGEMENT:176,COENGAGEMENT_STORY_PINS:172,ANNOTATION_STORY_PINS:177,DISCOVER_STREAM_DEMOGRAPHIC_FALLBACK:178,DISCOVER_STREAM_CELEBRITY:179,GRAPHSAGE_SHOPIFY_VMP_PRODUCT_PINS:180,CREATOR_BEST_IDEA_PINS:181,INTEREST_BEST_IDEA_PINS:182,NAVBOOST_STORY_PINS:183,SHOPPING_DISTRIBUTION_PINS:185,WATCH_TAB_EHQ_STORIES:186,NOTIF_LEARNED_RETRIEVAL:187,LANDING_PAGE_PIN_RECOMMENDATIONS:188,PINNERSAGE_LEARNED_EMBEDDINGS:189,TOPIC_FEED:190,RTC_IMPROVEMENT_TEST_1:501,RTC_IMPROVEMENT_TEST_2:502,RTC_IMPROVEMENT_TEST_3:503,RTC_IMPROVEMENT_TEST_4:504,RTC_IMPROVEMENT_TEST_5:505,RTC_IMPROVEMENT_TEST_6:506,RTC_IMPROVEMENT_TEST_7:507,RTC_IMPROVEMENT_TEST_8:508,RTC_IMPROVEMENT_TEST_9:509,RTC_IMPROVEMENT_TEST_10:510,RTC_IMPROVEMENT_TEST_11:511,RTC_IMPROVEMENT_TEST_12:512,RTC_IMPROVEMENT_TEST_13:513,RTC_IMPROVEMENT_TEST_14:514,RTC_IMPROVEMENT_TEST_15:515,RTC_BLENDER_TEST:516,P2P_COMMERCE:21,P2P:14,LENS_CAMERA_VISUALLY_SIMILAR:111,RECENT_FOLLOWED_INTEREST:59,RECENT_FOLLOWED_BOARD:61,GRAPHSAGE_SHOPIFY_VMP_MERCHANT_ACTIVATION_PRODUCT_PINS:174,FOLLOWED_INTEREST_SEO_BESPIN_EXPORATION:184,XPIXIE_TO_PRODUCT_PINS:194};function o(e){return e&&e.reason&&n[e.reason]}},987097:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(680046),o=t(349700);function a({feedbackOptions:e,pin:i,viewParameter:t},a){const{board:r,pinner:s}=null!=i?i:{},{getFeedbackType:l}=(0,n.ZP)({i18n:a,interpolateNamedTemplate:o.nk});return l({board:r,feedback:e,pin:i,pinner:s,viewParameter:t})}},468593:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(539497);async function o({filename:e,imgSrc:i,imageDownloadSuccessCallback:t,category:o,isUnauth:a,pinId:r,viewParameter:s,viewType:l},c){return"undefined"==typeof window?Promise.resolve():((0,n.My)(`web.${a?"unauth":"auth"}.download.click.${o||"no_category"}`),c({event_type:82,object_id_str:r,view_type:l||3,view_parameter:s||139}),i&&document?fetch(i,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then((e=>e.blob())).then((i=>{var n,o;const a=document.createElement("a");a.href=window.URL.createObjectURL(i),a.setAttribute("download",e&&e.replace(".","_")),a.style.display="none",null===(n=document.body)||void 0===n||n.appendChild(a),a.click(),null===(o=document.body)||void 0===o||o.removeChild(a),null==t||t()})).catch((()=>{throw new Error("Download image error")})):Promise.resolve())}},521556:(e,i,t)=>{t.d(i,{W:()=>s,Z:()=>l});var n=t(898781),o=t(883119),a=t(785893);const r={__path:"M10.52 3.11a2 2 0 013.59 0l2.06 4.17c.02.06.08.1.15.11l4.6.67a2 2 0 011.1 3.41l-3.32 3.25a.2.2 0 00-.06.17l.78 4.58a2 2 0 01-2.9 2.11l-4.11-2.16a.2.2 0 00-.19 0l-4.11 2.16a2 2 0 01-2.9-2.1l.78-4.59a.2.2 0 00-.06-.17l-3.32-3.25a2 2 0 011.1-3.41l4.6-.67a.2.2 0 00.15-.1zm3.9 5.15l-1.75-3.53a.4.4 0 00-.71 0L10.2 8.26a2 2 0 01-1.5 1.1l-3.9.56a.4.4 0 00-.23.69l2.83 2.75a2 2 0 01.57 1.77L7.31 19a.4.4 0 00.58.42l3.5-1.83a2 2 0 011.86 0l3.48 1.83a.4.4 0 00.59-.42l-.67-3.88a2 2 0 01.57-1.77l2.83-2.75a.4.4 0 00-.22-.69l-3.9-.56a2 2 0 01-1.51-1.1z"},s={__path:"M10.52 3.11a2 2 0 013.59 0l2.06 4.17c.02.06.08.1.15.11l4.6.67a2 2 0 011.1 3.41l-3.32 3.25a.2.2 0 00-.06.17l.78 4.58a2 2 0 01-2.9 2.11l-4.11-2.16a.2.2 0 00-.19 0l-4.11 2.16a2 2 0 01-2.9-2.1l.78-4.59a.2.2 0 00-.06-.17l-3.32-3.25a2 2 0 011.1-3.41l4.6-.67a.2.2 0 00.15-.1z"};function l({isCloseupButton:e,isDisabled:i,isFavorited:t,onTap:l,size:c}){const d=(0,n.ZP)();return e?(0,a.jsx)(o.hU,{accessibilityLabel:d.bt("Favourite icon", "Favorite icon", "pinRep.footer.favoriteIcon", undefined, true),dangerouslySetSvgPath:t?s:r,disabled:i,iconColor:"darkGray",onClick:l,size:"lg"}):(0,a.jsx)(o.iP,{disabled:i,onTap:l,children:(0,a.jsx)(o.JO,{accessibilityLabel:d.bt("Favourite icon", "Favorite icon", "pinRep.footer.favoriteIcon", undefined, true),color:"default",dangerouslySetSvgPath:t?s:r,size:c})})}},552684:(e,i,t)=>{function n(e){const i=e.split("/");return[i[2],i[1]]}function o(e,i){return!e||!e.some((e=>e.pin_type===i))}t.d(i,{E:()=>o,J:()=>n})},854035:(e,i,t)=>{t.d(i,{Z:()=>h});var n=t(67828),o=t(941646),a=t(898781),r=t(892819),s=t(349700),l=t(780280),c=t(561195),d=t(883119),u=t(785893);const _=({rating:e,textSize:i,type:t})=>{if("single"===t){const t=parseFloat(e);return Number.isNaN(t)?null:(0,u.jsxs)(d.kC,{alignItems:"center",children:[(0,u.jsx)(c.A,{fill:"full",width:12}),(0,u.jsx)(d.xv,{size:i,children:t.toFixed(1)})]})}return(0,u.jsx)(c.Z,{rating:e,width:12})},p=({bracket:e,count:i,countFormat:t,countType:n,marginStart:c,textSize:_,underline:p})=>{const{locale:h}=(0,l.B)(),m=(0,a.ZP)(),g=(0,r.Z)();if(null==i)return null;let v=g(h,i,{shortform:!0,shortform_maximum_fraction_digits:1});if("text"===t){const e="review"===n?m.nbt(["{{ count }} review", "{{ count }} reviews"], i, "webapp.app.www-unified.productStarRatings.RatingCountText", true):m.nbt(["{{ count }} rating", "{{ count }} ratings"], i, "webapp.app.www-unified.productStarRatings.RatingCountText", true);v=(0,s.nk)(e,{count:i}).join("")}return e&&(v=`(${v})`),(0,u.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{borderBottom:p?"1px solid gray":"none"}},marginStart:c,children:(0,u.jsx)(d.xv,{color:p?"subtle":"default",size:_,underline:p,children:(0,u.jsx)(o.Z,{id:"ratings-count-text",display:"inlineBlock",children:v})})})};function h({count:e,countFormat:i,countType:t,rating:o,textSize:a,underline:r}){return(0,n.Z)({count:e,rating:o})?(0,u.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,u.jsx)(_,{rating:o,textSize:a,type:"multiple"}),(0,u.jsx)(p,{count:e,countFormat:i,countType:t,textSize:a,underline:r})]}):null}},67828:(e,i,t)=>{function n({count:e,rating:i}){return Boolean(i&&"None"!==i&&Number.isFinite(e))}t.d(i,{Z:()=>n})},812446:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(545846),o=t(112690),a=t(785893);function r(e){return i=>{const t=(0,o.Z)();return(0,a.jsx)(n.Z,{ref:i.shareButtonRef,Subject:e,logContextEvent:t,...i})}}},545846:(e,i,t)=>{t.d(i,{Z:()=>h});var n=t(667294),o=t(482981),a=t(451204),r=t(121151),s=t(837727),l=t(946984),c=t(883119),d=t(785893);function u(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const _=new c.Ry(1),p=({children:e})=>e((0,l.Z)());class h extends n.Component{constructor(...e){super(...e),u(this,"handleDismiss",(()=>{const{onFlyoutDismiss:e}=this.props;e()})),u(this,"onHide",(()=>{this.props.onClick(),this.handleDismiss()})),u(this,"flyoutProps",(()=>{var e;const{gridDescription:i,idealDirection:t,imageSrc:n,pinId:r,userId:l,board:c,sendType:u,fullName:_,profileUrl:p,element:h,viewParameter:m,viewType:g,onExternalSend:v,showCaret:f,todayArticle:x,ownerId:y}=this.props;let b={description:i,id:r,imageUrl:n,name:"",type:s.d.PIN,url:`/pin/${r}/`,ownerId:y},P=s.d.PIN;switch(u){case"user":b={description:i,id:l,imageUrl:n,name:_,type:s.d.PINNER,url:p},P=s.d.USER;break;case"board":b=c&&{description:c.description,id:c.id,imageUrl:c.imageUrl,name:c.name,type:s.d.BOARD,url:c.url,ownerId:null===(e=c.owner)||void 0===e?void 0:e.id},P=s.d.BOARD;break;case"today_article":b=x&&{description:x.subtitle||"",id:x.id,imageUrl:n,name:x.title,type:s.d.TODAY_ARTICLE,url:(0,o.Z)(x)},P=s.d.TODAY_ARTICLE}const w={element:h,onHide:this.onHide,onExternalSend:v,sendType:P,sharedObject:b,viewParameter:m,viewType:g};return{anchor:this.flyoutAnchor,idealDirection:t,onDismiss:this.handleDismiss,showCaret:f,children:(0,d.jsx)(a.default,{...w})}}))}toggle(){const{isOwnProfile:e,onToggleFlyout:i,sendType:t,userId:n,logContextEvent:o}=this.props;"user"===t&&o({event_type:101,component:13675,element:1079,object_id_str:n,view_type:4,view_parameter:e?3106:3107}),i()}render(){const{Subject:e,inModal:i,isFlyoutOpen:t,shownWithinMasonry:n,shownWithinProfileHeader:o}=this.props,{anchor:a,idealDirection:s,showCaret:l,children:u}=this.flyoutProps(),h=(0,d.jsx)(c.xu,{children:(0,d.jsx)(p,{children:i=>(0,d.jsx)(e,{handleSendShareFlyoutButtonClick:e=>{i?i():(null!=e&&e.stopPropagation&&e.stopPropagation(),this.toggle())},...this.props})})}),m=t&&(n||o?(0,d.jsx)(c.mh,{zIndex:o?_:void 0,children:(0,d.jsx)(c.xu,{zIndex:i?r.b7:void 0,position:i?"absolute":void 0,top:!!i||void 0,children:(0,d.jsx)(c.J2,{anchor:a,idealDirection:s,onDismiss:()=>{this.handleDismiss()},showCaret:l,size:"flexible",positionRelativeToAnchor:!1,children:u})})}):(0,d.jsx)(c.J2,{anchor:a,idealDirection:s,onDismiss:()=>{this.handleDismiss()},showCaret:l,size:"flexible",children:u}));return(0,d.jsxs)(c.xu,{ref:e=>{e&&(this.flyoutAnchor=e)},dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:[h," ",m]})}}u(h,"defaultProps",{idealDirection:"down",onClick:()=>{}})},655747:(e,i,t)=>{t.d(i,{Z:()=>c,j:()=>l});var n=t(898781),o=t(349700),a=t(773285),r=t(883119),s=t(785893);const l=[0,2,3];function c({hasAffiliateProducts:e,href:i,isPromoted:t,onNavigateSponsorClick:c,sponsorName:d,sponsorUsername:u,sponsorshipStatus:_,textWeight:p="bold"}){const h=(0,n.ZP)(),m=(0,a.F)().checkExperiment("mweb_web_android_ios_clbc_eu_ad_string").anyEnabled,g=(0,a.F)().checkExperiment("web_remove_paid_partnership_in_rejected_state").anyEnabled,v=i||(u?`/${u}/`:null),f=v&&d?(0,s.jsx)(r.rU,{href:v,onClick:c,children:(0,s.jsx)(r.xv,{weight:p,size:"200",children:d})},d):void 0;let x;t?x=(0,o.nk)(h.bt("Promoted by {{ name }}", "Promoted by {{ name }}", "sponsorship.sponsorshipText.promotedByBrand", undefined, true),{name:f}):_||0===_?d&&!l.includes(_)?x=(0,o.nk)(h.bt("Paid partnership with {{ name }}", "Paid partnership with {{ name }}", "closeup.creator.sponsoredPinTitle", undefined, true),{name:f}):g&&2===_||(x=h.bt("Paid partnership", "Paid partnership", "closeup.creator.sponsoredPinTitle", undefined, true)):e&&(x=h.bt("Includes sponsored products", "Includes sponsored products", "sponsorship.sponsorshipText.affiliatedProducts", undefined, true));const y=m&&!t?"Ad  ":"";return(0,s.jsxs)(r.xv,{inline:!0,size:"200",lineClamp:2,children:[y,x]})}},930712:(e,i,t)=>{t.d(i,{Nb:()=>s,Of:()=>l,YO:()=>r,ZP:()=>u,x4:()=>d});var n=t(667294),o=t(620707),a=t(766383);const r=({showProductDetailPage:e,isLargerPane:i,showCloseupContentRight:t})=>e&&i?t?a.Uj:a.zT:1,s=(0,o.qe)((({paneWidth:e,pdpCarouselSlotToPaneRatio:i,showCloseupContentRight:t,showProductDetailPage:n,updateCloseupBodyContainerHeight:o,viewportSize:a,maxWidth:r})=>({paneWidth:e,pdpCarouselSlotToPaneRatio:i,showCloseupContentRight:t,showProductDetailPage:n,updateCloseupBodyContainerHeight:o,viewportSize:a,maxWidth:r}))),l={showCloseupContentRight:!0,showProductDetailPage:!1,updateCloseupBodyContainerHeight:()=>{},viewportSize:"lg",paneWidth:{pdp:a.CI,regular:a.Gg},pdpCarouselSlotToPaneRatio:1,maxWidth:{pdp:a.Kn,regular:a.u6}},c=(0,n.createContext)(l);function d(){const e=(0,n.useContext)(c);if(!e)throw new Error("useCloseupContext must be used within CloseupContextProvider");return e}const u=c},766383:(e,i,t)=>{t.d(i,{CI:()=>a,Ch:()=>s,Gb:()=>l,Gg:()=>n,Ie:()=>_,JV:()=>h,KP:()=>p,Kn:()=>r,Uj:()=>c,bx:()=>m,d2:()=>u,g9:()=>g,iB:()=>v,u6:()=>o,zT:()=>d});const n=508,o=2*n,a=488,r=992,s=672,l=1176,c=.6,d=.84,u=40,_=72,p=740,h=60,m=912,g=32,v={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},504981:(e,i,t)=>{t.r(i),t.d(i,{default:()=>_});var n=t(702664),o=t(834911),a=t(811403),r=t(35495),s=t(407043),l=t(802201),c=t(930712),d=t(883119),u=t(785893);function _({carouselData:e,carouselIndex:i,componentType:t,contextLogData:_,handleCarouselSwipe:p,isCloseup:h,isEditMode:m,pinId:g,viewParameter:v,viewType:f,variant:x}){const{logContextEvent:y}=(0,s.v)(),b=(0,l.S6)()(g),P=e||(0,o.Z)({carouselData:null==b?void 0:b.carousel_data,images:null==b?void 0:b.images,richMetadata:null==b?void 0:b.rich_metadata,richSummary:null==b?void 0:b.rich_summary}),w=(0,n.useDispatch)();if(!P)return null;const S=(e,i,n)=>{m||void 0===a.yR||(e.preventDefault(),e.stopPropagation(),w((0,a.yR)(String(g),n))),void 0!==p&&p(n),((e,i,t,n=0,o,a,s,l,c,d,u)=>{if(!u){const{carousel_slots:u,id:_}=a;e({event_type:108,object_id_str:t,component:c,view_type:l,view_parameter:s,event_data:{pinCarouselSlotEventData:{carouselSlotId:(null==u?void 0:u[n])&&Number(u[n].id),carouselDataId:Number(_),carouselSlotIndex:n,toCarouselSlotIndex:o}},aux_data:{...d,...(0,r.Kl)(i)||{}}})}})(y,b,g,i,n,P,v,f,t,_,m)},{carousel_slots:I=[],index:T}=P,E=void 0!==i?i:T,A="default"===x,C=A?"white":"#555",j=A?"rgba(255, 255, 255, 0.5)":"lightGray";return(0,u.jsx)(c.ZP.Consumer,{children:({viewportSize:e})=>"sm"===e?null:(0,u.jsx)(d.xu,{alignItems:"center","data-test-id":"carousel-ellipsis",display:"flex",justifyContent:h?"end":"center",paddingY:m?1:0,children:[...Array(I.length).keys()].map((e=>{var i;return(0,u.jsx)(d.xu,{paddingX:1,children:(0,u.jsx)(d.iP,{accessibilityLabel:null!==(i=I[e].title)&&void 0!==i?i:"",fullWidth:!1,onTap:({event:i})=>S(i,E,e),rounding:"circle",children:(0,u.jsx)(d.xu,{"data-test-id":"ellipsis-size",height:8,width:8,dangerouslySetInlineStyle:{__style:{backgroundColor:e===E?C:j}},rounding:"circle"})})},g+e)}))})})}},814115:(e,i,t)=>{t.d(i,{Z:()=>g});var n=t(667294),o=t(564194),a=t(834911),r=t(737022),s=t(310227),l=t(802201),c=t(898781),d=t(718482),u=t(883119),_=t(444445),p=t(785893);function h(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class m extends n.Component{constructor(...e){super(...e),h(this,"state",{showBadge:!0}),h(this,"renderBadge",(()=>{const{carouselData:e,isCloseup:i,showCarouselBadge:t}=this.props;if(!e)return null;const{showBadge:n}=this.state,{carousel_slots:o,index:a}=e,r=n?.8:0;return!i&&t?(0,p.jsx)(u.xu,{alignItems:"center",color:"selected",display:"flex",height:35,justifyContent:"center",marginEnd:5,marginTop:5,position:"absolute",right:!0,rounding:2,width:35,zIndex:new u.Ry(1),dangerouslySetInlineStyle:{__style:{opacity:r,transition:"opacity .3s"}},children:(0,p.jsx)(u.xv,{color:"inverse",children:`${(null!=a?a:0)+1}/${(null!=o?o:[]).length}`})}):null}))}componentDidMount(){this.hideBadgeTimeout=setTimeout((()=>this.setState({showBadge:!1})),3e3)}componentDidUpdate(e){const{showBadge:i}=this.state,{carouselData:t}=e,{carouselData:n}=this.props;if(!t||!n)return;const{index:o}=t,{index:a}=n;i&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout((()=>this.setState({showBadge:!1})),3e3)),o!==a&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}componentWillUnmount(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}render(){const{isCloseup:e,carouselIndex:i,closeupHeight:t,closeupWidth:n=0,widthRatio:a=1,cropHeight:l,cropWidth:c,carouselData:h,disableTransition:m,highResOnly:g,lowResOnly:v,onError:f,onLoad:x,pinId:y,isEditMode:b,isDenseView:P,pin:w}=this.props;if(!h)return null;if(a>1||a<0)throw new Error("widthRatio should be between 0 and 1 inclusive");const{carousel_slots:S=[],index:I=0}=h,T=void 0!==i?i:I,E=!e&&c,{images:A}=S[T];let C;C=e?n:E||(g?474:P?_.Lo:_.yF);const j=Math.floor(C*a),k=(null==A?void 0:A["236x"])||{},R=l||k.height||0,O=c||k.width||236,z=t||R/O*j,D=(e=>{const i=e.reduce(((e,i)=>{var t;const{images:n}=i,{height:o=1,width:a=1}=(null==n?void 0:n["736x"])||(null==n?void 0:n["236x"])||{},r=`${a}x${o}`,s=(null===(t=e[r])||void 0===t?void 0:t.times)||0;return{...e,[r]:{imageHeight:o,imageWidth:a,times:s+1}}}),{}),t=Object.keys(i).reduce(((e,t)=>i[t].times>e.times?i[t]:e),{times:-1,imageHeight:-1,imageWidth:-1});return Object.keys(i).length>1?{imageHeight:t.imageHeight,imageWidth:t.imageWidth}:null})(S);return(0,p.jsxs)(u.xu,{height:z,display:"flex",alignItems:"center",overflow:"hidden","data-test-id":"carousel-pin",minHeight:s.Ml,"data-test-image-signature":null==w?void 0:w.image_signature,children:[!b&&this.renderBadge(),(0,p.jsx)(o.Z,{trackCarousel:!0,impressionType:"Pin",loggingId:y,slotIndex:I,viewParameter:72,viewType:1,children:(0,p.jsx)(u.xu,{position:"absolute",height:z,width:j,overflow:"hidden"})},`carousel-impression-key-${T}`),(0,p.jsx)(u.xu,{width:j*S.length,dangerouslySetInlineStyle:{__style:{transition:m?"":"left .3s",left:(0,d.vF)(S.length,j,C,T)}},left:!0,height:"100%",display:"flex",direction:"row",position:"relative",children:S.map(((i,t)=>{if(e){const e=t===S.length-1;return(({pinId:e,slot:i,slotIndex:t,onError:n,onLoad:o,widthToUse:a,gap:s},l)=>{const{url:c,width:_,height:h}=(0,r.Z)(i.images)||{},{details:m=""}=i,g=(0,d.GH)(m,l,t);return(0,p.jsx)(u.xu,{"data-test-id":"carousel-slot-container",width:a,height:"100%",marginEnd:s,children:(0,p.jsx)(u.zd,{height:"100%",wash:!0,children:(0,p.jsx)(u.Ee,{alt:g,fit:"contain",naturalHeight:null!=h?h:1,naturalWidth:null!=_?_:1,onError:n,onLoad:o,src:null!=c?c:""})})},`carousel-slot-${e}-${t}`)})({pinId:y,slot:i,slotIndex:t,onError:f,onLoad:x,widthToUse:j,gap:j<C&&!e?1:0},this.props.i18n)}return((e,i,t,n,o,a,r,s,l,c,_,h,m,g,v)=>{var f,x,y;const{images:b,details:P=""}=i;let w,S=236,I=236,T="";var E,A,C,j,k,R,O,z;if(o?(S=474,I=b&&Math.min(S/.8,S/((null!==(E=null===(A=b["564x"])||void 0===A?void 0:A.width)&&void 0!==E?E:1)/(null!==(C=null===(j=b["564x"])||void 0===j?void 0:j.height)&&void 0!==C?C:1))),T=b&&(null===(k=b["564x"])||void 0===k?void 0:k.url)):b&&b["736x"]?(I=b&&b["736x"]&&b["736x"].height,S=b&&b["736x"]&&b["736x"].width,T=b&&b["736x"]&&b["736x"].url):b&&b["236x"]&&(I=b&&b["236x"]&&b["236x"].height,S=b&&b["236x"]&&b["236x"].width,T=b&&b["236x"]&&b["236x"].url),m&&g&&(I=Math.min(m*g,null!==(R=I)&&void 0!==R?R:1)),a)w=`${null!==(O=null==b||null===(z=b["236x"])||void 0===z?void 0:z.url)&&void 0!==O?O:""} 1x`;else if(o){var D,N;w=`${null!==(D=null==b||null===(N=b["564x"])||void 0===N?void 0:N.url)&&void 0!==D?D:""} 1x`}else{var B,L,Z;w=[(null==b?void 0:b["474x"])&&`${null!==(B=b["474x"].url)&&void 0!==B?B:""} 2x`,(null==b?void 0:b["736x"])&&`${null!==(L=b["736x"].url)&&void 0!==L?L:""} 3x`,(null==b?void 0:b.orig)&&`${null!==(Z=b.orig.url)&&void 0!==Z?Z:""} 4x`].filter(Boolean).join(", ")}const M=(0,d.GH)(P,e,n),F=h?void 0:I,V=h?void 0:S,G=!!v,{boxHeight:H,boxWidth:U}=G?{boxHeight:null==v?void 0:v.imageHeight,boxWidth:null==v?void 0:v.imageWidth}:{boxHeight:F,boxWidth:V};return(0,p.jsx)(u.xu,{"data-test-id":"carousel-slot-container",height:H,width:U,children:(0,p.jsx)(u.xu,{height:h?_:void 0,width:h||void 0,"data-test-id":`carousel-img-${n}`,children:(0,p.jsx)(u.Ee,{alt:M,fit:h?"cover":"none",naturalHeight:null!==(f=I)&&void 0!==f?f:1,naturalWidth:null!==(x=S)&&void 0!==x?x:1,onError:r,onLoad:s,src:null!==(y=T)&&void 0!==y?y:"",srcSet:w})})},`carousel-slot-${t}-${n}`)})(this.props.i18n,i,y,t,g,v,f,x,0,0,l,c,z,j,D)}))})]})}}function g(e){const i=(0,c.ZP)(),t=(0,l.S6)()(e.pinId)||e.pin,n=(0,a.Z)({carouselData:null==t?void 0:t.carousel_data,images:null==t?void 0:t.images,richMetadata:null==t?void 0:t.rich_metadata,richSummary:null==t?void 0:t.rich_summary,shouldUnifyImageSizes:!0});return(0,p.jsx)(m,{...e,carouselData:n,i18n:i})}h(m,"defaultProps",{showCarouselBadge:!0})},718482:(e,i,t)=>{t.d(i,{CU:()=>a,GH:()=>l,Iw:()=>s,gA:()=>c,tD:()=>r,vF:()=>d});const n=({containerWidth:e,contentWidth:i,index:t,slotAndGapWidth:o})=>{const a=t-1,r=a*o;return i-r>=e?r:n({index:a,slotAndGapWidth:o,containerWidth:e,contentWidth:i})},o=({containerWidth:e,contentWidth:i,gap:t,index:o,slidesShownPerPosition:a,slotAndGapWidth:r})=>n({containerWidth:e,contentWidth:i,index:o,slotAndGapWidth:r})+(({slidesShownPerPosition:e,slotAndGapWidth:i})=>i-(e-parseInt(e,10))*i)({slidesShownPerPosition:a,slotAndGapWidth:r})-t,a=({containerWidth:e,gap:i,index:t,numberOfSlides:n,slotWidth:a})=>{const r=a+i,s=r*n;if(s<=e)return 0;const l=e/r,c=(({index:e,numberOfSlides:i,slidesShownPerPosition:t})=>i-e-Math.floor(t)<1)({index:t,numberOfSlides:n,slidesShownPerPosition:l})?o({containerWidth:e,contentWidth:s,gap:i,index:t,slidesShownPerPosition:l,slotAndGapWidth:r}):t*r;return c?Math.round(-c):0},r=({containerWidth:e,gap:i,index:t,numberOfSlides:n,slotWidth:o})=>{const r=(o+i)*n;if(r<=e||0===e)return!0;const s=a({containerWidth:e,gap:i,index:t,numberOfSlides:n,slotWidth:o}),l=r-e;return Math.abs(s)+i>=l},s=({containerWidth:e,currentIndex:i,gap:t,index:n,numberOfSlides:o,slotWidth:r})=>{const s=r+t;if(s*o<=e||0===e)return!0;return a({containerWidth:e,gap:t,index:i,numberOfSlides:o,slotWidth:r})+s*n<e+s},l=(e,i,t)=>e||`${i.bt("carousel image", "carousel image", "Alternate text for a carousel image that indicates it is a carousel pin, with carousel index followed", undefined, true)} ${t}`,c=({highResOnly:e,lowResOnly:i,slot:t})=>{var n,o,a;const{images:r}=t;var s,l,c,d;return i?`${null!==(s=null==r||null===(l=r["236x"])||void 0===l?void 0:l.url)&&void 0!==s?s:""} 1x`:e?`${null!==(c=null==r||null===(d=r["564x"])||void 0===d?void 0:d.url)&&void 0!==c?c:""} 1x`:[(null==r?void 0:r["474x"])&&`${null!==(n=r["474x"].url)&&void 0!==n?n:""} 2x`,(null==r?void 0:r["736x"])&&`${null!==(o=r["736x"].url)&&void 0!==o?o:""} 3x`,(null==r?void 0:r.orig)&&`${null!==(a=r.orig.url)&&void 0!==a?a:""} 4x`].filter(Boolean).join(", ")},d=(e,i,t,n,o=0)=>{if(t===i)return n*i*-1;const a=Math.floor(t-i),r=i+o;return n===e-1?-1*n*r+a:-1*n*r}},968328:(e,i,t)=>{t.d(i,{ZP:()=>l,tY:()=>d,Yh:()=>c});var n=t(702664),o=t(784590),a=t(19121);const r=0,s=1;function l(e){var i;const t=(0,a.Z)(),n=t.isAuth&&t.id===e,r=(0,o.Z)(!t.isAuth||n?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:n&&t.has_quicksave_board||!(!t.isAuth||null===(i=(null!=r?r:{}).data)||void 0===i||!i.has_quicksave_board)}}function c(e){var i;const t=(0,n.useDispatch)(),r=(0,a.Z)(),s=r.isAuth&&!!r.boardCount&&r.boardCount<5&&e,l=(0,o.Z)(s&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:r.isAuth&&r.id}}:null);return r.isAuth&&void 0===r.save_behavior&&l&&null!==(i=l.data)&&void 0!==i&&i.id&&t({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:l.data.save_behavior}}),{showEnabledSaveBehavior:s}}function d(e){const i=(0,a.Z)();let t;return e&&(i.save_behavior===r?t={type:"classic"}:i.save_behavior===s&&(t={type:"inline"})),{saveBehaviorType:t}}},86551:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(784590),o=t(276775);function a(){const{username:e}=(0,o.useParams)();return(0,n.Z)(null==e?null:{name:"UserResource",options:{username:e,field_set_key:"profile"}})}},782050:(e,i,t)=>{t.d(i,{k:()=>a,s:()=>r});var n=t(667294);const o=(0,n.createContext)(Object.freeze({})),a=o.Provider;function r(){return(0,n.useContext)(o)}},907811:(e,i,t)=>{t.d(i,{Ac:()=>a,c7:()=>o,cg:()=>n});const n=-1,o=5,a=6},499155:(e,i,t)=>{t.r(i),t.d(i,{default:()=>y});var n=t(667294),o=t(898781),a=t(883119),r=t(785893);function s({size:e,iconColor:i,backgroundColor:t,disabled:n,onClick:s}){const l=(0,o.ZP)(),c=48===e?"lg":"xl";return(0,r.jsx)(a.hU,{accessibilityLabel:l.bt("Copy link", "Copy Link", "shareMenu.icon.accessibilityLabel.copy", undefined, true),bgColor:t,icon:"link",iconColor:i||t&&!["white","lightGray","transparent"].includes(t)?i:"gray",size:c,disabled:n,onClick:s})}var l=t(172071),c=t(239324),d=t(518604),u=t(499128),_=t(53987),p=t(867060),h=t(407043),m=t(773285),g=t(276775),v=t(343341),f=t(244617),x=t(827896);function y({backgroundColor:e,iconColor:i,iconSize:t,iconWrapperWidth:y,isCloseupActionBar:b,marginEnd:P,onClick:w,sharedObject:S,spaceBelowIcon:I,viewType:T,viewParameter:E,relayEnvironment:A}){const C=(0,o.ZP)(),{logContextEvent:j}=(0,h.v)(),{checkExperiment:k}=(0,m.F)(),R=k("web_share_menu_logging").anyEnabled,O=(0,v.F9)(),[z,D]=(0,n.useState)(""),[N,B]=(0,n.useState)(!1),[L,Z]=(0,n.useState)(!1),M=(0,g.useLocation)(),F=(0,x.Z)(),V=C.bt("Link copied", "Link copied!", "shareSheet.socialBar.copyLinkButton.LinkCopied", undefined, true),G=e=>{b?navigator.clipboard.writeText(e).then((()=>{var e;e=C.bt("Copied link to your clipboard to share", "Copied link to your clipboard to share", "web.unauth.pinbar.copylink", undefined, true),O.showToast((({hideToast:i})=>(0,r.jsx)(a.xu,{top:!0,children:(0,r.jsx)(u.ZP,{duration:3e3,onHide:i,text:e})})))})):navigator.clipboard.writeText(e).then((()=>{Z(!0),setTimeout((()=>{Z(!1)}),3e3)}))},H=async()=>{if(z)return void G(z);B(!0);const e=(e=>{let i;if("pin"===S.type&&S.id){const e={shouldTrackForPrevLocation:!0};i=F(S.id,e)}return{invite_category:3,invite_channel:e,object_type:S.type,object_id:S.id,name:S.name,description:S.description||"",path:S.url,picture:S.imageUrl,client_tracking_params:i}})(12);f.Z.createShareInviteData(e,A).then((i=>{const{invite_url:t}=i;B(!1),t&&(D(t),f.Z.logShareInvite(e,i,A),G(t))}))},U=()=>{if(H(),R){const e=p.y[S.type];e||l.Z.increment("social.web.copyLinkButton.sharedObject.type",void 0,{type:S.type}),b&&j({event_type:101,component:14147,element:13103,object_id_str:S.id,view_type:T,view_parameter:E,aux_data:e?{invite_object:e}:void 0}),w&&w()}};return(0,_.am)(M)&&b&&k("web_copy_link_btn_replace").anyEnabled?(0,r.jsx)(a.xu,{marginStart:1,children:(0,r.jsx)(a.zx,{accessibilityLabel:C.bt("Copy link", "Copy link", "shareSheet.socialBar.copyLinkButton.CopyLink", undefined, true),text:C.bt("Copy link", "Copy link", "shareSheet.socialBar.copyLinkButton.CopyLink", undefined, true),onClick:()=>U(),size:"lg",color:"gray",fullWidth:!0})}):(0,r.jsxs)(d.Z,{isCloseupActionBar:!0,width:y||t,marginEnd:P||!1,children:[(0,r.jsx)(a.xu,{alignItems:b?"center":"stretch",display:b?"flex":"block",marginBottom:I,width:b?"100%":"auto",children:(0,r.jsx)(a.kC,{alignItems:"center",direction:"column",justifyContent:"center",width:t,children:(0,r.jsx)(s,{backgroundColor:e,iconColor:i,size:t,onClick:U,disabled:N})})}),!b&&(0,r.jsx)(c.Z,{text:L?V:C.bt("Copy link", "Copy link", "shareSheet.socialBar.copyLinkButton.CopyLink", undefined, true)})]})}},451204:(e,i,t)=>{t.r(i),t.d(i,{default:()=>pe});var n=t(667294),o=t(172071),a=t(116303),r=t(898781),s=t(934523),l=t(349700),c=t(407043),d=t(773285);const u={FONT_SIZE:"300",ITEM_SIZE:56,ITEM_PADDING:30,SPACE_BELOW_ITEM:2,ITEM_ROW_HEIGHT:98,SECTION_LABEL_HEIGHT:64,MAX_CONTACTS_SHOWN:5,SHARE_SHEET_PADDING_X:3,SHARE_SHEET_PADDING_Y:2},_={FONT_SIZE:"200",ITEM_SIZE:48,ITEM_PADDING:26,SPACE_BELOW_ITEM:2,ITEM_ROW_HEIGHT:81,SECTION_LABEL_HEIGHT:49,MAX_CONTACTS_SHOWN:4,SHARE_SHEET_PADDING_X:3,SHARE_SHEET_PADDING_Y:1},p=(u.MAX_CONTACTS_SHOWN+1)*(u.ITEM_SIZE+u.ITEM_PADDING)+2*u.SHARE_SHEET_PADDING_X*4,h=(_.MAX_CONTACTS_SHOWN+1)*(_.ITEM_SIZE+_.ITEM_PADDING)+2*_.SHARE_SHEET_PADDING_X*4,m="error";var g=t(883119),v=t(785893);function f({idx:e,item:i,onSendMessage:t,onViewConversation:o,sentHistory:p}){var h;const f=(0,r.ZP)(),{logContextEvent:x}=(0,c.v)(),[y,b]=(0,n.useState)(!1),P=i.id||"string"==typeof i.email&&i.email||"",w=p[P]===m,S=Object.prototype.hasOwnProperty.call(p,P)&&!w,I=null!==(h=p[P])&&void 0!==h?h:"";(0,n.useEffect)((()=>{w&&b(!1)}),[w]);let T="";"string"!=typeof i.full_name||i.full_name.match(/^\s*$/)?"string"!=typeof i.email||i.email.match(/^\s*$/)||(T=i.email):T=i.full_name;let E="";S?E=f.bt("View chat", "View chat", "shareSheet.ContactItem.viewChat", undefined, true):y&&(E=f.bt("Sent", "Sent", "shareSheet.ContactItem.sent", undefined, true));const{checkExperiment:A}=(0,d.F)(),C=A("web_sharesheet_resize").anyEnabled?_:u;return(0,v.jsx)(g.xu,{alignItems:"center","data-test-id":"sharesheet-contact-item",display:"flex",direction:"column",width:C.ITEM_SIZE+C.ITEM_PADDING,children:(0,v.jsx)(g.xu,{display:"inlineBlock",role:"button",children:(0,v.jsxs)(g.iP,{onTap:S?()=>o(I):()=>{x({event_type:101,component:13029,element:1039,aux_data:{result_index:e+1,rs:i.debug_reason.reason}}),b(!0),t(i)},children:[(0,v.jsxs)(g.xu,{alignItems:"center","data-test-id":y?"sharesheet-viewchat-link":"sharesheet-contact-item-button",display:"flex",height:C.ITEM_SIZE,justifyContent:"center",marginBottom:C.SPACE_BELOW_ITEM,width:C.ITEM_SIZE,children:[y&&(0,v.jsx)(g.xu,{alignItems:"center",color:"transparentDarkGray","data-test-id":"sharesheet-contact-item-sent-icon",display:"flex",height:C.ITEM_SIZE,justifyContent:"center",position:"absolute",rounding:"circle",width:C.ITEM_SIZE,zIndex:new g.Ry(s.fe),children:(0,v.jsx)(g.JO,{accessibilityLabel:(0,l.Wc)(f.bt("Sent to {{recipientName}}", "Sent to {{recipientName}}", "shareSheet.ContactItem.sentIcon.accessibilityLabel", undefined, true),{recipientName:T}),icon:"check",color:"light",size:24})}),(0,v.jsx)(a.Z,{size:"fit",src:i.image_large_url,name:T})]}),(0,v.jsxs)(g.xu,{"data-test-id":"sharesheet-contact-item-label",width:C.ITEM_SIZE,children:[(0,v.jsx)(g.xv,{lineClamp:1,size:"100",align:"center",children:T}),(0,v.jsx)(g.xv,{color:"subtle",size:"100",align:"center",children:E})]})]})})})}var x=t(784590),y=t(479301),b=t(711108);function P(e){var i;const{logContextEvent:t}=(0,c.v)(),o=(0,r.ZP)(),{onHide:a,onSendMessage:s,onShowImportContacts:l,objectAttachment:p,sentHistory:h}=e,{checkExperiment:m}=(0,d.F)(),P=m("web_sharesheet_resize").anyEnabled?_:u,{isLoaded:w}=(0,x.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default"},noCache:!0}),{shareSuggestions:S}=(0,b.E)(),I=(null===(i=S[""])||void 0===i?void 0:i.slice(0,P.MAX_CONTACTS_SHOWN))||[],T=I.length>0;(0,n.useEffect)((()=>{if(w){t({event_type:T?7511:7512,component:56,view_type:70,view_parameter:256})}}),[T,t,w]);const{dropdownOpen:E,conversationOpen:A,newMessageOpen:C}=(0,y.Z5)(),j=e=>{A(e),E(),a()},k=I.map(((e,i)=>{const t=`${e.id||e.email||i}`,n={item:e,idx:i,onSendMessage:s,onViewConversation:j,sentHistory:h};return(0,v.jsx)(f,{...n},t)})),R=(0,d.F)().checkExperiment("web_sharesheet_resize").anyEnabled,O=!T&&!w;return(0,v.jsxs)(g.kC,{direction:"column",children:[(0,v.jsx)(g.kC,{alignItems:"center",height:P.SECTION_LABEL_HEIGHT,justifyContent:"center",children:(0,v.jsx)(g.xv,{align:"center",size:P.FONT_SIZE,weight:"bold",children:o.bt("Send on Pinterest", "Send on Pinterest", "ContactsSuggestions.Header.text", undefined, true)})}),(0,v.jsx)(g.xu,{display:"flex",height:P.ITEM_ROW_HEIGHT,justifyContent:O?"center":void 0,marginBottom:5,children:O?(0,v.jsx)(g.xu,{paddingY:2,children:(0,v.jsx)(g.$j,{accessibilityLabel:o.bt("Loading conversation messages", "Loading Conversation Messages", "SendObject.contactList.spinner", undefined, true),show:!0})}):(0,v.jsxs)(g.kC,{direction:"row",children:[(0,v.jsxs)(g.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:P.ITEM_SIZE+P.ITEM_PADDING,children:[(0,v.jsx)(g.xu,{height:P.ITEM_SIZE,marginBottom:P.SPACE_BELOW_ITEM,width:P.ITEM_SIZE,children:(0,v.jsx)(g.hU,{accessibilityLabel:o.bt("Search for users", "Search for users", "ContactsSuggestsions.SearchIcon.accessibilityLabel", undefined, true),bgColor:"lightGray",icon:"search",iconColor:"darkGray",onClick:()=>{C(p),E(),a()},size:R?"lg":"xl"})}),(0,v.jsx)(g.xv,{lineClamp:1,size:"100",children:o.bt("Search", "Search", "ContactsSuggestions.SearchOption.text", undefined, true)})]}),T?k:(0,v.jsxs)(g.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:P.ITEM_SIZE+P.ITEM_PADDING,children:[(0,v.jsx)(g.xu,{height:P.ITEM_SIZE,marginBottom:P.SPACE_BELOW_ITEM,width:P.ITEM_SIZE,children:(0,v.jsx)(g.hU,{accessibilityLabel:o.bt("Search for users", "Search for users", "ContactsSuggestsions.SearchIcon.accessibilityLabel", undefined, true),bgColor:"lightGray",icon:"people",iconColor:"darkGray",onClick:l,size:R?"lg":"xl"})}),(0,v.jsx)(g.xv,{lineClamp:1,size:"100",children:o.bt("Import", "Import", "ContactsSuggestions.ImportOption.text", undefined, true)})]})]})})]})}function w(e){switch(e){case"AuthHomefeed":return 13;case"BaseBoardPinGrid":return 5;case"BoardMoreIdeasTabContent":return 23;case"ConversationView":return 19;case"FollowingFeedGrid":return 21;case"ProfilePromotablePinCard":return 1;case"RelatedPinGrid":case"RelatedProductsFeed":return 14;case"RelatedProductsExploreTab":return 4;case"ShoppingPackageItem":case"ShoppingSquareGridProductDetailPage":case"ShoppingGridShippedMetadata":case"ProductPinsFeed":return 27;case"StoryPinFeedGrid":return 28;case"TodayArticleFeed":return 20;case"UserProfilePinGrid":default:return e}}var S=t(936776),I=t(837727);function T(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class E extends n.Component{constructor(...e){super(...e),T(this,"state",{textValue:this.props.initialTextValue||"",emailValue:""}),T(this,"handleSendEmail",((e,i)=>{if(e){const t={type:"email_share_suggestion",id:"",email:e,debug_reason:{reason:"",readable_reason:""}};this.props.onSendMessage(t,i)}})),T(this,"handleTextValueChange",(({value:e})=>{this.setState({textValue:e})})),T(this,"handleEmailValueChange",(({value:e})=>{this.setState({emailValue:e})}))}renderCloseButton(){const{i18n:e,onCancelDraft:i}=this.props;return(0,v.jsx)(g.hU,{accessibilityLabel:e.bt("Cancel share with user", "Cancel share to user", "accessibility label for close button", undefined, true),icon:"arrow-back",onClick:i,size:"sm",iconColor:"gray"})}render(){const{width:e}=this.props;return(0,v.jsxs)(g.xu,{display:"flex",direction:"column",column:12,paddingX:4,paddingY:2,width:e,color:"default",children:[(0,v.jsxs)(g.xu,{display:"flex",alignItems:"center",paddingY:4,children:[this.renderCloseButton(),(0,v.jsx)(g.xu,{flex:"grow",marginEnd:8,children:(0,v.jsx)(g.xv,{align:"center",weight:"bold",children:this.props.i18n.bt("Send to", "Send to", "shareSheet.SendToEmail.label", undefined, true)})})]}),(0,v.jsxs)(g.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,v.jsx)(g.xu,{paddingY:1,marginBottom:4,children:(0,v.jsx)(g.Kx,{id:"email",onChange:this.handleEmailValueChange,placeholder:this.props.i18n.bt("Enter email address", "Enter email address", "Email address to send to", undefined, true),value:this.state.emailValue||"",rows:1})}),(0,v.jsx)(g.Kx,{id:"sendObjectMessage",onChange:this.handleTextValueChange,placeholder:this.props.i18n.bt("Add a message", "Add a message", "shareSheet.SendToEmail.textareaPlaceholder", undefined, true),value:this.state.textValue||""}),(0,v.jsx)(g.xu,{paddingY:4,display:"flex",justifyContent:"center",children:(0,v.jsx)(g.zx,{size:"lg",color:"red",onClick:()=>this.handleSendEmail(this.state.emailValue||"",this.state.textValue||""),type:"submit",text:this.props.i18n.bt("Send", "Send", "shareSheet.SendToEmail.sendButton", undefined, true),disabled:!(0,S.Z)(this.state.emailValue)})})]})]})}}function A(e){const i=(0,r.ZP)();return(0,v.jsx)(E,{...e,i18n:i})}var C=t(567831),j=t(499155),k=t(31149),R=t(107193),O=t(659522),z=t(331744),D=t(757146);function N({size:e=48}){return(0,v.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,v.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#fff"}),(0,v.jsx)("rect",{x:".5",y:".5",width:"55",height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4"}),(0,v.jsx)("path",{d:"M39 19.5c0 1.381-1.119 2.5-2.5 2.5S34 20.881 34 19.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5ZM18.5 28c0-.69-.56-1.25-1.25-1.25S16 27.31 16 28s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25ZM26.75 38.75c0-.69.56-1.25 1.25-1.25s1.25.56 1.25 1.25S28.69 40 28 40s-1.25-.56-1.25-1.25Z",fill:"#E60023"}),(0,v.jsx)("path",{d:"M29.25 17.25c0 .69-.56 1.25-1.25 1.25s-1.25-.56-1.25-1.25S27.31 16 28 16s1.25.56 1.25 1.25ZM17 36.5c0-1.381 1.119-2.5 2.5-2.5s2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5-2.5-1.119-2.5-2.5ZM38.75 26.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25S40 28.69 40 28s-.56-1.25-1.25-1.25Z",fill:"#FFD63F"}),(0,v.jsx)("path",{d:"M19.5 22c1.381 0 2.5-1.119 2.5-2.5S20.881 17 19.5 17 17 18.119 17 19.5s1.119 2.5 2.5 2.5ZM36.5 34c-1.381 0-2.5 1.119-2.5 2.5s1.119 2.5 2.5 2.5 2.5-1.119 2.5-2.5-1.119-2.5-2.5-2.5Z",fill:"#46CC88"}),(0,v.jsx)("path",{d:"M28 21c-3.866 0-7 3.134-7 7s3.134 7 7 7 7-3.134 7-7-3.134-7-7-7Z",fill:"#3869FF"})]})}var B=t(239324),L=t(518604),Z=t(19121);function M({iconSize:e,iconWrapperWidth:i,marginBottom:t,marginEnd:n,onCreatePincodeClick:o,sharedObject:a}){const s=(0,r.ZP)(),l=(0,Z.Z)();return o&&[I.d.BOARD,I.d.PINNER,I.d.USER].includes(a.type)&&l.isAuth&&(a.id===l.id||l.isEmployee)?(0,v.jsxs)(L.Z,{width:i,marginEnd:n,children:[(0,v.jsx)(g.xu,{marginBottom:t,children:(0,v.jsx)(g.iP,{fullWidth:!1,onTap:o,children:(0,v.jsx)(N,{size:e})})}),(0,v.jsx)(B.Z,{text:s.bt("Pincode", "Pincode", "Share via pincode", undefined, true)})]},"pincode"):null}var F=t(464240),V=t(22641),G=t(167912),H=t(780280),U=t(244617),W=t(827896),$=t(867060),Y=t(343341);function X(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const K={backgroundColor:"#ffffff",border:"none",padding:0},q=new Set(["JP","TW","TH"]),J=(e,i)=>{(0,R.default)((i=>{i&&(i.getUserID()?e():i.login((()=>{e()})))}),i)};class Q extends n.Component{constructor(...e){super(...e),X(this,"state",{whatsappInviteData:null,inviteData:null,whatsappURL:"",whatsAppLogged:!1,copyLinkLogged:!1}),X(this,"logShareInviteLink",(()=>{const{copyLinkLogged:e,inviteData:i}=this.state,t=this.getShareOptions(12);e||(U.Z.logShareInvite(t,i,this.props.relayEnvironment),this.setState({copyLinkLogged:!0}))}))}componentDidMount(){this.getWhatsAppURL()}getShareOptions(e){let i;const{sharedObject:t,getClientTrackingParams:n}=this.props;if("pin"===t.type&&t.id){const e={shouldTrackForPrevLocation:!0};i=n(t.id,e)}return{invite_category:3,invite_channel:e,object_type:t.type,object_id:t.id,name:t.name,description:t.description||"",path:t.url,picture:t.imageUrl,client_tracking_params:i}}getWhatsAppURL(){const e=this.getShareOptions(10);U.Z.createShareInviteData(e,this.props.relayEnvironment).then((e=>{const i=`${e.title}\n${e.invite_url}`;if(i){const t=encodeURIComponent(i);this.setState({whatsappInviteData:e,whatsappURL:"https://web.whatsapp.com/send?text="+t})}else this.setState({whatsappURL:"https://web.whatsapp.com/send?text="+(0,C.Z)(this.props.sharedObject.url)})}))}checkWritePermissions(){return!!this.props.viewer.isWriteBanned}handleSocialShareClick(e,i){if(this.checkWritePermissions())return;const{onCreatePincodeClick:t,onExternalSend:n,logContextEvent:a,viewType:r,viewParameter:s,inShareMenuLoggingExp:l,sharedObject:c}=this.props;let d=l?$.c[i]:46;"facebook"===e||5===i?(this.openFacebookDialog(),l||(d=257)):"twitter"===e||9===i?(this.openTwitterDialog(),l||(d=256)):"messenger"===e||6===i?(this.openFbMessengerDialog(),l||(d=950)):"whatsapp"===e||10===i?(this.openWhatsAppDialog(),l||(d=951)):"pincode"===e||16===i?t&&t():"copylink"===e||12===i?(this.openShareUrlLink(),l||(d=100)):"email"===e||1===i?(this.openEmailDialog(),l||(d=258)):"line"!==e&&8!==i||(this.openLineDialog(),l||(d=952)),n&&n();const u=$.y[c.type];u||o.Z.increment("social.web.legoShareSocialBar.sharedObject.type",void 0,{type:c.type}),a({event_type:101,component:l?14121:153,element:d,object_id_str:l?c.id:void 0,view_type:l?r:void 0,view_parameter:l?s:void 0,aux_data:l?{invite_object:u}:void 0})}openEmailDialog(){this.props.onEmailIconClick()}openFacebookDialog(){const{unauthId:e,viewer:i}=this.props;J((()=>{U.Z.shareFacebookInvite({options:this.getShareOptions(5),unauthId:e,viewer:i},this.props.relayEnvironment)}),i)}openFbMessengerDialog(){const{unauthId:e,viewer:i}=this.props;J((()=>{U.Z.shareFbMessengerInvite({options:this.getShareOptions(6),unauthId:e,viewer:i},this.props.relayEnvironment)}),i)}openWhatsAppDialog(){const e=this.getShareOptions(10);this.state.whatsAppLogged||(U.Z.logShareInvite(e,this.state.whatsappInviteData,this.props.relayEnvironment),this.setState({whatsAppLogged:!0}))}openShareUrlLink(){this.logShareInviteLink()}openTwitterDialog(){U.Z.shareTwitterInvite(this.getShareOptions(9),this.props.relayEnvironment)}openLineDialog(){U.Z.shareLineInvite(this.getShareOptions(8),this.props.relayEnvironment)}renderEmail(){const{inResizeShareSheetExp:e}=this.props,i=e?_:u,t=i.ITEM_SIZE,n=i.ITEM_SIZE+i.ITEM_PADDING,o=i.SPACE_BELOW_ITEM;return(0,v.jsxs)(L.Z,{width:n,marginEnd:!1,children:[(0,v.jsx)(g.xu,{display:"inlineBlock",marginBottom:o,children:(0,v.jsx)("button",{"aria-label":this.props.i18n.bt("Share by email", "Share on Email", "sharesheet.shareSocialBar.ShareEmail", undefined, true),onClick:()=>this.handleSocialShareClick("email",1),style:K,children:(0,v.jsx)(k.Z,{size:t})})}),(0,v.jsx)(B.Z,{text:this.props.i18n.bt("Email address", "Email", "Share via email", undefined, true)})]},"email")}renderShareOptions(){const{i18n:e,onCreatePincodeClick:i,sharedObject:t,showLineShare:o,showMessengerShare:a,isPublisherSharingObject:r,viewType:s,viewParameter:l,inResizeShareSheetExp:c}=this.props,d=c?_:u,p=d.ITEM_SIZE,h=d.ITEM_SIZE+d.ITEM_PADDING,m=d.SPACE_BELOW_ITEM;return(0,v.jsx)(n.Fragment,{children:(0,v.jsxs)(g.kC,{justifyContent:"start",wrap:c,children:[o&&(0,v.jsxs)(L.Z,{width:h,marginEnd:o,children:[(0,v.jsx)(g.xu,{marginBottom:m,children:(0,v.jsx)("button",{"aria-label":e.bt("Share on LINE", "Share on LINE", "sharesheet.shareSocialBar.ShareLine", undefined, true),onClick:()=>this.handleSocialShareClick("line",8),style:K,children:(0,v.jsx)(z.Z,{size:p})})}),(0,v.jsx)(B.Z,{text:e.bt("LINE", "LINE", "sharesheet.shareSocialBar.ShareLineLabel", undefined, true)})]}),(0,v.jsxs)(L.Z,{width:h,marginEnd:!1,children:[(0,v.jsx)(g.xu,{marginBottom:m,children:(0,v.jsx)("button",{"aria-label":e.bt("Share on WhatsApp", "Share on WhatsApp", "sharesheet.shareSocialBar.ShareWhatsapp", undefined, true),onClick:()=>this.handleSocialShareClick("whatsapp",10),style:K,tabIndex:"-1",children:(0,v.jsx)(g.iP,{rounding:"circle",role:"link",href:this.state.whatsappURL,target:"blank",children:(0,v.jsx)(V.Z,{size:p})})})}),(0,v.jsx)(B.Z,{text:e.bt("WhatsApp", "WhatsApp", "sharesheet.shareSocialBar.ShareWhatsappLabel", undefined, true)})]}),a&&(0,v.jsxs)(L.Z,{width:h,marginEnd:!1,children:[(0,v.jsx)(g.xu,{marginBottom:m,children:(0,v.jsx)("button",{"aria-label":e.bt("Share on Messenger", "Share on Messenger", "sharesheet.shareSocialBar.ShareMessenger", undefined, true),onClick:()=>this.handleSocialShareClick("messenger",6),style:K,children:(0,v.jsx)(D.Z,{size:p})})}),(0,v.jsx)(B.Z,{text:e.bt("Messenger", "Messenger", "sharesheet.shareSocialBar.ShareMessengerLabel", undefined, true)})]}),(0,v.jsxs)(L.Z,{width:h,marginEnd:!1,children:[(0,v.jsx)(g.xu,{marginBottom:m,children:(0,v.jsx)("button",{"aria-label":e.bt("Share on Facebook", "Share on Facebook", "sharesheet.shareSocialBar.ShareFacebook", undefined, true),onClick:()=>this.handleSocialShareClick("facebook",5),style:K,children:(0,v.jsx)(O.Z,{size:p})})}),(0,v.jsx)(B.Z,{text:e.bt("Facebook", "Facebook", "sharesheet.shareSocialBar.ShareFacebookLabel", undefined, true)})]}),(0,v.jsxs)(L.Z,{width:h,marginEnd:!1,children:[(0,v.jsx)(g.xu,{marginBottom:m,children:(0,v.jsx)("button",{"aria-label":e.bt("Share on Twitter", "Share on Twitter", "sharesheet.shareSocialBar.ShareTwitter", undefined, true),onClick:()=>this.handleSocialShareClick("twitter",9),style:K,"data-test-id":"twitter-share-icon",children:(0,v.jsx)(F.Z,{size:p})})}),(0,v.jsx)(B.Z,{text:e.bt("Twitter", "Twitter", "sharesheet.shareSocialBar.ShareTwitterLabel", undefined, true)})]}),(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)(M,{iconSize:p,iconWrapperWidth:h,marginBottom:m,marginEnd:!1,onCreatePincodeClick:i,sharedObject:t}),(0,v.jsx)(j.default,{sharedObject:t,backgroundColor:"lightGray",iconColor:"darkGray",iconSize:p,iconWrapperWidth:h,marginEnd:o,onClick:()=>this.handleSocialShareClick("copylink",12),isCloseupActionBar:!1,spaceBelowIcon:m,viewType:s,viewParameter:l,relayEnvironment:this.props.relayEnvironment},"copylink"),!r&&this.renderEmail()]})]})})}render(){const{paddingX:e,inResizeShareSheetExp:i}=this.props,t=i?_:u;return(0,v.jsxs)(g.xu,{paddingX:e,children:[(0,v.jsx)(g.kC,{alignContent:"center",alignItems:"center",height:t.SECTION_LABEL_HEIGHT,justifyContent:"center",children:(0,v.jsx)(g.xv,{size:t.FONT_SIZE,weight:"bold",children:this.props.i18n.bt("Share", "Share", "Sharesheet.ShareSocialBar", undefined, true)})}),(0,v.jsx)(g.kC,{alignContent:"start",alignItems:"stretch",justifyContent:"start",minHeight:t.ITEM_ROW_HEIGHT,children:this.renderShareOptions()})]})}}function ee(e){const{logContextEvent:i}=(0,c.v)(),{checkExperiment:t}=(0,d.F)(),n=(0,r.ZP)(),o=(0,Z.Z)(),a=o.isAuth&&q.has(o.country),s=t("web_messenger_share_channel").anyEnabled,l=(0,H.B)(),u=t("web_share_menu_logging").anyEnabled,_=t("web_sharesheet_resize").anyEnabled,p=t("graphql_migration_sharesheet_sgrowth_web").anyEnabled,h=(0,G.useRelayEnvironment)();return(0,v.jsx)(Q,{...e,toastManagerContext:(0,Y.F9)(),viewer:(0,Z.Z)(),showLineShare:a,showMessengerShare:s,i18n:n,logContextEvent:i,unauthId:l.unauthId,inShareMenuLoggingExp:u,inResizeShareSheetExp:_,shareSheetExpEnabled:p,relayEnvironment:p?h:void 0,getClientTrackingParams:(0,W.Z)()})}var ie=t(6637),te=t(499128),ne=t(717615),oe=t(231947),ae=t(758523);const re=(e,i)=>{const t={};return e.forEach((e=>{t[e]=i})),t};function se(e){const{logContextEvent:i}=(0,c.v)(),t=(0,r.ZP)(),[a,s]=(0,n.useState)(!1),[l,f]=(0,n.useState)(null),[x,b]=(0,n.useState)({}),[S]=(0,n.useState)(((e,i)=>"today_article"===e?i.bt("Check out this article on Pinterest!", "Check out this article on Pinterest!", "sendObject.initialTextValue.todayArticle", undefined, true):"")(e.sendType,t)),{showOneToast:I}=(0,Y.F9)(),{surface:T}=(0,ae.$)(),E=(0,Z.Z)(),C=(0,ne.Z)(),{conversationCreate:j}=(0,y.Z5)(),k=(0,y.NG)(),R=(0,n.useRef)();(0,n.useEffect)((()=>{var e;return null===(e=R.current)||void 0===e?void 0:e.focus()}),[]);const O=(t,n)=>{s(!1),e.onMessageSent(),((t,n)=>{const{sharedObject:a}=e,r=a.id;o.Z.increment("web.sharesheet.internal.send",1,{status:"success"}),i({event_type:180,element:276,object_id_str:r,aux_data:{conversation_id:t,pin_id:n}})})(t,n)},z=(e,i)=>{o.Z.increment("web.sharesheet.internal.send",1,{status:"fail"}),b({...x,...re(e,m)});const t=i.message_detail||i.message;t&&I((({hideToast:e})=>(0,v.jsx)(te.ZP,{variant:"error",duration:5e3,onHide:e,text:t})))},D=async(i,t,n)=>{const{sharedObject:o,sendType:a}=e,r=o.id,s={emails:t,user_ids:i,text:n,source:w(T)};s[a]=r;const l=ie.Z.create("ConversationsResource",s),c=i.length>0?i:t;try{const e=await l.callCreate(),i=e&&e.resource_response.data;j(i),O(i.id,"pin"===a?r:null),b({...x,...re(c,i.id)})}catch(d){z(c,d)}},N=(t,n)=>{"conversation_share_suggestion"===t.type?((i,t,n)=>{const{sharedObject:o,sendType:a}=e;let r;switch(a){case"pin":r="pinId";break;case"board":r="boardId";break;case"did_it":r="didItId";break;case"user":case"pinner":r="userId"}const s=r?k(i,{text:t,[r]:o.id,source:w(T)},void 0,E):void 0;s&&s.then((()=>{O(i,"pin"===a?o.id:null),b({...x,[i]:i})})).catch((e=>{z([i],e)}))})(t.id,n):"user_share_suggestion"===t.type&&t.username?D([t.id],[],n):D([],[t.email],n),i({event_type:101,component:56,element:276})},{onCreatePincodeClick:B,onShowImport:L,sendType:M,sharedObject:F,onHide:V,onExternalSend:G,viewType:H,viewParameter:U}=e,W="user"===e.sendType&&(0,oe.q6)(E,e.sharedObject.id,C),$=("board"===e.sendType||"pin"===e.sendType)&&void 0!==e.sharedObject.ownerId&&(0,oe.q6)(E,e.sharedObject.ownerId,C),X=W||$,{checkExperiment:K}=(0,d.F)(),q=K("web_sharesheet_resize").anyEnabled,J=q?_:u,Q=q?h:p;return a&&"email"===l?(0,v.jsx)(A,{initialTextValue:S,objectId:F.id,objectType:M,onCancelDraft:()=>{s(!1),f(null)},onHide:V,onSendMessage:N,width:Q}):(0,v.jsxs)(g.xu,{color:"default",paddingX:J.SHARE_SHEET_PADDING_X,paddingY:J.SHARE_SHEET_PADDING_Y,width:Q,tabIndex:0,ref:R,children:[(0,v.jsx)(ee,{onCreatePincodeClick:B,onEmailIconClick:()=>{s(!0),f("email")},onExternalSend:G,onHide:V,sharedObject:F,isPublisherSharingObject:X,viewType:H,viewParameter:U}),!X&&(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)(g.xu,{paddingY:1,paddingX:3,children:(0,v.jsx)(g.iz,{})}),(0,v.jsx)(P,{objectAttachment:{type:M,id:F.id},onHide:V,onSendMessage:N,onShowImportContacts:L,sentHistory:x})]})]})}var le=t(177471);const ce=["facebook","google"];function de(e,i){return"facebook"===e?i.bt("Facebook", "Facebook", " - ", undefined, true):"google"===e?i.bt("Google", "Google", " - ", undefined, true):i.bt("Other", "Other", " - ", undefined, true)}function ue(e,i,t){return"facebook"===e?t.bt("Friends who are on Pinterest", "Friends who are on Pinterest", " - ", undefined, true):"google"===e&&i&&-1!==i.indexOf("@gmail")?i:null}function _e({onBack:e}){const i=(0,r.ZP)(),t=(0,Z.Z)(),n=t.isAuth?t.email:null,o=ce.filter((e=>!t.isAuth||!1===t.socialNetwork[e].connected)),a=(0,le.k)();return(0,v.jsx)(g.xu,{paddingX:1,paddingY:2,children:(0,v.jsxs)(g.kC,{gap:{row:0,column:2},direction:"column",children:[(0,v.jsxs)(g.kC,{gap:{row:2,column:0},alignItems:"center",children:[(0,v.jsx)(g.hU,{accessibilityLabel:i.bt("Back", "Back", " - ", undefined, true),icon:"arrow-back",iconColor:"darkGray",onClick:e,size:"md"}),(0,v.jsx)(g.xv,{size:"300",weight:"bold",children:i.bt("Upload contacts from ...", "Upload contacts from...", " - ", undefined, true)})]}),(0,v.jsx)(g.kC,{direction:"column",gap:{row:0,column:4},children:o.map((e=>(0,v.jsx)(g.xu,{paddingX:2,children:(0,v.jsxs)(g.iP,{onTap:()=>(e=>{a.handleConnect(e,!0,Object.freeze({}),i)})(e),children:[(0,v.jsx)(g.xv,{size:"200",children:de(e,i)}),(0,v.jsx)(g.xv,{size:"200",children:ue(e,n,i)})]})},e)))})]})})}function pe({element:e,onCreatePincodeClick:i,onExternalSend:t,onHide:a,sendType:r,sharedObject:l,viewType:u,viewParameter:_}){const{logContextEvent:p}=(0,c.v)(),[h,m]=(0,n.useState)(!1),{checkExperiment:f}=(0,d.F)(),x=f("web_share_menu_logging").anyEnabled,y=(0,n.useRef)(!1);(0,n.useEffect)((()=>{const i=$.y[r];return i||o.Z.increment("social.web.sendObjectWrapper.sendType",void 0,{type:r}),p({event_type:7120,component:x?14121:void 0,object_id_str:l.id,element:x?e:void 0,view_type:u,view_parameter:_,aux_data:x?{invite_object:i}:void 0}),()=>{x||p({event_type:7121,object_id_str:l.id,view_type:u,view_parameter:_});const e=y.current?7493:7492;p({event_type:e,component:x?14121:void 0,object_id_str:x?l.id:void 0,element:x?13097:void 0,view_type:u,view_parameter:_,aux_data:x?{invite_object:i}:void 0})}}),[]);const b=()=>{m(!0)},P=()=>{m(!1)},w=()=>{y.current=!0},S=()=>{y.current=!0,t&&t()};return h?(0,v.jsx)(_e,{onBack:P}):(0,v.jsx)(g.xu,{overflow:"hidden",rounding:4,zIndex:new g.Ry(s.fe-1),color:"default",children:(0,v.jsx)(se,{onCreatePincodeClick:i,onHide:a,onShowImport:b,onMessageSent:w,onExternalSend:S,sendType:r,sharedObject:l,viewType:u,viewParameter:_})})}},239324:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(207112),o=t(883119),a=t(785893);const r=({text:e})=>(0,a.jsx)(o.xv,{align:"center",size:"100",children:(0,a.jsx)(n.Z,{maxWidthPx:128,maxHeightPx:50,children:e})})},518604:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(883119),o=t(785893);const a=({width:e,marginEnd:i,children:t,isCloseupActionBar:a})=>(0,o.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",marginEnd:i?2:0,width:e,marginBottom:a?0:5,children:t})},304515:(e,i,t)=>{t.d(i,{Z:()=>s});var n=t(81226),o=t(898781),a=t(883119),r=t(785893);function s({duration:e}){const i=(0,o.ZP)();return(0,r.jsxs)(a.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[(0,r.jsx)(a.JO,{accessibilityLabel:i.bt("Video camera icon", "Video camera icon", "Video camera indicator icon for a Pin", undefined, true),color:"light",icon:"video-camera"}),(0,r.jsx)(a.xu,{marginStart:1,children:(0,r.jsx)(a.xv,{color:"inverse",size:"100",lineClamp:1,children:(0,n.Z)(e)})})]})}},811403:(e,i,t)=>{function n(e,i){return{type:"CHANGE_CAROUSEL_SLOT_INDEX",payload:{id:e,index:i}}}function o(e,i){return{type:"SET_PIN_COMMENTS_DISABLED",payload:{id:e,pinCommentsDisabled:i}}}function a(e,i,t,n,o){return{type:"PIN_SAVE",payload:{id:e,boardId:i,title:t,url:n,localPinId:o}}}function r(e){return{type:"PIN_UNSAVE",payload:{id:e}}}function s(e){return{type:"PIN_SHOW_SUGGESTED_CREATOR_RECS",payload:{id:e,value:!0}}}function l({id:e,text:i,undoAction:t,undoActionOptions:n,undoText:o}){return{type:"PIN_SHOW_UNDO_AND_FEEDBACK",payload:{id:e,value:!0,text:i,undoAction:t,undoActionOptions:n,undoText:o}}}function c(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function d(e,i){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:i}}}function u(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!0}}}function _(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!1}}}function p(e){return{type:"PIN_SHOW_AD_REASONS_MODAL",payload:{id:e,value:!0}}}function h(e){return{payload:{id:e,value:!1},type:"PIN_SHOW_AD_REASONS_MODAL"}}t.d(i,{Gb:()=>r,I1:()=>c,Ib:()=>u,NA:()=>l,Ur:()=>a,Vw:()=>s,b9:()=>p,fH:()=>m,i0:()=>_,mO:()=>o,q1:()=>d,yR:()=>n,yj:()=>h});const m=(e,i)=>({type:"PIN_FEEDBACK",payload:{id:e,value:i}})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/57097.en_GB-150e23d9c8989a19.mjs.map